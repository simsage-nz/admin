(this.webpackJsonpsimsage=this.webpackJsonpsimsage||[]).push([[0],{268:function(e,t,a){e.exports=a(507)},507:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(25),s=a.n(i),o=a(20),l=a(253),c=a(29),d=a(2),u=a(19),p=a(240),m=a(241),h=a(242),g=a(13),f=a(9),y=a(10),_=a(112),v=a.n(_);function b(){return{selected_tab:"organisations",notification_list:[],show_notifications:!1,operator_wait_timeout_in_ms:1e4,notification_list_display_size:50,selected_organisation_id:"",selected_organisation:"",organisation_filter:"",organisation_list:[],selected_knowledgebase:null,selected_knowledgebase_id:"",knowledge_base_list:[],inventorize_list:[],inventorize_busy:!1,user_list:[],user_filter:"",crawler_list:[],busy:!1,uploading:!1,session:null,user:null,license:null,document_list:[],document_previous:null,document_filter:"",prev_document_filter:"",document_page:0,document_page_size:5,num_documents:0,document_nav_list:["null"],mind_item_list:[],mind_item_previous:null,mind_item_filter:"",mind_item_page:0,mind_item_page_size:5,num_mind_items:0,prev_mind_item_filter:"",mind_item_nav_list:["null"],bot_query:"",bot_query_result_list:[],bot_query_page_size:10,bot_query_threshold:.01,synonym_list:[],synonym_prev_id:null,synonym_filter:"",synonym_page:0,synonym_page_size:5,num_synonyms:0,prev_synonym_filter:"",synonym_nav_list:["null"],semantic_list:[],semantic_prev_id:null,semantic_filter:"",semantic_page:0,semantic_page_size:5,num_semantics:0,prev_semantic_filter:"",semantic_nav_list:["null"],synset_filter:"",synset_list:[],synset_page:0,synset_page_size:10,synset_total_size:0,report_date:C.toIsoDate(new Date),report_num_items:20,access_frequency:{labels:[]},general_statistics:[],query_word_frequency:[],file_type_statistics:[],operators:[C.createOperator()],num_active_connections:0,operator_connected:!1,html5_notifications:"",log_size:100,log_list:[],selected_log:"web",active_components:{},domain_list:[],semantic_display_category_list:[],defined_semantic_list:[],error_title:"Error",error:""}}function w(){try{var e=localStorage.getItem("https://simsage.nz:state");return null===e||window.location.href.endsWith("/#/")?{appReducer:b()}:JSON.parse(e)}catch(t){return{appReducer:b()}}}function E(e){try{localStorage.removeItem("https://simsage.nz:state")}catch(t){}}var k=function(){function e(){Object(f.a)(this,e)}return Object(y.a)(e,null,[{key:"http_post",value:function(t,a,n,r){var i=window.ENV.api_base;console.log("POST "+i+t),v.a.post(i+t,a,e.getHeaders()).then((function(e){n&&n(e)})).catch((function(t){r&&(void 0===t.response?r("Servers not responding or cannot contact Servers"):r(e.get_error(t)))}))}},{key:"http_put",value:function(t,a,n,r){var i=window.ENV.api_base;console.log("PUT "+i+t),v.a.put(i+t,a,e.getHeaders()).then((function(e){n&&n(e)})).catch((function(t){r&&(void 0===t.response?r("Servers not responding or cannot contact Servers"):r(e.get_error(t)))}))}},{key:"http_get",value:function(t,a,n){var r=window.ENV.api_base;return"/stats/stats/os"!==t&&console.log("GET "+r+t),v.a.get(r+t,e.getHeaders()).then((function(e){a&&a(e)})).catch((function(t){n&&(void 0===t.response?n("Servers not responding or cannot contact Servers"):n(e.get_error(t)))}))}},{key:"get_backup_url",value:function(t,a){var n=e.getSession();return window.ENV.api_base+"/backup/backup/"+encodeURIComponent(n.id)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(a)}},{key:"get_mind_dump_url",value:function(t,a){var n=e.getSession();return window.ENV.api_base+"/backup/mind-dump/"+encodeURIComponent(n.id)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(a)}},{key:"get_inventorize_dump_url",value:function(t,a,n){var r=e.getSession();return window.ENV.api_base+"/document/parquet/"+encodeURIComponent(r.id)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(n)}},{key:"get_inventorize_dump_spreadhseet_url",value:function(t,a,n){var r=e.getSession();return window.ENV.api_base+"/document/spreadsheet/"+encodeURIComponent(r.id)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(n)}},{key:"get_crawler_url",value:function(t,a,n){var r=e.getSession();return window.ENV.api_base+"/crawler/download/"+encodeURIComponent(r.id)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(n)}},{key:"get_html_url",value:function(t,a){var n=e.getSession();return window.ENV.api_base+"/knowledgebase/download/"+t+"/"+encodeURIComponent(n.id)+"/"+encodeURIComponent(a)}},{key:"get_query_log_url",value:function(t,a,n,r){var i=e.getSession();return window.ENV.api_base+"/stats/query-logs/"+encodeURIComponent(i.id)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(n)+"/"+encodeURIComponent(r)}},{key:"get_export_archive_url",value:function(t,a,n){var r=e.getSession();return window.ENV.api_base+"/crawler/wp-archive/download/"+encodeURIComponent(r.id)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(n)}},{key:"http_delete",value:function(t,a,n){var r=window.ENV.api_base;console.log("DELETE "+r+t),v.a.delete(r+t,e.getHeaders()).then((function(e){a&&a(e)})).catch((function(t){n&&(void 0===t.response?n("Servers not responding or cannot contact Servers"):n(e.get_error(t)))}))}},{key:"toUrl",value:function(e){return window.ENV.api_base+e}},{key:"get_error",value:function(e){if("string"===typeof e&&0===e.indexOf("{")){var t=JSON.parse(e);return t&&t.response&&t.response.data&&t.response.data.error?t.response.data.error:e}return e&&e.response&&e.response.data&&e.response.data.error?e.response.data.error:e}},{key:"getISODate",value:function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}},{key:"getSession",value:function(){var e=w();return e&&e.appReducer&&e.appReducer.session?e.appReducer.session:null}},{key:"getHeaders",value:function(){var t=e.getSession();return t&&t.id?{headers:{"API-Version":window.ENV.api_version,"Content-Type":"application/json","Session-Id":t.id}}:{headers:{"API-Version":window.ENV.api_version,"Content-Type":"application/json"}}}}]),e}(),x=k,S=function(){function e(){Object(f.a)(this,e)}return Object(y.a)(e,null,[{key:"defined",value:function(e){return null!==e&&void 0!==e}},{key:"createGuid",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},{key:"createOperator",value:function(){return{id:e.createGuid(),conversation_list:[],operator_ready:!1,question_id:"",question:"",answer_id:"",answer:"",client_id:"",client_kb_id:"",client_kb_name:"",is_typing:!1,typing_time:0,current_question:"",prev_answer:""}}},{key:"unixTimeConvert",value:function(t){if(t>1e3){var a=new Date(t),n=a.getFullYear(),r=a.getMonth()+1,i=a.getDate(),s=a.getHours(),o=a.getMinutes(),l=a.getSeconds();return n+"/"+e.pad2(r)+"/"+e.pad2(i)+" "+e.pad2(s)+":"+e.pad2(o)+":"+e.pad2(l)}return""}},{key:"getSystemTime",value:function(){return(new Date).getTime()}},{key:"toIsoDate",value:function(t){var a=t.getFullYear(),n=t.getMonth()+1,r=t.getDate();return a+"-"+e.pad2(n)+"-"+e.pad2(r)+"T00:00:00.000"}},{key:"pad2",value:function(e){return(""+e).padStart(2,"0")}},{key:"setupTimer",value:function(){return!0}},{key:"merge_notifications",value:function(e,t){var a={},n=[];if(e){var r,i=Object(g.a)(e);try{for(i.s();!(r=i.n()).done;){var s=r.value;a[s.id]=!0,n.push(s)}}catch(d){i.e(d)}finally{i.f()}}if(t){var o,l=Object(g.a)(t);try{for(l.s();!(o=l.n()).done;){var c=o.value;a.hasOwnProperty(c.id)||(a[c.id]=!0,n.push(c))}}catch(d){l.e(d)}finally{l.f()}}return n}},{key:"passwordResetRequest",value:function(e,t,a){e&&e.length>0?k.http_post("/auth/reset-password-request",{email:e},(function(e){t(e.data.session,e.data.user)}),(function(e){a(e)})):a("you must provide your SimSage email address")}},{key:"resetPassword",value:function(e,t,a,n,r){if(e&&e.length>0&&t.length>0){var i={email:e,password:t,resetId:a};k.http_post("/auth/reset-password",i,(function(e){n(e.data.session,e.data.user)}),(function(e){r(e)}))}else r("please complete and check all fields")}},{key:"getUser",value:function(){var e=localStorage.getItem("user");return e&&e.startsWith("{")?JSON.parse(e):null}},{key:"uploadDocument",value:function(e,t,a){k.http_put("/document/upload",e,(function(e){t(e.data)}),(function(e){a(e)}))}},{key:"deleteCrawlerDocuments",value:function(e,t,a,n,r){k.http_delete("/crawler/crawler/document/"+encodeURIComponent(e)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(a),(function(e){n(e.data)}),(function(e){r(e)}))}},{key:"testCrawler",value:function(e,t,a,n,r){k.http_get("/crawler/crawler/test/"+encodeURIComponent(e)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(a),(function(e){e.data&&e.data.errorStr&&e.data.errorStr.length>0?r(e.data.errorStr):n(e.data)}),(function(e){r(e)}))}},{key:"semanticSearch",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,i=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;k.http_put("/semantic/search",{organisationId:e,kbId:t,botQuery:a,superSearch:a,numResults:n,scoreThreshold:r},(function(e){i(e.data)}),(function(e){s(e)}))}}]),e}(),C=S,O="busy",I="error";function R(e){e&&(e.conversation_list=[],e.client_id="",e.client_kb_id="",e.client_kb_name="",e.question_id="",e.question="",e.answer_id="",e.answer="",e.prev_answer="",e.current_question="",e.is_typing=!1,e.typing_time=0)}var j=function(e,t){switch(e=e||b(),window.ENV.debug&&console.debug("applicationReducer:"+t.type),t.type===I&&console.log("ERROR: ("+JSON.stringify(t)+")"),t.type){default:break;case I:return t.error.indexOf("invalid session id")>=0?(window.location="/#/",Object(d.a)(Object(d.a)({},e),{},{session:null,user:null,error_title:t.title,error:t.error,busy:!1,uploading:!1})):Object(d.a)(Object(d.a)({},e),{},{error_title:t.title,error:t.error,busy:!1,uploading:!1});case"reset selected kb":return Object(d.a)(Object(d.a)({},e),{},{selected_organisation_id:"",selected_organisation:null,selected_knowledgebase_id:"",selected_knowledgebase:null});case"close error":return Object(d.a)(Object(d.a)({},e),{},{error_title:"",error:"",busy:!1});case O:return Object(d.a)(Object(d.a)({},e),{},{busy:t.busy});case"sign in":var a=!1;if(t.user&&t.user.roles){var n,r=["admin","manager"],i=Object(g.a)(t.user.roles);try{for(i.s();!(n=i.n()).done;){var s=n.value;r.indexOf(s.role)>=0&&(a=!0)}}catch(Qe){i.e(Qe)}finally{i.f()}}var o="";if(t.user&&t.user.roles){var l,c=Object(g.a)(t.user.roles);try{for(c.s();!(l=c.n()).done;){var u=l.value;u&&u.organisationId&&""===o&&(o=u.organisationId)}}catch(Qe){c.e(Qe)}finally{c.f()}}return Object(d.a)(Object(d.a)({},e),{},{session:t.session,user:t.user,selected_tab:a?"organisations":"operator",selected_organisation_id:o,selected_organisation:"",busy:!1});case"get license":return Object(d.a)(Object(d.a)({},e),{},{license:t.license,busy:!1});case"get organisation list":return Object(d.a)(Object(d.a)({},e),{},{organisation_list:t.organisation_list,busy:!1});case"set organisation filter":return Object(d.a)(Object(d.a)({},e),{},{organisation_filter:t.filter});case"get knowledge bases":return Object(d.a)(Object(d.a)({},e),{},{knowledge_base_list:t.knowledge_base_list,busy:!1});case"get inventorize list":return Object(d.a)(Object(d.a)({},e),{},{inventorize_list:t.inventorize_list,busy:!1});case"get inventorize busy":return Object(d.a)(Object(d.a)({},e),{},{inventorize_busy:t.busy,busy:!1});case"select organisation":return Object(d.a)(Object(d.a)({},e),{},{selected_organisation_id:t.id,selected_organisation:t.name,selected_knowledgebase_id:"",selected_knowledgebase:"",busy:!1});case"update organisation":var p,m=[],h=t.organisation,f=!1,y=Object(g.a)(e.organisation_list);try{for(y.s();!(p=y.n()).done;){var _=p.value;_.id===h.id?(m.push(h),f=!0):m.push(_)}}catch(Qe){y.e(Qe)}finally{y.f()}return f||m.push(h),Object(d.a)(Object(d.a)({},e),{},{organisation_list:m,busy:!1});case"selected knowledge base":return Object(d.a)(Object(d.a)({},e),{},{selected_knowledgebase_id:t.id,selected_knowledgebase:t.name,busy:!1});case"sign out":return Object(d.a)(Object(d.a)({},e),{},{session:null,user:null,busy:!1});case"select tab":return Object(d.a)(Object(d.a)({},e),{},{selected_tab:t.selected_tab,busy:!1});case"hide notifications":return Object(d.a)(Object(d.a)({},e),{},{show_notifications:!1});case"show notifications":return Object(d.a)(Object(d.a)({},e),{},{show_notifications:!0});case"set notification list":return Object(d.a)(Object(d.a)({},e),{},{notification_list:t.notification_list});case"set user list":return Object(d.a)(Object(d.a)({},e),{},{user_list:t.user_list,busy:!1});case"set user filter":return Object(d.a)(Object(d.a)({},e),{},{user_filter:t.filter});case"update user":return Object(d.a)(Object(d.a)({},e),{},{user:t.user,busy:!1});case"get crawlers":return Object(d.a)(Object(d.a)({},e),{},{crawler_list:t.crawler_list,busy:!1});case"get domains":return Object(d.a)(Object(d.a)({},e),{},{domain_list:t.domain_list,busy:!1});case"uploading program":return Object(d.a)(Object(d.a)({},e),{},{uploading:!0});case"uploading program finished":return Object(d.a)(Object(d.a)({},e),{},{uploading:!1,busy:!1});case"uploading wp archive":return Object(d.a)(Object(d.a)({},e),{},{uploading:!0});case"uploading wp archive finished":return Object(d.a)(Object(d.a)({},e),{},{uploading:!1,busy:!1});case"get documents paginated":return Object(d.a)(Object(d.a)({},e),{},{document_list:t.document_list,num_documents:t.num_documents,prev_document_filter:t.document_filter,busy:!1});case"set document filter":return Object(d.a)(Object(d.a)({},e),{},{document_filter:t.filter});case"set document page":var v=e.document_nav_list;return t.page>=v.length&&v.push(t.prev_url),Object(d.a)(Object(d.a)({},e),{},{document_page:t.page,document_previous:t.prev_url,document_nav_list:v,busy:!1});case"set document page size":return Object(d.a)(Object(d.a)({},e),{},{document_page:0,document_previous:null,document_nav_list:["null"],document_page_size:t.page_size});case"reset document pagination":return Object(d.a)(Object(d.a)({},e),{},{document_page:0,document_previous:null,document_nav_list:["null"],busy:!1});case"mind find":return Object(d.a)(Object(d.a)({},e),{},{mind_item_list:t.mind_item_list,busy:!1});case"set mind items paginated":return Object(d.a)(Object(d.a)({},e),{},{mind_item_list:t.data.mindItemList,num_mind_items:t.data.numMindItems,prev_mind_item_filter:t.data.filter,busy:!1});case"set mind item filter":return Object(d.a)(Object(d.a)({},e),{},{mind_item_filter:t.filter});case"set mind item page":var w=e.mind_item_nav_list;return t.page>=w.length&&w.push(t.prev_id),Object(d.a)(Object(d.a)({},e),{},{mind_item_page:t.page,mind_item_previous:t.prev_id,mind_item_nav_list:w,busy:!1});case"set mind item page size":return Object(d.a)(Object(d.a)({},e),{},{mind_item_page:0,mind_item_previous:null,mind_item_nav_list:["null"],mind_item_page_size:t.page_size});case"reset mind item pagination":return Object(d.a)(Object(d.a)({},e),{},{mind_item_page:0,mind_item_previous:null,mind_item_nav_list:["null"],busy:!1});case"set bot query list":return Object(d.a)(Object(d.a)({},e),{},{bot_query_result_list:t.bot_query_result_list,busy:!1});case"set bot query string":return Object(d.a)(Object(d.a)({},e),{},{bot_query:t.bot_query});case"set synonyms paginated":return Object(d.a)(Object(d.a)({},e),{},{synonym_list:t.data.synonymList,num_synonyms:t.data.numSynonyms,prev_synonym_filter:t.data.filter,busy:!1});case"set synonym page":var E=e.synonym_nav_list;return t.page>=E.length&&E.push(t.prev_id),Object(d.a)(Object(d.a)({},e),{},{synonym_page:t.page,synonym_prev_id:t.prev_id,synonym_nav_list:E,busy:!1});case"set synonym page size":return Object(d.a)(Object(d.a)({},e),{},{synonym_page:0,synonym_prev_id:null,synonym_nav_list:["null"],synonym_page_size:t.page_size});case"reset synonym pagination":return Object(d.a)(Object(d.a)({},e),{},{synonym_page:0,synonym_prev_id:null,synonym_nav_list:["null"],busy:!1});case"set synonym filter":return Object(d.a)(Object(d.a)({},e),{},{synonym_filter:t.synonym_filter});case"set semantics paginated":return Object(d.a)(Object(d.a)({},e),{},{semantic_list:t.data.semanticList,num_semantics:t.data.numSemantics,prev_semantic_filter:t.data.filter,busy:!1});case"set semantic page":var k=e.semantic_nav_list;return t.page>=k.length&&k.push(t.prev_word),Object(d.a)(Object(d.a)({},e),{},{semantic_page:t.page,semantic_prev_word:t.prev_word,semantic_nav_list:k,busy:!1});case"set semantic page size":return Object(d.a)(Object(d.a)({},e),{},{semantic_page:0,semantic_prev_id:null,semantic_nav_list:["null"],semantic_page_size:t.page_size});case"reset semantic pagination":return Object(d.a)(Object(d.a)({},e),{},{semantic_page:0,semantic_prev_id:null,semantic_nav_list:["null"],busy:!1});case"set semantic display list":return Object(d.a)(Object(d.a)({},e),{},{semantic_display_category_list:t.semantic_display_category_list,defined_semantic_list:t.defined_semantic_list,busy:!1});case"set semantic filter":return Object(d.a)(Object(d.a)({},e),{},{semantic_filter:t.semantic_filter});case"set synset list":return Object(d.a)(Object(d.a)({},e),{},{synset_list:t.synset_list,synset_total_size:t.total_size,busy:!1});case"set synset filter":return Object(d.a)(Object(d.a)({},e),{},{synset_filter:t.synset_filter});case"set synset page":return Object(d.a)(Object(d.a)({},e),{},{synset_page:t.page,busy:!1});case"set synset page size":return Object(d.a)(Object(d.a)({},e),{},{synset_page:0,synset_page_size:t.page_size});case"reset synset pagination":return Object(d.a)(Object(d.a)({},e),{},{synset_page:0,busy:!1});case"set report date":return Object(d.a)(Object(d.a)({},e),{},{report_date:C.toIsoDate(t.report_date)});case"set report graphs":return Object(d.a)(Object(d.a)({},e),{},{access_frequency:t.access_frequency,general_statistics:t.general_statistics,query_word_frequency:t.query_word_frequency,file_type_statistics:t.file_type_statistics,busy:!1});case"set operator answer":var x,S=[],j=Object(g.a)(e.operators);try{for(j.s();!(x=j.n()).done;){var T=x.value;T.id===t.operatorId&&(T.answer_id=t.id,T.answer=t.answer),S.push(T)}}catch(Qe){j.e(Qe)}finally{j.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:S});case"set operator question":var D,L=[],P=Object(g.a)(e.operators);try{for(P.s();!(D=P.n()).done;){var B=D.value;B.id===t.operatorId&&(B.question_id=t.id,B.question=t.question),L.push(B)}}catch(Qe){P.e(Qe)}finally{P.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:L});case"operator ready":if(t.ready){var N,U=[],z=Object(g.a)(e.operators);try{for(z.s();!(N=z.n()).done;){var W=N.value;W.id===t.operatorId&&(W.operator_ready=!0),U.push(W)}}catch(Qe){z.e(Qe)}finally{z.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:U})}var A,F=[],q=Object(g.a)(e.operators);try{for(q.s();!(A=q.n()).done;){var Y=A.value;if(Y.id===t.operatorId){var M=C.createOperator();M.id=t.operatorId,F.push(M)}else F.push(Y)}}catch(Qe){q.e(Qe)}finally{q.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:F});case"operator clear user":var H,J=[],K=Object(g.a)(e.operators);try{for(K.s();!(H=K.n()).done;){var V=H.value;if(V.id===t.operatorId){var Q=C.createOperator();Q.id=t.operatorId,Q.operator_ready=V.operator_ready,J.push(Q)}else J.push(V)}}catch(Qe){K.e(Qe)}finally{K.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:J});case"add operator":var G=JSON.parse(JSON.stringify(e.operators));return G.push(C.createOperator()),Object(d.a)(Object(d.a)({},e),{},{operators:G});case"remove operator":var Z,X=[],$=Object(g.a)(e.operators);try{for($.s();!(Z=$.n()).done;){var ee=Z.value;ee.id!==t.id&&X.push(ee)}}catch(Qe){$.e(Qe)}finally{$.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:X});case"stop client typing":var te,ae=t.operator_id,ne=[],re=Object(g.a)(e.operators);try{for(re.s();!(te=re.n()).done;){var ie=te.value;ie.id===ae&&(ie.is_typing=!1,ie.typing_time=0),ne.push(ie)}}catch(Qe){re.e(Qe)}finally{re.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:ne});case"process operator message":var se=t.message;if("active connections"!==se.messageType&&console.debug("operator received data:"+JSON.stringify(se)),"error"===se.messageType&&se.error.length>0)return Object(d.a)(Object(d.a)({},e),{},{error_title:"error",error:se.error,busy:!1,uploading:!1});if("disconnect"===se.messageType){var oe,le=[],ce=Object(g.a)(e.operators);try{for(ce.s();!(oe=ce.n()).done;){var de=oe.value;de.id===se.operatorId&&R(de),le.push(de)}}catch(Qe){ce.e(Qe)}finally{ce.f()}return se.disconnectedByClient?Object(d.a)(Object(d.a)({},e),{},{operators:le,error_title:"Disconnected",error:"the client has terminated this conversation."}):Object(d.a)(Object(d.a)({},e),{},{operators:le})}if("teaching success"===se.messageType)return Object(d.a)({},e);if("active connections"===se.messageType)return Object(d.a)(Object(d.a)({},e),{},{num_active_connections:se.connectionCount});if("typing"===se.messageType){var ue,pe=[],me=Object(g.a)(e.operators);try{for(me.s();!(ue=me.n()).done;){var he=ue.value;he.id===se.toId&&(he.is_typing=se.fromIsTyping,he.typing_time=C.getSystemTime()+2e3),pe.push(he)}}catch(Qe){me.e(Qe)}finally{me.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:pe})}if("message"===se.messageType){if(!se.kbId||0===se.kbId.length)return Object(d.a)(Object(d.a)({},e),{},{error_title:"error",error:"message does not include a valid knowledge-base id.",busy:!1,uploading:!1});if(!se.assignedOperatorId||0===se.assignedOperatorId.length)return Object(d.a)(Object(d.a)({},e),{},{error_title:"error",error:"message does not include a valid assigned-operator-id.",busy:!1,uploading:!1});var ge,fe=null,ye=Object(g.a)(e.operators);try{for(ye.s();!(ge=ye.n()).done;){var _e=ge.value;if(_e.id===se.assignedOperatorId){fe=_e;break}}}catch(Qe){ye.e(Qe)}finally{ye.f()}if(null!=fe){var ve=[];if(0===fe.conversation_list.length&&se.conversationList&&se.conversationList.length>0){var be=(ve=[]).length+1;for(var we in se.conversationList)if(se.conversationList.hasOwnProperty(we)){var Ee=se.conversationList[we],ke="user"!==Ee.origin;ve.push({id:be,primary:Ee.conversationText,secondary:ke?"You":"user",used:!1,is_simsage:ke}),be+=1}}else se.text&&se.text.length>0?(ve=JSON.parse(JSON.stringify(fe.conversation_list))).push({id:ve.length+1,primary:se.text,secondary:"user",used:!1,is_simsage:!1}):ve=fe.conversation_list;if(se.text&&se.text.length>0&&window.Notification&&"granted"===window.Notification.permission){var xe={body:'A new question just came in.  Click here to open the operator window.  "'+se.text+'"'};new Notification("the Operator needs your Attention",xe).onclick=function(){window.focus()}}se.previousAnswer&&se.previousAnswer.length>0&&(fe.prev_answer=se.previousAnswer),se.clientId.length>5&&(fe.client_id=se.clientId,fe.client_kb_id=se.kbId),se.kbName&&se.kbName.length>0&&(fe.client_kb_name=se.kbName),fe.conversation_list=ve,fe.is_typing=!1,fe.typing_time=0;var Se,Ce=[],Oe=Object(g.a)(e.operators);try{for(Oe.s();!(Se=Oe.n()).done;){var Ie=Se.value;Ie.id!==se.organisationId?Ce.push(Ie):Ce.push(fe)}}catch(Qe){Oe.e(Qe)}finally{Oe.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:Ce})}console.log("organisation id not found:"+se.organisationId)}return Object(d.a)({},e);case"set operator connected":var Re,je=[],Te=Object(g.a)(e.operators);try{for(Te.s();!(Re=Te.n()).done;){var De=Re.value;De.operator_ready=!1,R(De),je.push(De)}}catch(Qe){Te.e(Qe)}finally{Te.f()}return Object(d.a)(Object(d.a)({},e),{},{operator_connected:t.connected,num_active_connections:0,operators:je});case"clear previous answer":var Le,Pe=[],Be=Object(g.a)(e.operators);try{for(Be.s();!(Le=Be.n()).done;){var Ne=Le.value;Ne.id===t.operatorId&&(Ne.current_question="",Ne.prev_answer=""),Pe.push(Ne)}}catch(Qe){Be.e(Qe)}finally{Be.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:Pe});case"add conversation":var Ue,ze=[],We=Object(g.a)(e.operators);try{for(We.s();!(Ue=We.n()).done;){var Ae=Ue.value;Ae.id===t.operatorId&&Ae.conversation_list.push(t.item),ze.push(Ae)}}catch(Qe){We.e(Qe)}finally{We.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:ze});case"mark conversation used":var Fe,qe=[],Ye=Object(g.a)(e.operators);try{for(Ye.s();!(Fe=Ye.n()).done;){var Me=Fe.value;if(Me.id===t.operatorId){var He,Je=Me.conversation_list,Ke=Object(g.a)(Je);try{for(Ke.s();!(He=Ke.n()).done;){var Ve=He.value;Ve.id===t.id&&(Ve.used=!0)}}catch(Qe){Ke.e(Qe)}finally{Ke.f()}Me.conversation_list=Je}qe.push(Me)}}catch(Qe){Ye.e(Qe)}finally{Ye.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:qe});case"get html5 notifications":return Object(d.a)(Object(d.a)({},e),{},{html5_notifications:t.status});case"set log list":return Object(d.a)(Object(d.a)({},e),{},{log_list:t.log_list,selected_log:t.selected_log,active_components:t.active_components,busy:!1})}return e},T=Object(m.createLogger)({predicate:function(e,t){return window.ENV.debug}});var D=a(12),L=a(11),P=a(549),B=a(548),N=a(568),U=a(254),z=a(142),W=a.n(z),A=a(143),F=a.n(A),q=Object(U.a)({typography:{useNextVariants:!0},palette:{primary:{light:W.a[200],main:W.a[600],dark:W.a[750]},secondary:{light:F.a[300],main:F.a[500],dark:F.a[700]}}}),Y=a(541),M={background:{margin:"5px",backgroundColor:"#fefefe",padding:"15px",height:"55px",fontFamily:"Tahoma",fontWeight:"500",color:"#888",borderRadius:"4px"},logo:{float:"left",width:"140px"},projectTitle:{fontSize:"1.1em",float:"left",marginLeft:"50px",marginTop:"25px",color:"#888"},homeImageContainer:{},homeImage:{width:"32px"},signOutImageContainer:{paddingTop:"5px"},signOutImage:{width:"22px"},bookButton:{float:"right",marginRight:"20px"},bookImage:{width:"32px"},versionText:{fontSize:"0.8em"}},H=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={title:e.title,signed_in:e.signed_in,showDocumentation:window.location.toString().indexOf("/#/documentation")<0},n}return Object(y.a)(a,[{key:"goWeb",value:function(){window.location=window.ENV.web_base}},{key:"signOut",value:function(){E(),window.location="/"}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:M.background},r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:1},r.a.createElement("img",{alt:"SimSage",title:"SimSage AI: Intelligent Search for Business",style:M.logo,src:"../images/simsage-logo.svg",onClick:function(){return e.goWeb()}})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:4},r.a.createElement("span",{style:M.projectTitle},this.state.title)),r.a.createElement(Y.a,{item:!0,xs:5}),r.a.createElement(Y.a,{item:!0,xs:1},!this.state.signed_in&&r.a.createElement("div",{style:M.homeImageContainer},r.a.createElement("img",{src:"../images/home.svg",alt:"home",title:"home",onClick:function(){return e.goWeb()},style:M.homeImage}),r.a.createElement("div",{style:M.versionText},"version ",window.ENV.version)),this.state.signed_in&&r.a.createElement("div",{style:M.signOutImageContainer},r.a.createElement("img",{src:"../images/sign-out.svg",alt:"sign-out",title:"sign-out",onClick:function(){e.signOut()},style:M.signOutImage})))))}}]),a}(n.Component),J=a(569),K=a(547),V=a(546),Q=a(545),G=a(570),Z=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={open:!1,title:e.title,message:e.message,callback:e.callback,has_error:!1},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleOk",value:function(){this.setState({open:!1}),this.state.callback&&this.state.callback()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&e.message&&this.setState({open:e.message.length>0,message:e.message,title:e.title})}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"error-dialog.js: Something went wrong."):r.a.createElement(J.a,{className:"error-dialog",ref:"dialog","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.open,fullWidth:!0,maxWidth:"md",onClose:this.handleOk.bind(this)},r.a.createElement(Q.a,{id:"alert-dialog-title"},r.a.createElement(G.a,{error:!0},this.state.title)),r.a.createElement(V.a,null,r.a.createElement("div",null,this.state.message)),r.a.createElement(K.a,null,r.a.createElement(B.a,{variant:"outlined",type:"submit",color:"primary",onClick:function(){return e.handleOk()}},"Ok")))}}]),a}(r.a.Component),X=a(3),$=a.n(X),ee=a(15),te=function(){function e(){Object(f.a)(this,e)}return Object(y.a)(e,null,[{key:"setupDoughnut",value:function(e,t){return{labels:e,datasets:[{data:t,backgroundColor:["#36A2EB","#FF6384","#56CE56"],hoverBackgroundColor:["#36A2EB","#FF6384","#56CE56"]}]}}},{key:"setupMap",value:function(e,t){if(e){var a=[],n=[100,1e4,1e5,-1],r=new Set;for(var i in n){var s=n[i],o=[],l=[];for(var c in e)if(e.hasOwnProperty(c)){var d=e[c];(-1===d||d<s)&&!r.has(c)&&(r.add(c),o.push(c),l.push(d.toFixed(2)))}o.length>0&&a.push({id:i,labels:o,title:t,datasets:[{label:t,fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderColor:"rgba(75,192,192,1)",pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderWidth:1,pointHoverRadius:5,pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:l}]})}return a}return[]}},{key:"setupList",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e&&e.length){for(var n=[],r=[],i={},s=0,o=0;o<=30;o++)i[o+1]=e[o],e[o]>0&&(s+=1);if(0===s)return{labels:[]};for(var l=1;l<=31;l++)n.push(""+l),i.hasOwnProperty(l)&&i[l]>0?r.push(i[l]/a):r.push(0);return{labels:n,datasets:[{label:t,fill:!1,lineTension:.4,backgroundColor:"rgba(192, 75,120,0.4)",borderColor:"rgba(192, 75,120,1)",pointBackgroundColor:"#fff",pointBorderColor:"rgba(192, 75, 120,1)",pointHoverBackgroundColor:"rgba(192, 75,120,1)",pointHoverBorderColor:"rgba(220,220,220,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderWidth:1,pointHoverRadius:5,pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:r}]}}return{labels:[]}}},{key:"setupCpuList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e&&e.length){var n=[],r=[],i=[],s=0;e.length>t&&(s=e.length-t);for(var o=s;o<s+t;o++)n.push(""),o<e.length?(r.push(e[o].idle/a),i.push((e[o].user+e[o].system)/a)):(r.push(0),i.push(0));return{labels:n,datasets:[{label:"busy",fill:!0,lineTension:.1,backgroundColor:"rgba(192, 75,120,0.7)",borderColor:"rgba(192, 75,120,1)",pointBackgroundColor:"#fff",pointBorderColor:"rgba(192, 75, 120,1)",pointHoverBackgroundColor:"rgba(192, 75,120,1)",pointHoverBorderColor:"rgba(220,220,220,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderWidth:1,pointHoverRadius:5,pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:i},{label:"idle",fill:!0,lineTension:.1,backgroundColor:"rgba(75,192,120,0.4)",borderColor:"rgba(75,192,120,1)",pointBackgroundColor:"#fff",pointBorderColor:"rgba(75, 192,120,1)",pointHoverBackgroundColor:"rgba(75,192,120,1)",pointHoverBorderColor:"rgba(220,220,220,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderWidth:1,pointHoverRadius:5,pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:0,data:r}]}}return{labels:[]}}},{key:"getGraphOptions",value:function(e){return{responsive:!0,legend:{position:"bottom"},hover:{mode:"label"},scales:{xAxes:[{display:!0,scaleLabel:{display:!1,labelString:""}}],yAxes:[{display:!0,ticks:{beginAtZero:!0,steps:10,stepValue:5}}]},title:{display:!0,text:e}}}},{key:"getDoughnutOptions",value:function(e){return{responsive:!0,legend:{position:"bottom"},hover:{mode:"label"},title:{display:!0,text:e}}}},{key:"processList",value:function(e,t,a){if(t&&t.labels&&t.datasets&&1===t.datasets.length&&t.datasets[0].data){e.push(["",""]),e.push([a,""]);for(var n=0;n<t.labels.length;n++)e.push([""+t.labels[n],""+t.datasets[0].data[n]])}}},{key:"processSet",value:function(t,a,n){var r,i=Object(g.a)(a);try{for(i.s();!(r=i.n()).done;){var s=r.value;e.processList(t,s,n)}}catch(o){i.e(o)}finally{i.f()}}}]),e}(),ae=te,ne=!1;function re(e,t,a,n,r){return ie.apply(this,arguments)}function ie(){return(ie=Object(ee.a)($.a.mark((function e(t,a,n,r,i){var s;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i({type:O,busy:!0}),s=n,n&&""!==n.trim()||(s="null"),e.next=5,k.http_get("/auth/user/organisations/"+encodeURIComponent(s),(function(e){var t=e.data;i({type:"get organisation list",organisation_list:t}),r&&t&&t.length>0&&0===a.length&&(i({type:"select organisation",name:t[0].name,id:t[0].id}),se(t[0].id,i))}),(function(e){i({type:I,title:"Error",error:e})}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e,t){return oe.apply(this,arguments)}function oe(){return(oe=Object(ee.a)($.a.mark((function e(t,a){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:O,busy:!0}),e.next=3,k.http_get("/knowledgebase/"+encodeURIComponent(t),(function(e){a({type:"get knowledge bases",knowledge_base_list:e.data})}),(function(e){a({type:I,title:"Error",error:e})}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e,t,a){return ce.apply(this,arguments)}function ce(){return(ce=Object(ee.a)($.a.mark((function e(t,a,n){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&a.length>0)){e.next=4;break}return n({type:O,busy:!0}),e.next=4,k.http_get("/document/parquets/"+encodeURIComponent(t)+"/"+encodeURIComponent(a)+"/0/5",(function(e){n({type:"get inventorize list",inventorize_list:e.data})}),(function(e){n({type:I,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e,t,a){return ue.apply(this,arguments)}function ue(){return(ue=Object(ee.a)($.a.mark((function e(t,a,n){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:O,busy:!0}),a&&""!==a.trim()||(a="null"),e.next=4,k.http_get("/auth/users/"+encodeURIComponent(t)+"/"+encodeURIComponent(a),(function(e){n({type:"set user list",user_list:e.data})}),(function(e){n({type:I,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e,t,a){return me.apply(this,arguments)}function me(){return(me=Object(ee.a)($.a.mark((function e(t,a,n){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&a.length>0)){e.next=4;break}return n({type:O,busy:!0}),e.next=4,k.http_get("/crawler/crawlers/"+encodeURIComponent(t)+"/"+encodeURIComponent(a),(function(e){n({type:"get crawlers",crawler_list:e.data})}),(function(e){n({type:I,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e,t,a,n,r,i){return ge.apply(this,arguments)}function ge(){return(ge=Object(ee.a)($.a.mark((function e(t,a,n,r,i,s){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&a.length>0)){e.next=4;break}return s({type:O,busy:!0}),e.next=4,k.http_put("/knowledgebase/domains",{organisationId:t,kbId:a,page:n,pageSize:r,filter:i},(function(e){s({type:"get domains",domain_list:e.data})}),(function(e){s({type:I,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e,t,a,n,r,i){return ye.apply(this,arguments)}function ye(){return(ye=Object(ee.a)($.a.mark((function e(t,a,n,r,i,s){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&a.length>0)){e.next=4;break}return s({type:O,busy:!0}),e.next=4,k.http_post("/document/documents",{organisationId:t,kbId:a,prevUrl:n||"null",pageSize:r,filter:i},(function(e){var t=e.data.documentList,a=e.data.numDocuments;s({type:"get documents paginated",document_list:t,num_documents:a,document_filter:i})}),(function(e){s({type:I,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(e,t,a,n,r,i){return ve.apply(this,arguments)}function ve(){return(ve=Object(ee.a)($.a.mark((function e(t,a,n,r,i,s){var o;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&a.length>0)){e.next=5;break}return s({type:O,busy:!0}),o={organisationId:t,kbId:a,prevId:n||"null",filter:r,pageSize:i},e.next=5,k.http_put("/bot/mind-items",o,(function(e){s({type:"set mind items paginated",data:e.data})}),(function(e){s({type:I,title:"Error",error:e})}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e,t,a,n,r,i){return we.apply(this,arguments)}function we(){return(we=Object(ee.a)($.a.mark((function e(t,a,n,r,i,s){var o;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&a.length>0)){e.next=5;break}return s({type:O,busy:!0}),o={organisationId:t,kbId:a,prevId:n||"",filter:r,pageSize:i},e.next=5,k.http_put("/language/synonyms",o,(function(e){s({type:"set synonyms paginated",data:e.data})}),(function(e){s({type:I,title:"Error",error:e})}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e,t,a,n,r,i){return ke.apply(this,arguments)}function ke(){return(ke=Object(ee.a)($.a.mark((function e(t,a,n,r,i,s){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&a.length>0)){e.next=4;break}return s({type:O,busy:!0}),e.next=4,k.http_put("/language/semantics",{organisationId:t,kbId:a,prevWord:n||"",filter:r,pageSize:i},(function(e){s({type:"set semantics paginated",data:e.data})}),(function(e){s({type:I,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(e,t,a){return Se.apply(this,arguments)}function Se(){return(Se=Object(ee.a)($.a.mark((function e(t,a,n){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&a.length>0)){e.next=6;break}return n({type:O,busy:!0}),e.next=4,k.http_get("/language/semantic-display-categories/"+encodeURIComponent(t)+"/"+encodeURIComponent(a),(function(e){n({type:"set semantic display list",semantic_display_category_list:e.data.semanticDisplayCategoryList,defined_semantic_list:e.data.semanticList})}),(function(e){n({type:I,title:"Error",error:e})}));case 4:e.next=7;break;case 6:n({type:"set semantic display list",semantic_display_category_list:[],defined_semantic_list:[]});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e,t,a,n,r,i){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(ee.a)($.a.mark((function e(t,a,n,r,i,s){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&a.length>0)){e.next=4;break}return s({type:O,busy:!0}),e.next=4,k.http_put("/language/find-syn-sets",{organisationId:t,kbId:a,page:n,pageSize:r,filter:i},(function(e){s({type:"set synset list",synset_list:e.data.list,total_size:e.data.totalSize})}),(function(e){s({type:I,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e,t,a,n,r,i){return Re.apply(this,arguments)}function Re(){return(Re=Object(ee.a)($.a.mark((function e(t,a,n,r,i,s){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&a.length>0)){e.next=6;break}return s({type:O,busy:!0}),e.next=4,k.http_get("/stats/stats/"+encodeURIComponent(t)+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(n)+"/"+encodeURIComponent(r)+"/"+encodeURIComponent(i),(function(e){var t=e.data,a=ae.setupList(t.accessFrequency,"access"),n=ae.setupMap(t.generalStatistics,"system"),r=ae.setupMap(t.queryWordFrequency,"queries (top "+i+")"),o=ae.setupMap(t.fileTypeStatistics,"file types");s({type:"set report graphs",access_frequency:a,general_statistics:n,query_word_frequency:r,file_type_statistics:o})}),(function(e){s({type:I,title:"Error",error:e})}));case 4:e.next=7;break;case 6:s({type:"set report graphs",access_frequency:ae.setupList([]),general_statistics:ae.setupMap([]),query_word_frequency:ae.setupMap([]),file_type_statistics:ae.setupMap([])});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e,t,a,n,r){return Te.apply(this,arguments)}function Te(){return(Te=Object(ee.a)($.a.mark((function e(t,a,n,r,i){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===a){e.next=4;break}return i({type:O,busy:!0}),e.next=4,k.http_get("/stats/get-logs/"+encodeURIComponent(t.id)+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(n)+"/"+encodeURIComponent(r),(function(e){var t=e.data;i({type:"set log list",log_list:t.logs,selected_log:n,active_components:{auth:t.auth,conversion:t.conversion,crawler:t.crawler,document:t.document,knowledgebase:t.knowledgebase,language:t.language,mind:t.mind,operator:t.operator,search:t.search,stats:t.stats,web:t.web}})}),(function(e){i({type:I,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(e){return Le.apply(this,arguments)}function Le(){return(Le=Object(ee.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.Notification&&"granted"!==window.Notification.permission&&window.Notification.requestPermission&&window.Notification.requestPermission((function(e){Notification.permission!==e&&(Notification.permission=e),t({type:"get html5 notifications",status:e})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e,t,a){return Be.apply(this,arguments)}function Be(){return(Be=Object(ee.a)($.a.mark((function e(t,a,n){var r,i,s,o,l,c,d,u,p,m,h,g,f,y,_,v,b,w,E,k,x,S,C,I,R;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_organisation,s=n().appReducer.selected_knowledgebase_id,"operator"===t||r&&0!==r.length&&i&&0!==i.length||a({type:"reset selected kb"}),"users"!==t||""===r){e.next=10;break}return o=n().appReducer.user_filter,e.next=8,de(r,o,a);case 8:e.next=118;break;case 10:if("organisations"!==t){e.next=18;break}return l=n().appReducer.selected_organisation,c=n().appReducer.selected_organisation_id,d=n().appReducer.organisation_filter,e.next=16,re(l,c,d,!0,a);case 16:e.next=118;break;case 18:if("document sources"!==t||""===r||""===s){e.next=25;break}return e.next=21,de(r,"",a);case 21:return e.next=23,pe(r,s,a);case 23:e.next=118;break;case 25:if("documents"!==t||""===r||""===s){e.next=35;break}return a({type:"reset document pagination"}),a({type:O,busy:!0}),u=n().appReducer.document_filter,"null",p=n().appReducer.document_page_size,e.next=33,fe(r,s,"null",p,u,a);case 33:e.next=118;break;case 35:if("syn-sets"!==t||""===r||""===s){e.next=44;break}return m=n().appReducer.synset_page,h=n().appReducer.synset_page_size,g=n().appReducer.synset_filter,e.next=41,Ce(r,s,m,h,g,a);case 41:a({type:"reset synset pagination"}),e.next=118;break;case 44:if("inventory"!==t||""===r||""===s){e.next=49;break}return e.next=47,le(r,s,a);case 47:e.next=118;break;case 49:if("reports"!==t||""===r||""===s){e.next=58;break}return f=n().appReducer.report_num_items,y=new Date(n().appReducer.report_date),_=y.getFullYear(),v=y.getMonth()+1,e.next=56,Ie(r,s,_,v,f,a);case 56:e.next=118;break;case 58:if("logs"!==t||""===r){e.next=66;break}return b=n().appReducer.session,w=n().appReducer.selected_log,E=n().appReducer.log_size,e.next=64,je(b,r,w,E,a);case 64:e.next=118;break;case 66:if("mind"!==t){e.next=79;break}if(a({type:"reset mind item pagination"}),a({type:O,busy:!0}),k=n().appReducer.mind_item_filter,x=n().appReducer.mind_item_page_size,!r||!s){e.next=76;break}return e.next=74,_e(r,s,null,k,x,a);case 74:e.next=77;break;case 76:a({type:"set mind items paginated",data:{mindItemList:[],numMindItems:0,filter:""}});case 77:e.next=118;break;case 79:if("synonyms"!==t){e.next=92;break}if(a({type:"reset synonym pagination"}),a({type:O,busy:!0}),S=n().appReducer.synonym_filter,C=n().appReducer.synonym_page_size,!r||!s){e.next=89;break}return e.next=87,be(r,s,"",S,C,a);case 87:e.next=90;break;case 89:a({type:"set synonyms paginated",data:{synonymList:[],numSynonyms:0,filter:""}});case 90:e.next=118;break;case 92:if("semantics"!==t){e.next=105;break}if(a({type:"reset semantic pagination"}),a({type:O,busy:!0}),I=n().appReducer.semantic_filter,R=n().appReducer.semantic_page_size,!r||!s){e.next=102;break}return e.next=100,Ee(r,s,"",I,R,a);case 100:e.next=103;break;case 102:a({type:"set semantics paginated",data:{semanticList:[],numSemantics:0,filter:""}});case 103:e.next=118;break;case 105:if("active directory"!==t){e.next=115;break}if(a({type:O,busy:!0}),!r||!s){e.next=112;break}return e.next=110,he(r,s,0,10,"",a);case 110:e.next=113;break;case 112:a({type:"get domains",domain_list:[]});case 113:e.next=118;break;case 115:if("semantic categories"!==t){e.next=118;break}return e.next=118,xe(r,s,a);case 118:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ne={signIn:function(e,t){return function(){var a=Object(ee.a)($.a.mark((function a(n,r){return $.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(e&&e.length>0&&t&&t.length>0)){a.next=6;break}return n({type:O,busy:!0}),a.next=4,k.http_post("/auth/sign-in",{email:e,password:t},(function(e){n({type:"sign in",session:e.data.session,user:e.data.user}),window.location="/#/home"}),(function(e){n({type:I,title:"Error",error:e})}));case 4:a.next=7;break;case 6:n({type:I,title:"Error",error:"please complete and check all fields"});case 7:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},signOut:function(){return{type:"sign out"}},notBusy:function(){return function(){var e=Object(ee.a)($.a.mark((function e(t,a){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:O,busy:!1});case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},passwordResetRequest:function(e){return{type:"password reset request"}},resetPassword:function(e,t,a){return{type:"reset password",email:e,newPassword:t,reset_id:a}},getStats:function(e,t,a){return{type:"get stats",year:e,month:t,top:a}},getOSMessages:function(){return{type:"get os messages"}},restoreSystem:function(e){return{type:"restore system",data:e}},getLicense:function(){return function(){var e=Object(ee.a)($.a.mark((function e(t,a){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:O,busy:!0}),e.next=3,k.http_get("/auth/license",(function(e){t({type:"get license",license:e.data})}),(function(e){t({type:I,title:"Error",error:e})}));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},installLicense:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:O,busy:!0}),t.next=3,k.http_post("/auth/license",{license:e},(function(e){a({type:"get license",license:e.data})}),(function(e){a({type:I,title:"Error",error:e})}));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setError:function(e,t){return{type:I,title:e,error:t}},closeError:function(){return{type:"close error"}},selectTab:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"select tab",selected_tab:e}),t.next=3,Pe(e,a,n);case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},hideNotifications:function(){return{type:"hide notifications"}},showNotifications:function(){return{type:"show notifications"}},getNotifications:function(){return function(){var e=Object(ee.a)($.a.mark((function e(t,a){var n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne){e.next=5;break}return ne=!0,n=a().appReducer.notification_list,e.next=5,k.http_get("/stats/stats/os",(function(e){var a=C.merge_notifications(n,e.data.notificationList);a.length!==n.length&&t({type:"set notification list",notification_list:a}),ne=!1}),(function(e){console.log("error getting os-messages:"+e),ne=!1}));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},getOrganisationList:function(){return function(){var e=Object(ee.a)($.a.mark((function e(t,a){var n,r,i;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:O,busy:!0}),n=a().appReducer.selected_organisation,r=a().appReducer.selected_organisation_id,i=a().appReducer.organisation_filter,e.next=6,re(n,r,i,!0,t);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},selectOrganisation:function(e,t){return function(){var a=Object(ee.a)($.a.mark((function a(n,r){var i;return $.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t&&t.length>0)){a.next=8;break}return n({type:O,busy:!0}),n({type:"select organisation",name:e,id:t}),a.next=5,se(t,n);case 5:return i=r().appReducer.selected_tab,a.next=8,Pe(i,n,r);case 8:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},setOrganisationFilter:function(e){return{type:"set organisation filter",filter:e}},updateOrganisation:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:O,busy:!0}),t.next=3,k.http_put("/auth/organisation",e,(function(e){a({type:"update organisation",organisation:e.data})}),(function(e){a({type:I,title:"Error",error:e})}));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},deleteOrganisation:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i,s;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:O,busy:!0}),r=n().appReducer.selected_organisation,i=n().appReducer.selected_organisation_id,s=n().appReducer.organisation_filter,t.next=6,k.http_delete("/auth/organisation/"+encodeURIComponent(e),(function(t){re(r,i,s,!1,a),i===e&&(a({type:"select organisation",name:"",id:""}),a({type:"get knowledge bases",knowledge_base_list:[]}))}),(function(e){a({type:I,title:"Error",error:e})}));case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},selectKnowledgeBase:function(e,t){return function(){var a=Object(ee.a)($.a.mark((function a(n,r){var i;return $.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t&&t.length>0)){a.next=6;break}return n({type:O,busy:!0}),i=r().appReducer.selected_tab,n({type:"selected knowledge base",name:e,id:t}),a.next=6,Pe(i,n,r);case 6:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},getKnowledgeBases:function(){return function(){var e=Object(ee.a)($.a.mark((function e(t,a){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(a().appReducer.selected_organisation_id,t);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},optimizeIndexes:function(e,t){return function(){var a=Object(ee.a)($.a.mark((function a(n,r){var i;return $.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:O,busy:!0}),i={organisationId:e,kbId:t},a.next=4,k.http_put("/language/optimize-indexes",i,(function(e){n({type:O,busy:!1})}),(function(e){n({type:I,title:"Error",error:e})}));case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},deleteKnowledgeBase:function(e,t){return function(){var a=Object(ee.a)($.a.mark((function a(n,r){return $.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:O,busy:!0}),a.next=3,k.http_delete("/knowledgebase/"+encodeURIComponent(e)+"/"+encodeURIComponent(t),(function(t){se(e,n),n({type:"selected knowledge base",name:"",id:""})}),(function(e){n({type:I,title:"Error",error:e})}));case 3:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},updateKnowledgeBase:function(e,t,a,n,r,i,s,o,l,c,d,u){return function(){var p=Object(ee.a)($.a.mark((function p(m,h){var g;return $.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return m({type:O,busy:!0}),g={kbId:t,organisationId:e,name:a,email:n,securityId:r,maxQueriesPerDay:s,enabled:i,analyticsWindowInMonths:o,operatorEnabled:l,capacityWarnings:c,created:d,indexOptimizationSchedule:u},console.log(g),p.next=5,k.http_put("/knowledgebase/",g,(function(t){se(e,m)}),(function(e){m({type:I,title:"Error",error:e})}));case 5:case"end":return p.stop()}}),p)})));return function(e,t){return p.apply(this,arguments)}}()},createInventory:function(){return function(){var e=Object(ee.a)($.a.mark((function e(t,a){var n,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:O,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,e.next=5,k.http_post("/document/inventorize",{kbId:r,organisationId:n},(function(e){le(n,r,t)}),(function(e){t({type:I,title:"Error",error:e})}));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},getInventoryList:function(){return function(){var e=Object(ee.a)($.a.mark((function e(t,a){var n,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,e.next=4,le(n,r,t);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},deleteInventoryItem:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i,s;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,!(r.length>0&&i.length>0)){t.next=7;break}return a({type:O,busy:!0}),s="/document/parquet/"+encodeURIComponent(r)+"/"+encodeURIComponent(i)+"/"+encodeURIComponent(e),t.next=7,k.http_delete(s,(function(e){le(r,i,a)}),(function(e){a({type:I,title:"Error",error:e})}));case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},getInventoryBusy:function(){return function(){var e=Object(ee.a)($.a.mark((function e(t,a){var n,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,!(n.length>0&&r.length>0)){e.next=6;break}return t({type:O,busy:!0}),e.next=6,k.http_get("/document/inventorize/"+encodeURIComponent(n),(function(e){t({type:"get inventorize busy",busy:e.data})}),(function(e){t({type:I,title:"Error",error:e})}));case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},forceInventoryBusy:function(){return function(e,t){e({type:"get inventorize busy",busy:!0})}},getUsers:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().appReducer.user_filter,t.next=3,de(e,r,a);case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},updateUser:function(e,t,a,n,r,i,s,o){return function(){var l=Object(ee.a)($.a.mark((function l(c,d){var u,p,m,h,f,y,_,v,b,w;return $.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:c({type:O,busy:!0}),u=d().appReducer.user_filter,p=d().appReducer.user,m=[],h=Object(g.a)(s);try{for(h.s();!(f=h.n()).done;)y=f.value,m.push({userId:t,organisationId:e,role:y})}catch(E){h.e(E)}finally{h.f()}_=[],v=Object(g.a)(o);try{for(v.s();!(b=v.n()).done;)w=b.value,_.push({userId:t,organisationId:e,kbId:w.kbId})}catch(E){v.e(E)}finally{v.f()}return l.next=11,k.http_put("/auth/user/"+encodeURIComponent(e),{id:t,password:i,firstName:a,surname:n,email:r,roles:m,operatorKBList:_},(function(t){var a=t.data,n=!1,r=!1;if(a&&p&&a.id===p.id){var i,s=Object(g.a)(p.roles);try{for(s.s();!(i=s.n()).done;){var o=i.value;o&&"operator"===o.role&&(n=!0)}}catch(E){s.e(E)}finally{s.f()}var l,d=Object(g.a)(a.roles);try{for(d.s();!(l=d.n()).done;){var m=l.value;m&&"operator"===m.role&&(r=!0)}}catch(E){d.e(E)}finally{d.f()}!n&&r&&De(c),c({type:"update user",user:a})}de(e,u,c)}),(function(e){c({type:I,title:"Error",error:e})}));case 11:case"end":return l.stop()}}),l)})));return function(e,t){return l.apply(this,arguments)}}()},deleteUser:function(e,t){return function(){var a=Object(ee.a)($.a.mark((function a(n,r){var i;return $.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:O,busy:!0}),i=r().appReducer.user_filter,a.next=4,k.http_delete("/auth/organisation/user/"+encodeURIComponent(t)+"/"+encodeURIComponent(e),(function(t){de(e,i,n)}),(function(e){n({type:I,title:"Error",error:e})}));case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},setUserFilter:function(e){return{type:"set user filter",filter:e}},uploadProgram:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:O,busy:!0}),a({type:"uploading program"}),t.next=4,k.http_put("/knowledgebase/upload",e,(function(e){a({type:"uploading program finished"})}),(function(e){a({type:I,title:"Error",error:e})}));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},wpUploadArchive:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i,s,o,l;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:O,busy:!0}),a({type:"uploading wp archive"}),r=n().appReducer.knowledge_base_list,i="",!r){t.next=23;break}s=Object(g.a)(r),t.prev=6,s.s();case 8:if((o=s.n()).done){t.next=15;break}if((l=o.value).kbId!==e.kbId){t.next=13;break}return i=l.securityId,t.abrupt("break",15);case 13:t.next=8;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(6),s.e(t.t0);case 20:return t.prev=20,s.f(),t.finish(20);case 23:return e.sid=i,t.next=26,k.http_post("/crawler/admin/upload/archive",e,(function(e){a({type:"uploading wp archive finished"})}),(function(e){a({type:I,title:"Error",error:e})}));case 26:case"end":return t.stop()}}),t,null,[[6,17,20,23]])})));return function(e,a){return t.apply(this,arguments)}}()},getCrawlers:function(e,t){return function(){var a=Object(ee.a)($.a.mark((function a(n,r){return $.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,pe(e,t,n);case 2:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},updateCrawler:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:O,busy:!0}),r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,t.next=5,k.http_post("/crawler/crawler",e,(function(e){pe(r,i,a)}),(function(e){a({type:I,title:"Error",error:e})}));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},deleteCrawler:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:O,busy:!0}),r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,t.next=5,k.http_delete("/crawler/crawler/"+encodeURIComponent(r)+"/"+encodeURIComponent(i)+"/"+encodeURIComponent(e),(function(e){pe(r,i,a)}),(function(e){a({type:I,title:"Error",error:e})}));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},getDomains:function(e,t){return function(){var a=Object(ee.a)($.a.mark((function a(n,r){return $.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,he(e,t,0,10,"",n);case 2:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},updateDomain:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:O,busy:!0}),r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,t.next=5,k.http_put("/knowledgebase/domain",e,(function(e){he(r,i,0,10,"",a)}),(function(e){a({type:I,title:"Error",error:e})}));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},testDomain:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:O,busy:!0}),t.next=3,k.http_put("/knowledgebase/domain/test",e,(function(e){a({type:I,title:"Success",error:"Connected Successfully"})}),(function(e){a({type:I,title:"Error",error:e})}));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},deleteDomain:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:O,busy:!0}),r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,t.next=5,k.http_delete("/knowledgebase/domain/"+encodeURIComponent(r)+"/"+encodeURIComponent(i)+"/"+encodeURIComponent(e),(function(e){he(r,i,0,10,"",a)}),(function(e){a({type:I,title:"Error",error:e})}));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},getDocuments:function(){return function(){var e=Object(ee.a)($.a.mark((function e(t,a){var n,r,i,s,o,l;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:O,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.document_filter,s=a().appReducer.prev_document_filter,o=a().appReducer.document_page_size,l=a().appReducer.document_previous,s!==i&&(t({type:"reset document pagination"}),l=null),!n||!r){e.next=11;break}return e.next=11,fe(n,r,l,o,i,t);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},setDocumentFilter:function(e){return{type:"set document filter",filter:e}},deleteDocument:function(e,t){return function(){var a=Object(ee.a)($.a.mark((function a(n,r){var i,s,o,l,c,d,u;return $.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n({type:O,busy:!0}),i=r().appReducer.selected_organisation_id,s=r().appReducer.selected_knowledgebase_id,o=r().appReducer.document_filter,l=r().appReducer.prev_document_filter,c=r().appReducer.document_page_size,d=r().appReducer.document_previous,!(i&&s&&e)){a.next=12;break}return l!==o&&(n({type:"reset document pagination"}),d=null),u="/document/document/"+encodeURIComponent(i)+"/"+encodeURIComponent(s)+"/"+btoa(e)+"/"+encodeURIComponent(t),a.next=12,k.http_delete(u,(function(e){fe(i,s,d,c,o,n)}),(function(e){n({type:I,title:"Error",error:e})}));case 12:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},setDocumentPage:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i,s,o,l,c,d,u,p;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:O,busy:!0}),r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,s=n().appReducer.document_filter,o=n().appReducer.document_page_size,l=n().appReducer.document_page,c=n().appReducer.document_nav_list,d=n().appReducer.document_list,!(e!==l&&e>=0)){t.next=22;break}if(!(e>l)){t.next=17;break}if(!(d.length>0)){t.next=15;break}return u=d[d.length-1].url,a({type:"set document page",page:e,prev_url:u}),t.next=15,fe(r,i,u,o,s,a);case 15:t.next=22;break;case 17:if(!(e<c.length)){t.next=22;break}return p=c[e],a({type:"set document page",page:e,prev_url:p}),t.next=22,fe(r,i,p,o,s,a);case 22:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setDocumentPageSize:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i,s;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:O,busy:!0}),a({type:"set document page size",page_size:e}),r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,s=n().appReducer.document_filter,t.next=7,fe(r,i,null,e,s,a);case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},reprocessDocument:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i,s;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().appReducer.document_filter,i=n().appReducer.document_previous,s=n().appReducer.document_page_size,a({type:O,busy:!0}),t.next=6,k.http_post("/document/reprocess",{organisationId:e.organisationId,kbId:e.kbId,url:e.url},(function(t){fe(e.organisationId,e.kbId,i,s,r,a)}),(function(e){a({type:I,title:"Error",error:e})}));case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},getMindItems:function(){return function(){var e=Object(ee.a)($.a.mark((function e(t,a){var n,r,i,s,o,l;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:O,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.mind_item_filter,s=a().appReducer.prev_mind_item_filter,o=a().appReducer.mind_item_page_size,l=a().appReducer.mind_item_previous,s!==i&&(t({type:"reset document pagination"}),l=null),!n||!r){e.next=11;break}return e.next=11,_e(n,r,l,i,o,t);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},setMindItemPage:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i,s,o,l,c,d,u,p;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:O,busy:!0}),r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,s=n().appReducer.mind_item_filter,o=n().appReducer.mind_item_page_size,l=n().appReducer.mind_item_page,c=n().appReducer.mind_item_nav_list,d=n().appReducer.mind_item_list,!(e!==l&&e>=0)){t.next=22;break}if(!(e>l)){t.next=17;break}if(!(d.length>0)){t.next=15;break}return u=d[d.length-1].id,a({type:"set mind item page",page:e,prev_id:u}),t.next=15,_e(r,i,u,s,o,a);case 15:t.next=22;break;case 17:if(!(e<c.length)){t.next=22;break}return p=c[e],a({type:"set mind item page",page:e,prev_id:p}),t.next=22,_e(r,i,p,s,o,a);case 22:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setMindItemPageSize:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i,s;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:O,busy:!0}),a({type:"set mind item page size",page_size:e}),r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,s=n().appReducer.mind_item_filter,t.next=7,_e(r,i,null,s,e,a);case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setMindItemFilter:function(e){return{type:"set mind item filter",filter:e}},deleteMindItem:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i,s,o,l;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:O,busy:!0}),r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,s=n().appReducer.mind_item_filter,o=n().appReducer.mind_item_page_size,l=n().appReducer.mind_item_previous,t.next=8,k.http_delete("/bot/ui-delete/"+encodeURIComponent(r)+"/"+encodeURIComponent(i)+"/"+encodeURIComponent(e),(function(e){_e(r,i,l,s,o,a)}),(function(e){a({type:I,title:"Error",error:e})}));case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},deleteAllMindItems:function(){return function(){var e=Object(ee.a)($.a.mark((function e(t,a){var n,r,i,s,o;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:O,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.mind_item_filter,s=a().appReducer.mind_item_page_size,o=a().appReducer.mind_item_previous,e.next=8,k.http_delete("/bot/ui-delete-all/"+encodeURIComponent(n)+"/"+encodeURIComponent(r),(function(e){_e(n,r,o,i,s,t)}),(function(e){t({type:I,title:"Error",error:e})}));case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},saveMindItem:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i,s,o,l;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:O,busy:!0}),r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,s=n().appReducer.mind_item_filter,o=n().appReducer.mind_item_page_size,l=n().appReducer.mind_item_previous,t.next=8,k.http_put("/bot/ui-save/"+encodeURIComponent(r)+"/"+encodeURIComponent(i),e,(function(e){_e(r,i,l,s,o,a)}),(function(e){a({type:I,title:"Error",error:e})}));case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},botQuery:function(){return function(){var e=Object(ee.a)($.a.mark((function e(t,a){var n,r,i,s,o,l;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:O,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.bot_query_page_size,s=a().appReducer.bot_query_threshold,!((o=a().appReducer.bot_query).length>0)){e.next=12;break}return l={organisationId:n,kbId:r,query:o,numResults:i,scoreThreshold:s},e.next=10,k.http_put("/bot/query",l,(function(e){t({type:"set bot query list",bot_query_result_list:e.data})}),(function(e){t({type:I,title:"Error",error:e})}));case 10:e.next=13;break;case 12:t({type:"set bot query list",bot_query_result_list:[]});case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},setBotQueryString:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"set bot query string",bot_query:e});case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},getSynonyms:function(){return function(){var e=Object(ee.a)($.a.mark((function e(t,a){var n,r,i,s,o,l;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:O,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.synonym_filter,s=a().appReducer.prev_synonym_filter,o=a().appReducer.synonym_page_size,l=a().appReducer.synonym_prev_id,s!==i&&(t({type:"reset synonym pagination"}),l=null),!n||!r){e.next=11;break}return e.next=11,be(n,r,l,i,o,t);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},setSynonymPage:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i,s,o,l,c,d,u,p;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:O,busy:!0}),r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,s=n().appReducer.synonym_filter,o=n().appReducer.synonym_page_size,l=n().appReducer.synonym_page,c=n().appReducer.synonym_nav_list,d=n().appReducer.synonym_list,!(e!==l&&e>=0)){t.next=22;break}if(!(e>l)){t.next=17;break}if(!(d.length>0)){t.next=15;break}return u=d[d.length-1].id,a({type:"set synonym page",page:e,prev_id:u}),t.next=15,be(r,i,u,s,o,a);case 15:t.next=22;break;case 17:if(!(e<c.length)){t.next=22;break}return p=c[e],a({type:"set synonym page",page:e,prev_id:p}),t.next=22,be(r,i,p,s,o,a);case 22:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setSynonymPageSize:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i,s;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:O,busy:!0}),a({type:"set synonym page size",page_size:e}),r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,s=n().appReducer.synonym_filter,t.next=7,be(r,i,null,s,e,a);case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},deleteSynonym:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i,s,o,l;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:O,busy:!0}),r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,s=n().appReducer.synonym_prev_id,o=n().appReducer.synonym_filter,l=n().appReducer.synonym_page_size,t.next=8,k.http_delete("/language/delete-synonym/"+encodeURIComponent(r)+"/"+encodeURIComponent(i)+"/"+encodeURIComponent(e),(function(e){be(r,i,s,o,l,a)}),(function(e){a({type:I,title:"Error",error:e})}));case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},saveSynonym:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i,s,o,l;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:O,busy:!0}),r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,s=n().appReducer.synonym_prev_id,o=n().appReducer.synonym_filter,l=n().appReducer.synonym_page_size,k.http_put("/language/save-synonym/"+encodeURIComponent(r)+"/"+encodeURIComponent(i),e,(function(e){be(r,i,s,o,l,a)}),(function(e){a({type:I,title:"Error",error:e})}));case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setSynonymFilter:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"set synonym filter",synonym_filter:e});case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},getSemantics:function(){return function(){var e=Object(ee.a)($.a.mark((function e(t,a){var n,r,i,s,o,l;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:O,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.semantic_filter,s=a().appReducer.prev_semantic_filter,o=a().appReducer.semantic_page_size,l=a().appReducer.semantic_prev_word,s!==i&&(t({type:"reset semantic pagination"}),l=null),!n||!r){e.next=11;break}return e.next=11,Ee(n,r,l,i,o,t);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},setSemanticPage:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i,s,o,l,c,d,u,p;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:O,busy:!0}),r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,s=n().appReducer.semantic_filter,o=n().appReducer.semantic_page_size,l=n().appReducer.semantic_page,c=n().appReducer.semantic_nav_list,d=n().appReducer.semantic_list,!(e!==l&&e>=0)){t.next=22;break}if(!(e>l)){t.next=17;break}if(!(d.length>0)){t.next=15;break}return u=d[d.length-1].word,a({type:"set semantic page",page:e,prev_word:u}),t.next=15,Ee(r,i,u,s,o,a);case 15:t.next=22;break;case 17:if(!(e<c.length)){t.next=22;break}return p=c[e],a({type:"set semantic page",page:e,prev_word:p}),t.next=22,Ee(r,i,p,s,o,a);case 22:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setSemanticPageSize:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i,s;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:O,busy:!0}),a({type:"set semantic page size",page_size:e}),r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,s=n().appReducer.semantic_filter,t.next=7,Ee(r,i,null,s,e,a);case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},deleteSemantic:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i,s,o,l;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:O,busy:!0}),r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,s=n().appReducer.semantic_filter,o=n().appReducer.semantic_prev_word,l=n().appReducer.semantic_page_size,t.next=8,k.http_delete("/language/delete-semantic/"+encodeURIComponent(r)+"/"+encodeURIComponent(i)+"/"+encodeURIComponent(e),(function(e){Ee(r,i,o,s,l,a)}),(function(e){a({type:I,title:"Error",error:e})}));case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},findSemantics:function(){return function(){var e=Object(ee.a)($.a.mark((function e(t,a){var n,r,i,s,o;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.semantic_filter,s=a().appReducer.semantic_page_size,o=a().appReducer.semantic_prev_word,e.next=7,Ee(n,r,o,i,s,t);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},saveSemantic:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i,s,o;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:O,busy:!0}),r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,s=n().appReducer.semantic_filter,o=n().appReducer.semantic_page_size,"",k.http_put("/language/save-semantic/"+encodeURIComponent(r)+"/"+encodeURIComponent(i),e,(function(e){Ee(r,i,"",s,o,a)}),(function(e){a({type:I,title:"Error",error:e})}));case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setSemanticFilter:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"set semantic filter",semantic_filter:e});case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},getSemanticDisplayCategories:function(){return function(){var e=Object(ee.a)($.a.mark((function e(t,a){var n,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,e.next=4,xe(n,r,t);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},saveSemanticDisplayCategory:function(e,t,a){return function(){var n=Object(ee.a)($.a.mark((function n(r,i){var s,o;return $.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=i().appReducer.selected_organisation_id,o=i().appReducer.selected_knowledgebase_id,n.next=4,k.http_put("/language/semantic-display-category/",{organisationId:s,kbId:o,prevDisplayName:e,displayName:t,semanticList:a},(function(e){xe(s,o,r)}),(function(e){r({type:I,title:"Error",error:e})}));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},deleteSemanticDisplayCategory:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,t.next=4,k.http_delete("/language/semantic-display-category/"+encodeURIComponent(r)+"/"+encodeURIComponent(i)+"/"+encodeURIComponent(e),(function(e){xe(r,i,a)}),(function(e){a({type:I,title:"Error",error:e})}));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},deleteSynSet:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i,s,o,l;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:O,busy:!0}),r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,s=n().appReducer.synset_page,o=n().appReducer.synset_page_size,l=n().appReducer.synset_filter,t.next=8,k.http_delete("/language/delete-syn-set/"+encodeURIComponent(r)+"/"+encodeURIComponent(i)+"/"+encodeURIComponent(e),(function(e){Ce(r,i,s,o,l,a)}),(function(e){a({type:I,title:"Error",error:e})}));case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},findSynSets:function(){return function(){var e=Object(ee.a)($.a.mark((function e(t,a){var n,r,i,s,o;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.synset_page,s=a().appReducer.synset_page_size,o=a().appReducer.synset_filter,e.next=7,Ce(n,r,i,s,o,t);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},saveSynSet:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i,s,o,l;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:O,busy:!0}),r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,s=n().appReducer.synset_page,o=n().appReducer.synset_page_size,l=n().appReducer.synset_filter,k.http_put("/language/save-syn-set/"+encodeURIComponent(r)+"/"+encodeURIComponent(i),e,(function(e){Ce(r,i,s,o,l,a)}),(function(e){a({type:I,title:"Error",error:e})}));case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setSynSetFilter:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"set synset filter",synset_filter:e});case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setSynSetPage:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i,s,o;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:O,busy:!0}),r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,s=n().appReducer.synset_page_size,o=n().appReducer.synset_filter,a({type:"set synset page",page:e}),t.next=8,Ce(r,i,e,s,o,a);case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setSynSetPageSize:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i,s,o;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:O,busy:!0}),a({type:"set synset page size",page_size:e}),r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,s=n().appReducer.synset_page,o=n().appReducer.synset_filter,t.next=8,Ce(r,i,s,e,o,a);case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setReportDate:function(e){return{type:"set report date",report_date:e}},getReports:function(){return function(){var e=Object(ee.a)($.a.mark((function e(t,a){var n,r,i,s,o,l;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.report_num_items,s=new Date(a().appReducer.report_date),o=s.getFullYear(),l=s.getMonth()+1,e.next=8,Ie(n,r,o,l,i,t);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},processOperatorMessage:function(e){return{type:"process operator message",message:e}},setOperatorConnected:function(e){return{type:"set operator connected",connected:e}},addConversation:function(e,t){return{type:"add conversation",operatorId:e,item:t}},markConversationItemUsed:function(e,t){return{type:"mark conversation used",operatorId:e,id:t}},operatorReady:function(e,t){return{type:"operator ready",operatorId:e,ready:t}},setOperatorAnswer:function(e,t,a){return{type:"set operator answer",operatorId:e,id:t,answer:a}},setOperatorQuestion:function(e,t,a){return{type:"set operator question",operatorId:e,id:t,question:a}},clearPreviousAnswer:function(e){return{type:"clear previous answer",operatorId:e}},clearUser:function(e){return{type:"operator clear user",operatorId:e}},addOperator:function(){return function(){var e=Object(ee.a)($.a.mark((function e(t,a){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a().appReducer.operators.length<5&&t({type:"add operator"});case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},removeOperator:function(e){return{type:"remove operator",id:e}},stopClientTyping:function(e){return{type:"stop client typing",operator_id:e}},sendOperatorMessage:function(e,t){return function(){var a=Object(ee.a)($.a.mark((function a(n,r){return $.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,k.http_post(e,t,(function(e){}),(function(e){n({type:I,title:"Error",error:e})}));case 2:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},getLogList:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i,s;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().appReducer.session,i=n().appReducer.selected_organisation_id,s=n().appReducer.log_size,t.next=5,je(r,i,e,s,a);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},restartService:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){var r,i;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().appReducer.session,i=n().appReducer.selected_organisation_id,t.next=4,k.http_get("/stats/restart-service/"+encodeURIComponent(r.id)+"/"+encodeURIComponent(i)+"/"+encodeURIComponent(e),(function(e){}),(function(e){a({type:I,title:"Error",error:e})}));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},getHtml5Notifications:function(){return function(){var e=Object(ee.a)($.a.mark((function e(t,a){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De(t);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},restore:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(a,n){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:O,busy:!0}),t.next=3,k.http_put("/backup/restore",{data:e},(function(e){a({type:O,busy:!1})}),(function(e){a({type:I,title:"Error",error:e})}));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}},Ue={hr:{color:"#eee",background:"#eee",width:"30%",height:"1px",marginLeft:"auto",marginRight:"auto",marginTop:"20px",marginBottom:"20px"},spinner:{position:"relative",top:"-8px",left:"40px",width:"32px"},spinnerInvisible:{display:"none",position:"relative",top:"-8px",left:"40px",width:"32px"},page:{textAlign:"center",fontSize:"1.0em",fontFamily:"Tahoma"},recaptcha:{display:"flex",justifyContent:"center",width:"100%"},helpText:{marginTop:"10px",fontSize:"0.9em",color:"#555",marginBottom:"2px"},copyright:{position:"absolute",bottom:"0px",height:"25px",widht:"100%",color:"#aaa",fontSize:"0.8em",left:"40%"},license:{marginTop:"20px"},busy:{display:"block",position:"fixed",left:0,top:0,width:"100%",height:"100%",zIndex:"9999",borderRadius:"10px",opacity:"0.8",backgroundSize:"100px",background:"url('../images/busy.gif') 50% 50% no-repeat rgb(255,255,255)"},textBox:{width:"250px",borderRadius:"3px",marginBottom:"10px"}},ze=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={email:"",password:""},n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){E(),this.props.notBusy()}},{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"handleClick",value:function(){this.props.signIn(this.state.email,this.state.password)}},{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.handleClick()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:Ue.page},r.a.createElement(P.a,{theme:q},r.a.createElement("div",null,r.a.createElement(H,{title:"administration",signed_in:!1}),r.a.createElement(Z,{title:this.props.error_title,message:this.props.error,callback:function(){return e.props.closeError()}}),this.props.busy&&r.a.createElement("div",{style:Ue.busy}),r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement("div",{style:Ue.hr})),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement(N.a,{disabled:this.props.busy,style:Ue.textBox,autoFocus:!0,placeholder:"Enter your email",label:"email",onChange:function(t){return e.setState({email:t.target.value})},onKeyPress:this.onKeyPress.bind(this)})),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement(N.a,{disabled:this.props.busy,style:Ue.textBox,type:"password",placeholder:"Enter your Password",label:"Password",onChange:function(t){return e.setState({password:t.target.value})},onKeyPress:this.onKeyPress.bind(this)})),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement(B.a,{variant:"contained",color:"primary",className:"button-style",disabled:this.props.busy,onClick:function(){return e.handleClick()}},"Sign-in")),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement("div",{style:Ue.hr})),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement("div",{style:Ue.helpText},"forgotten your password?")),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement(B.a,{variant:"contained",onClick:function(){return window.location="/#/reset-password-request"},disabled:this.props.busy,className:"button-style"},"Reset my Password")),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:12}),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement("div",{style:Ue.license},r.a.createElement(B.a,{variant:"contained",onClick:function(){return window.location="/#/os-license"},disabled:this.props.busy,className:"button-style"},"open source licenses"))),r.a.createElement(Y.a,{item:!0,xs:3})))))}}]),a}(n.Component),We=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,busy:e.appReducer.busy}}),(function(e){return Object(u.b)(Ne,e)}))(ze),Ae={page:{textAlign:"center",fontSize:"1.0em",fontFamily:"Tahoma"}},Fe=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={email:"",error_title:"",error_msg:"",has_error:!1},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleClick",value:function(e){var t=this;this.state.email.length>0?C.passwordResetRequest(this.state.email,(function(e){t.showError("Success","we've emailed you a link for resetting your password.")}),(function(e){t.showError("Error",e)})):this.showError("Error","Input field value is missing")}},{key:"showError",value:function(e,t){this.setState({error_title:e,error_msg:t})}},{key:"closeError",value:function(){this.setState({error_msg:""})}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"ResetPasswordRequest: Something went wrong."):r.a.createElement("div",{style:Ae.page},r.a.createElement(P.a,{theme:q},r.a.createElement(H,{title:"administration",loggedIn:!1}),r.a.createElement(Z,{title:this.state.error_title,message:this.state.error_msg,callback:this.closeError.bind(this)}),r.a.createElement(Y.a,{container:!0,spacing:3},r.a.createElement(Y.a,{item:!0,xs:12}),r.a.createElement(Y.a,{item:!0,xs:12}),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement("div",{className:"sign-in-help-text"},"Please enter your email address and we'll email you a link to reset your password.")),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement(N.a,{autoFocus:!0,placeholder:"Enter your email Address",label:"Email Address",onChange:function(t){return e.setState({email:t.target.value})}})),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement(B.a,{variant:"contained",color:"primary",className:"button-style",onClick:function(t){return e.handleClick(t)}},"Submit")),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:12}),r.a.createElement(Y.a,{item:!0,xs:12}),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement("div",{className:"sign-in-help-text"},"Click here to return to sign-in")),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement("div",null,r.a.createElement(B.a,{variant:"contained",onClick:function(){return window.location="/"},className:"button-style"},"Return to Sign-in"))),r.a.createElement(Y.a,{item:!0,xs:3}))))}}]),a}(n.Component),qe=a(296),Ye={input:{width:"350px"},page:{textAlign:"center",fontSize:"1.0em",fontFamily:"Tahoma"},spacer:{height:"10px"}},Me=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;Object(f.a)(this,a),n=t.call(this,e);var r=qe.parse(e.location.search),i="",s="";return r.email&&(i=r.email),r.resetid&&(s=r.resetid),n.state={email:i,reset_id:s,password:"",error_title:"",error_msg:"",has_error:!1},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleClick",value:function(e){var t=this;this.state.email.length>0&&this.state.reset_id.length>0&&this.state.password.length>5?C.resetPassword(this.state.email,this.state.password,this.state.reset_id,(function(e){t.showError("Success","Password reset.  You can now sign-in using your new password."),t.setState({reset_id:"",email:"",password:""})}),(function(e){t.showError("Error",e)})):this.showError("Error","Input field value(s) missing or incorrect.")}},{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.handleClick(e)}},{key:"showError",value:function(e,t){this.setState({error_title:e,error_msg:t})}},{key:"closeError",value:function(){this.setState({error_msg:""})}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"ResetPasswordResponse: Something went wrong."):r.a.createElement("div",{style:Ye.page},r.a.createElement(P.a,{theme:q},r.a.createElement(H,{title:"",loggedIn:!1}),r.a.createElement(Z,{title:this.state.error_title,message:this.state.error_msg,callback:this.closeError.bind(this)}),r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement(N.a,{placeholder:"Enter your email Address",label:"Email Address",style:Ye.input,value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})}})),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement(N.a,{placeholder:"Enter the reset-id we sent you",label:"Reset Id",style:Ye.input,value:this.state.reset_id,onChange:function(t){return e.setState({reset_id:t.target.value})}})),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement("br",null)),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement(N.a,{type:"password",placeholder:"Enter your new Password",label:"Enter your new Password",autoFocus:!0,style:Ye.input,onChange:function(t){return e.setState({password:t.target.value})},onKeyPress:this.onKeyPress.bind(this)})),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement("div",{style:Ye.spacer},"\xa0")),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement("div",null,r.a.createElement(B.a,{variant:"contained",className:"button-style",onClick:function(t){return e.handleClick(t)}},"Reset Password"))),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement("br",null)),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement("div",{className:"sign-in-help-text"},"Click here to return to sign-in")),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:3}),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement("div",null,r.a.createElement(B.a,{variant:"contained",className:"button-style",onClick:function(){return window.location="/"}},"Return to Sign-in"))),r.a.createElement(Y.a,{item:!0,xs:3}))))}}]),a}(n.Component),He={page:{fontSize:"1.0em",fontFamily:"Tahoma"},content:{marginTop:"20px",marginLeft:"20%"},link:{texcolor:"#c0c0c0"},bottomLink:{textAlign:"center",marginTop:"50px"}},Je=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={error_title:"",error_msg:"",has_error:!1},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"showError",value:function(e,t){this.setState({error_title:e,error_msg:t})}},{key:"closeError",value:function(){this.setState({error_msg:""})}},{key:"render",value:function(){return this.state.has_error?r.a.createElement("h1",null,"license: Something went wrong."):r.a.createElement("div",{style:He.page},r.a.createElement(P.a,{theme:q},r.a.createElement(H,{title:"open source licenses",loggedIn:!1}),r.a.createElement(Z,{title:this.state.error_title,message:this.state.error_msg,callback:this.closeError.bind(this)}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Y.a,{container:!0,spacing:2},r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://github.com/JetBrains/kotlin-web-site/blob/master/LICENSE",rel:"noopener noreferrer",target:"_blank"},"Kotlin license"))),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://github.com/JetBrains/kotlin-web-site/blob/master/LICENSE",rel:"noopener noreferrer",target:"_blank"},"Kotlinx Coroutines Core license"))),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.apache.org/licenses/LICENSE-2.0.html",rel:"noopener noreferrer",target:"_blank"},"Spring license"))),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.apache.org/licenses/LICENSE-2.0.html",rel:"noopener noreferrer",target:"_blank"},"Jackson license"))),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://github.com/JodaOrg/joda-time/blob/master/LICENSE.txt",rel:"noopener noreferrer",target:"_blank"},"Joda-time license"))),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.apache.org/licenses/LICENSE-2.0.html",rel:"noopener noreferrer",target:"_blank"},"commons-io license"))),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.apache.org/licenses/LICENSE-2.0.html",rel:"noopener noreferrer",target:"_blank"},"commons-fileupload license"))),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.apache.org/licenses/LICENSE-2.0.html",rel:"noopener noreferrer",target:"_blank"},"Apache http-client license"))),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.apache.org/licenses/LICENSE-2.0.html",rel:"noopener noreferrer",target:"_blank"},"Apache http-mime license"))),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://github.com/explosion/spaCy/blob/master/LICENSE",rel:"noopener noreferrer",target:"_blank"},"spaCy license"))),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.apache.org/licenses/LICENSE-2.0.html",rel:"noopener noreferrer",target:"_blank"},"Apache Tika license"))),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.apache.org/licenses/LICENSE-2.0.html",rel:"noopener noreferrer",target:"_blank"},"Google API license"))),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.apache.org/licenses/LICENSE-2.0.html",rel:"noopener noreferrer",target:"_blank"},"Google Cloud license"))),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.apache.org/licenses/LICENSE-2.0.html",rel:"noopener noreferrer",target:"_blank"},"Google OAuth license"))),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.isc.org/licenses/",rel:"noopener noreferrer",target:"_blank"},"jBcrypt license"))),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.datastax.com/terms/datastax-dse-driver-license-terms",rel:"noopener noreferrer",target:"_blank"},"DataStax Driver license"))),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.apache.org/licenses/LICENSE-2.0.html",rel:"noopener noreferrer",target:"_blank"},"Apache Cassandra license"))),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.apache.org/licenses/LICENSE-2.0.html",rel:"noopener noreferrer",target:"_blank"},"Apache ActiveMQ license"))),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://oss.oracle.com/licenses/CDDL+GPL-1.1",rel:"noopener noreferrer",target:"_blank"},"javax-mail license"))),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://junit.org/junit4/license.html",rel:"noopener noreferrer",target:"_blank"},"junit license"))),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://jsoup.org/license",rel:"noopener noreferrer",target:"_blank"},"jSoup license"))),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.apache.org/licenses/LICENSE-2.0.html",rel:"noopener noreferrer",target:"_blank"},"snakeyaml license"))),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.gnu.org/licenses/old-licenses/lgpl-2.0.html",rel:"noopener noreferrer",target:"_blank"},"javax WebSocket Client license"))),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.eclipse.org/legal/epl-2.0/",rel:"noopener noreferrer",target:"_blank"},"Tyrus WebSocket Client license"))),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.apache.org/licenses/LICENSE-2.0.html",rel:"noopener noreferrer",target:"_blank"},"snappy java license"))),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.apache.org/licenses/LICENSE-2.0.html",rel:"noopener noreferrer",target:"_blank"},"Apache Spark license"))),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.apache.org/licenses/LICENSE-2.0.html",rel:"noopener noreferrer",target:"_blank"},"Apache Avro license"))),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.apache.org/licenses/LICENSE-2.0.html",rel:"noopener noreferrer",target:"_blank"},"Apache Parquet license"))),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.apache.org/licenses/LICENSE-2.0.html",rel:"noopener noreferrer",target:"_blank"},"Apache Hadoop license"))),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.apache.org/licenses/LICENSE-2.0.html",rel:"noopener noreferrer",target:"_blank"},"Java Native Access license"))),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://opensource.org/licenses/lgpl-license",rel:"noopener noreferrer",target:"_blank"},"JCIFS-ng license"))),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://mit-license.org/",rel:"noopener noreferrer",target:"_blank"},"Microsoft SQL JDBC license"))),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://opensource.org/licenses/BSD-2-Clause",rel:"noopener noreferrer",target:"_blank"},"Postgres SQL JDBC license"))),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:He.link},r.a.createElement("a",{href:"https://www.gnu.org/licenses/old-licenses/lgpl-2.0.html",rel:"noopener noreferrer",target:"_blank"},"MySQL JDBC license"))),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:10},r.a.createElement("div",{style:He.bottomLink},r.a.createElement(B.a,{variant:"contained",onClick:function(){return window.location="/"},className:"button-style"},"Return to Sign-in"))),r.a.createElement(Y.a,{item:!0,xs:1}))))}}]),a}(n.Component),Ke={page:{fontSize:"0.9em",fontFamily:"Tahoma"},content:{marginTop:"10px",marginLeft:"50px"},link:{margin:"10px",texcolor:"#c0c0c0"},bottomLink:{textAlign:"center",marginTop:"50px",marginBottom:"50px"},text:{lineHeight:"22px",fontSize:"1.2em",fontColor:"#222"}},Ve=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={error_title:"",error_msg:"",has_error:!1},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"showError",value:function(e,t){this.setState({error_title:e,error_msg:t})}},{key:"closeError",value:function(){this.setState({error_msg:""})}},{key:"render",value:function(){return this.state.has_error?r.a.createElement("h1",null,"license-agreement: Something went wrong."):r.a.createElement("div",{style:Ke.page},r.a.createElement(P.a,{theme:q},r.a.createElement("div",null,r.a.createElement(H,{title:"",loggedIn:!1}),r.a.createElement(Z,{title:this.state.error_title,message:this.state.error_msg,callback:this.closeError.bind(this)}),r.a.createElement("br",{clear:"both"}),r.a.createElement("div",{style:Ke.content},r.a.createElement("h1",null,"SIMSAGE\u2122 TERMS OF USE"),r.a.createElement("br",null),"Welcome to SimSage\u2122, an innovative, semantic, software-based Artificial Intelligence service that assists organisations to automate their web-page interactions with Customers. SimSage\u2122\u2019s capabilities include automating Customer enquiries requests for information, particularly by supplementing, or replacing Frequently Asked Questions (FAQs).",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),"These Terms of Use, as amended from time to time (Terms) explain the terms on which SimSage\u2122  Limited (NZCN 6798094) of 86 Tinakori Road, Wellington, New Zealand (SimSage\u2122) provides customers with access to certain services through the www.simsage.nz website (Website). Please read them carefully.",r.a.createElement("br",null),r.a.createElement("br",null),"By registering to use the Services and clicking \u201cI accept\u201d, You acknowledge that You have read and understood these Terms and if You are acting on behalf of any person for whom You are using the Services, that You have full authority to act and are deemed to have agreed to these Terms on behalf of that person for whom you use the Services.",r.a.createElement("br",null),r.a.createElement("br",null),"SimSage\u2122 reserves the right to change these Terms at any time, effective on posting the modified terms on the Website, and SimSage\u2122 will make every effort to communicate these changes to You via email or notification via the Website. It is likely the Terms will change over time, particularly as the Services evolve to reflect our development of the Services and user feedback. It is Your obligation to ensure that You have read, understood and agree to the most recent Terms available on the Website.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",null,"1. The Website and the Services"),r.a.createElement("br",null),"1.1 The Website is owned and managed by SimSage Limited (NZCN 6798094) of 86 Tinakori Road, Wellington, New Zealand.",r.a.createElement("br",null),r.a.createElement("br",null),"1.2 In consideration of You paying the Fees, SimSage\u2122 shall provide You with the services described on the Website (Services). To avoid doubt, SimSage\u2122\u2019s obligations are limited to providing the Services and do not in any way include acting on Your behalf. Nothing in these Terms is intended to, or shall be deemed to, establish any partnership or joint venture between You and SimSage\u2122, appoint either party as the agent of the other, nor authorise either party to make or enter into any commitments for, or on behalf of, the other party.",r.a.createElement("br",null),r.a.createElement("br",null),"1.3 SimSage\u2122 may from time to time add, modify, suspend or cease (temporarily or permanently) providing any element of the Services upon notice to You, such notice to be effective on the earlier of SimSage\u2122 posting on the Website or via email to You.",r.a.createElement("br",null),r.a.createElement("br",null),"1.4 If there is unplanned service downtime in respect of the Services or the Website, SimSage\u2122 shall use its reasonable endeavours (but has no obligation) to notify You in advance provided that SimSage\u2122 is able to do so and such notice will be effective on the earlier of SimSage\u2122 posting on the Website or notifying You via email.",r.a.createElement("br",null),r.a.createElement("br",null),"1.5 Access to the Website and the Services may be granted to You, at SimSage\u2122\u2019s discretion and on terms and for a period agreed in writing (and if no time period is specified, for one month only), on a trial or \u2018free\u2019 basis (Trial). You acknowledge and agree that these Terms shall apply to the Trial, and in addition, during the Trial:",r.a.createElement("br",null),"1.5.1 access to the Services will be provided to You at no cost;",r.a.createElement("br",null),"1.5.2 such access is solely for the purpose of offering You a preview demonstration of the functionality and features of the Services;",r.a.createElement("br",null),"1.5.3 the functionality of the Services may be limited or restricted; and",r.a.createElement("br",null),"1.5.4 SimSage\u2122 may withdraw or suspend Your access to the Services at any time, and at the end of the one month Trial period (or such other Trial period agreed in writing), Your continued access to the Website and/or Services will be subject to payment of Fees or charges in accordance with clause 4.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",null,"2 Register to use the Services"),r.a.createElement("br",null),"2.1 To use the Services You must first register with SimSage\u2122 by completing the online registration form on the Website.",r.a.createElement("br",null),r.a.createElement("br",null),"2.2 SimSage\u2122 will send You a confirmation email (Confirmation Email) once it has accepted and confirmed Your registration. Your contract to use the Services on these Terms (Contract) starts on the date of the Confirmation Email.",r.a.createElement("br",null),r.a.createElement("br",null),"2.3 SimSage\u2122 reserves the right to conduct verification and security procedures in respect of all information provided by You to SimSage\u2122. If SimSage\u2122 believes the information provided by You to register and use any of the Services breaches (or may breach) any of these Terms, SimSage\u2122 at its sole discretion may take any action it deems appropriate, including without limitation, to terminate Your Contract (with no return of any Fees already paid).",r.a.createElement("br",null),r.a.createElement("br",null),"2.4 These Terms apply to any Authorised Personnel who You authorize to access and use the Website and the Services through Your account. You acknowledge and agree:",r.a.createElement("br",null),"2.4.1 all Authorised Personnel must use the corporate  email address allocated to them by You when creating an Authorised Personnel profile;",r.a.createElement("br",null),'2.4.2 SimSage\u2122 may allocate Your "Admin" or "Member" accounts with varying levels of access, and You shall comply (and ensure each Authorised Personnel complies) with any SimSage\u2122 directions for setting up and using such accounts; and',r.a.createElement("br",null),"2.4.3 You are directly liable to SimSage\u2122 at all times for the acts or omissions of Your Authorised Personnel.",r.a.createElement("br",null),r.a.createElement("br",null),"2.5 You shall keep, and ensure Your Authorised Personnel keep, Your and Your Authorised Personnel\u2019s usernames and passwords (Logins) safe and secure to ensure they are not used without Your permission. You must immediately notify SimSage\u2122 if You believe there has been unauthorised use or access to Your Logins and/or Your profile on the Website. You shall be solely responsible and liable for any breach of these Terms arising out of, or resulting from, using Your Logins to access the Services and/or the Website (whether such use is authorised by You or not).",r.a.createElement("br",null),r.a.createElement("br",null),"2.6 SimSage\u2122 may, at any time on notice, require You to sign any further documents to confirm Your acceptance of, or give full effect to, these Terms.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",null,"3 Your obligations - general"),r.a.createElement("br",null),"3.1 The obligations in this clause 3 apply to all users of SimSage\u2122, the Services and/or the Website. Additional obligations   are set out below.",r.a.createElement("br",null),r.a.createElement("br",null),"3.2 You shall at all times use the Services and the Website in accordance with these Terms.",r.a.createElement("br",null),r.a.createElement("br",null),"3.3 You shall ensure Your use of the Services and/or the Website, including submitting any information, data, images, videos, audio, files, links to external websites, communication between Authorised Personnel, and all other material of any format (Submissions), in each case:",r.a.createElement("br",null),"3.3.1 complies with all applicable laws;",r.a.createElement("br",null),"3.3.2 does not infringe any intellectual property or other proprietary rights of any third party;",r.a.createElement("br",null),"3.3.3 does not, or could not reasonably be deemed to:",r.a.createElement("br",null),r.a.createElement("ul",null,r.a.createElement("li",null,"be offensive, illegal, inappropriate or in any way promote racism, bigotry, hatred or physical harm of any kind against any group or individual;"),r.a.createElement("li",null,"harass or advocate harassment of another person;"),r.a.createElement("li",null,"display pornographic or sexually explicit material;"),r.a.createElement("li",null,"promote conduct that is abusive, threatening, obscene, or defamatory;"),r.a.createElement("li",null,"promote any illegal activities, or provide instructional information about illegal activities, including violating someone else\u2019s privacy; or"),r.a.createElement("li",null,"provide or create computer viruses, other malware or denial of service attacks;"),r.a.createElement("li",null,"promote or contain information that is inaccurate, false or misleading;"),r.a.createElement("li",null,"engage in promoting contests, sweepstakes and pyramid schemes;"),r.a.createElement("li",null,"exploit people in a sexual or violent manner;"),r.a.createElement("li",null,"invade or violate any third party\u2019s right to privacy; and"),r.a.createElement("li",null,'transmit "junk mail", or "chain letters", or unsolicited mass mailing, messaging or "spamming";')),"and You hereby indemnify SimSage\u2122 for all losses, liabilities, costs and expenses (including legal costs) suffered or incurred by SimSage\u2122 (and/or its parent company) which arise directly or indirectly from Your breach of this clause 3.2.",r.a.createElement("br",null),r.a.createElement("br",null),"3.4 SimSage\u2122 does not vet, verify the accuracy, correctness and completeness, edit or modify any Submission or any other information, data and materials created, used and/or published by You or on Your behalf on Your Website to determine whether they may result in any liability to any third party. You warrant that You have the right to use all such information and material.",r.a.createElement("br",null),r.a.createElement("br",null),"3.5 Notwithstanding clause 3.3, SimSage\u2122 reserves the right to refuse to publish any Submissions, or to remove or edit a Submission (in whole or in part and at any time), if SimSage\u2122 believes Your use of the Services and/or the Website breaches these Terms.",r.a.createElement("br",null),r.a.createElement("br",null),"3.6 You shall not at any time:",r.a.createElement("br",null),"3.6.1 use the Services and/or the Website to impersonate (or in a way that impersonates) another User or person; and",r.a.createElement("br",null),"3.6.2 use the information made available to You through Your use of the Services and/or the Website for any purpose other than for procuring benefit out of the Services and/or the Website; and",r.a.createElement("br",null),"3.6.3 do anything whatsoever which (or which is likely to) impair, interfere with, damage, or cause harm or distress to any person using the Services and/or the Website or in respect of the network.",r.a.createElement("br",null),r.a.createElement("br",null),"3.7 SimSage\u2122 takes breaches of this clause 3 very seriously and reserves the right to take any action that SimSage\u2122 deems necessary, including suspending or terminating Your use of the Services and/or access to the Website. SimSage\u2122 may also commence legal proceedings if there is illegal use of the Services and/or the Website, or disclose information to any third party who is claiming that any material posted or uploaded by You to our Website violates their intellectual property or other proprietary rights or their right to privacy. You shall promptly notify SimSage\u2122 if You are aware of any breach (or any suspected breach) of this clause 3 by Your Authorised Personnel.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",null,"4 Fees"),r.a.createElement("br",null),"4.1 The fees to access the Services are set out on the Website (Fees). Except where You are using any Services that are specifically noted on the Website as \u201cFree\u201d, or participating in a Trial in accordance with clause 1.5, You may only access the Services by paying the Fees noted on the Website..",r.a.createElement("br",null),r.a.createElement("br",null),"4.2 Unless stated otherwise on the Website or agreed by SimSage\u2122 in writing, the Fees shall be payable by You, in the manner as set out on the Website.",r.a.createElement("br",null),r.a.createElement("br",null),"4.3 All Fees are inclusive of GST and all other taxes or duties, and are non-refundable for any reason whatsoever.",r.a.createElement("br",null),r.a.createElement("br",null),"4.4 The Fees or any rate of charge may be increased by SimSage\u2122 upon not less than 30 days prior written notice to You, which notice may be provided through the Website.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",null,"5 Warranties"),r.a.createElement("br",null),"5.1 You: You warrant that (a) You have the right and capacity to enter into, and be bound by, these Terms;  (b) You shall comply with all applicable laws relating to Your use of the Services and/or the Website; and (c)  You shall comply with SimSage\u2122\u2019s requirements and reasonable directions relating to the Services and Website as notified by SimSage\u2122 from time to time.",r.a.createElement("br",null),r.a.createElement("br",null),'5.2 SimSage\u2122: The provision of, access to, and use of, the Services and the Website is on an "as is " basis and at Your own risk. SimSage\u2122 gives no warranty about the Services and/or the Website, and in particular, SimSage\u2122 does not warrant that:',r.a.createElement("br",null),"5.2.1 the Services will meet Your requirements or that it will be suitable for any particular purpose. It is Your sole responsibility to determine that the Services meet Your needs and/or the needs of Your business and are suitable for the purposes for which they are used; or",r.a.createElement("br",null),"5.2.2 the use of the Services will be uninterrupted or error free. Among other things, the operation and availability of the systems used for accessing the Services, including public telephone services, computer networks and the Internet, can be unpredictable and may from time to time interfere with or prevent access to the Services. SimSage\u2122 is not in any way responsible for any such interference or prevention of Your access or use of the Services. To avoid doubt, all implied conditions or warranties are excluded to the maximum extent permitted by law, including (without limitation) warranties of merchantability, non-infringement of intellectual property, accuracy, completeness, fitness for a particular purpose, and any warranties arising by statute or otherwise in law or from course of dealing, course of performance, or use of trade.",r.a.createElement("br",null),r.a.createElement("br",null),"5.3 Third party websites: SimSage\u2122 may display or provide links or other interaction with third party websites and third party advertising banners on the Website (Third Party Websites). In particular, the Services may also provide You with the opportunity to connect and publish Your Information through Third Party Websites and other third party services such as social and business networking sites. Use of any such Third Party Websites and services shall be at Your sole risk and subject to the terms and conditions of the Third Party Website provider.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",null,"6 Limitation of liability"),r.a.createElement("br",null),"6.1 To the maximum extent permitted by law, SimSage\u2122 excludes all liability and responsibility to You (or any other person) in contract, tort (including negligence), or otherwise, for any loss (including loss of information, Data, profits and savings) or damage resulting, directly or indirectly, from any use of, or reliance on, the Services and/or Website.",r.a.createElement("br",null),r.a.createElement("br",null),"6.2 If You suffer loss or damage as a result of SimSage\u2122's negligence or failure to comply with these Terms, any claim by You against SimSage\u2122 arising from SimSage\u2122's negligence or failure will be limited in respect of any one incident, or series of connected incidents, to the Fees paid by You in the previous month. You are directly liable to SimSage\u2122 at all times for the acts or omissions of Your Authorised Personnel, in accordance with clause 2.4.",r.a.createElement("br",null),r.a.createElement("br",null),"6.3 If You are not satisfied with the Services, Your sole and exclusive remedy is to terminate these Terms in accordance with clause 7.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",null,"7 Termination"),r.a.createElement("br",null),"7.1 Trial policy:\u2028If SimSage\u2122 agrees in writing, in accordance with clause 1.5, to provide You with a trial usage period when You first sign up for access to the Services, You can evaluate the Services under the specified trial usage conditions, with no obligation to continue to use the Services. If You choose to continue using the Services thereafter, any payment applicable in accordance with clause 7 will be billed to You from the day You first added Your billing details into the Services.",r.a.createElement("br",null),r.a.createElement("br",null),"7.2 Prepaid Subscriptions:\u2028SimSage\u2122 will not provide any refund for any remaining prepaid period for a prepaid Fee subscription.",r.a.createElement("br",null),r.a.createElement("br",null),"7.3 No-fault termination:\u2028These Terms will continue for the period covered by the Fee paid or payable under clause 7.1. At the end of each billing period, these Terms will automatically continue for another period of the same duration as that period, provided You continue to pay the prescribed Fee when due, unless either party terminates these Terms by giving at least 30 days\u2019 notice to the other party before the end of the relevant payment period. If You terminate these Terms, You shall be liable to pay all relevant Fees on a pro-rata basis for each day of the then current period up to and including the day of termination of these Terms.",r.a.createElement("br",null),r.a.createElement("br",null),"7.4 Breach:\u2028If You:",r.a.createElement("br",null),"7.4.1 breach any of these Terms (including by non-payment of any Fees) and (i) if the breach is capable of being remedied, do not remedy the breach within 14 days after receiving notice of the breach; and (ii) if the breach is not capable of being remedied (which includes any payment of Fees that are more than 30 days overdue); or",r.a.createElement("br",null),"7.4.2 You or Your business become insolvent or Your business goes into liquidation or has a receiver or manager appointed of any of its assets or if You become insolvent, or make any arrangement with Your creditors, or become subject to any similar insolvency event in any jurisdiction, SimSage\u2122 may, at its sole discretion:",r.a.createElement("br",null),"7.4.3 Terminate this Agreement and Your use of the Services;",r.a.createElement("br",null),"7.4.4 Suspend for any definite or indefinite period of time, Your use of the Services;",r.a.createElement("br",null),"7.4.5 Suspend or terminate access to all or any Data; and/or",r.a.createElement("br",null),"7.4.6 Take any of these actions in relation to any other person/s whom You have authorised to have access to Your information or Data.",r.a.createElement("br",null),r.a.createElement("br",null),"7.5 Accrued Rights:\u2028Termination of these Terms is without prejudice to any rights or obligations of the parties which have accrued up to and including the date of termination, and shall not affect the provisions of these Terms which expressly, or by their nature, are intended to continue, including this clause 7 (Termination), and clauses 5 (Warranties), 6 (Limitation of Liability), 8 (Intellectual Property Rights). On termination of this Agreement You will:",r.a.createElement("br",null),"7.5.1 remain liable for any accrued Fees and amounts which become due for payment before or after termination; and",r.a.createElement("br",null),"7.5.2 immediately cease to use the Services.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",null,"8 Intellectual property rights"),r.a.createElement("br",null),"8.1 Title to, and all intellectual property rights in, the Services, the Website, including all software forming part of the Website (Software), and any documentation relating to the Services, is and remains the property of SimSage\u2122 (or its licensors). Nothing in these Terms will transfer from SimSage\u2122 to You any right, title or interest in the Services, the Website, the Software and associated documentation, all of which remain exclusively with SimSage\u2122 (or its licensors). All rights in and to the Software and the Website not expressly granted to You are reserved by SimSage\u2122 (and its licensors).",r.a.createElement("br",null),r.a.createElement("br",null),"8.2 You may print off one copy and may download extracts of any pages from the Website solely for use by You; and You may draw the attention of other Users to Submissions or materials posted on the Website. You must not use any part of the Submissions of other Users and all materials on the Website for any purpose other than accessing the Website or obtaining a benefit from the Services in accordance with these Terms.",r.a.createElement("br",null),r.a.createElement("br",null),"8.3 You shall not, and shall procure that Authorised Personnel shall not modify, translate, create or attempt to create derivative copies of or copy the Software and/or the Website in whole or in part; reverse engineer, decompile, disassemble or otherwise reduce the object code of the Software and/or the Website to source code form; distribute, sub-licence, assign, share, timeshare, sell, rent, lease, transmit, grant a security interest in or otherwise transfer the Software, the Website and/or Your right to use the Software or the Website.",r.a.createElement("br",null),r.a.createElement("br",null),"8.4 You:",r.a.createElement("br",null),"8.4.1 Warrant that You own or have the right or licence to use the intellectual property rights in the Your Information, all information and materials provided by You to SimSage\u2122; and",r.a.createElement("br",null),"8.4.2 indemnify SimSage\u2122 against all losses, liabilities, costs and expenses (including but not limited to legal costs) arising from or incurred by reason of any infringement of any intellectual property right by the use or possession of Your Information, and all other information and material provided by You to SimSage\u2122.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",null,"9 Data protection & privacy policy"),r.a.createElement("br",null),"9.1 You and SimSage\u2122 shall comply with the Privacy Act 1993 (and all other successor legislation and regulations) in performing their obligations under these Terms.",r.a.createElement("br",null),r.a.createElement("br",null),"9.2 SimSage\u2122 processes personal information (as defined in the Privacy Act 1993) which it collects in the course of providing the Services in accordance with its Privacy Policy which is accessible on the Website. You should read that policy at www.SimSage.nz/privacy/. You will be deemed to have accepted that policy when You accept these Terms.",r.a.createElement("br",null),r.a.createElement("br",null),"9.3 For personal information which is processed by SimSage\u2122 on Your behalf as part of the Services, SimSage\u2122 will act strictly in accordance with Your instructions by following the processing and security obligations contained in these Terms. You confirm that You are solely responsible for ensuring that any such processing and security obligations comply with all applicable privacy and data protection laws. You hereby indemnify SimSage\u2122 against all losses, liabilities, costs and expenses (including but not limited to legal costs) arising from or incurred by reason of Your failure to comply with this clause 9.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",null,"10 General"),r.a.createElement("br",null),"10.1 No Assignment: You may not assign or transfer any rights to any other person without SimSage\u2122's prior written consent. SimSage\u2122 may assign or transfer its rights and/or obligations under these Terms without requiring Your consent.",r.a.createElement("br",null),r.a.createElement("br",null),"10.2 Waiver: If either party waives any breach of these Terms, this will not constitute a waiver of any other breach. No waiver will be effective unless made in writing.",r.a.createElement("br",null),r.a.createElement("br",null),"10.3 Delays: Neither party will be liable for any delay or failure in performing its obligations under these Terms if the delay or failure is due to any cause outside its reasonable control. This clause does not apply to any obligation to pay money.",r.a.createElement("br",null),r.a.createElement("br",null),"10.4 Severability: If any provision of these Terms is invalid, unenforceable or conflicts with applicable law, that provision is replaced with a provision which, as far as possible, accomplishes the original purpose of that provision. The remainder of these Terms will be binding on the parties.",r.a.createElement("br",null),r.a.createElement("br",null),"10.5 Notices: Unless specified otherwise in these Terms, any notice given under these Terms by one party to the other must be in writing by email and will be deemed to have been given on transmission. Notices to SimSage\u2122 must be sent to support@simsage.nz  or to any other email address notified by email to You by SimSage\u2122. Notices to You will be sent to the email address which You provided when registering for the Services. SimSage\u2122 reserves the right to change these Terms at any time, effective on posting the modified terms on the Website, and SimSage\u2122 will make every effort to communicate these changes to You via email or notification via the Website.",r.a.createElement("br",null),r.a.createElement("br",null),"10.6 Rights of Third Parties: A person who is not a party to these Terms has no right to benefit under or to enforce any term of these Terms.",r.a.createElement("br",null),r.a.createElement("br",null),"10.7 Acknowledgement: You acknowledge that in entering into these Terms, You have not relied on any representations, undertakings or promises given by or implied from anything said or written (whether on the Website, the internet or in negotiation between the parties) except as expressly set out in these Terms.",r.a.createElement("br",null),r.a.createElement("br",null),"10.8 Entire agreement: These Terms, together with our Privacy Policy and the terms of any other notices or instructions given to You under these Terms, supersede and extinguish all prior agreements, representations (whether oral or written), and understandings and constitute the entire agreement between You and SimSage\u2122 relating to the Services, the Website and the other matters addressed in these Terms.",r.a.createElement("br",null),r.a.createElement("br",null),"10.9 Governing law and jurisdiction: These Terms are governed by, and shall be construed in accordance with, New Zealand law and shall be subject to the exclusive jurisdiction of the New Zealand courts.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("div",{style:Ke.bottomLink},r.a.createElement(B.a,{variant:"contained",onClick:function(){return window.close()},className:"button-style"},"close")))))}}]),a}(n.Component),Qe=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={open:!1,title:e.title,message:e.message,callback:e.callback,has_error:!1},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleOk",value:function(){this.setState({open:!1}),this.state.callback&&this.state.callback(!0)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({open:e.message.length>0,message:e.message,callback:e.callback,title:e.title})}},{key:"cancel",value:function(){this.state.callback&&this.state.callback(!1)}},{key:"ok",value:function(){this.state.callback&&this.state.callback(!0)}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"message-dialog.js: Something went wrong."):r.a.createElement(J.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.open,fullWidth:!0,maxWidth:"md",onClose:function(){return e.cancel()}},r.a.createElement(Q.a,{id:"alert-dialog-title"},this.state.title),r.a.createElement(V.a,null,r.a.createElement("div",null,r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.message}}))),r.a.createElement(K.a,null,r.a.createElement(B.a,{color:"primary",onClick:function(){return e.cancel()}},"Cancel"),r.a.createElement(B.a,{variant:"outlined",color:"secondary",onClick:function(){return e.ok()}},"OK")))}}]),a}(n.Component),Ge=Qe,Ze=a(255),Xe=a(544),$e=a(553),et={control:{float:"left",width:"calc(controlWidth - 20px)"},downShift:{marginTop:"-15px",float:"left",width:"500px"},popover:{width:"500px"},pullDownBox:{float:"right",marginTop:"10px",marginRight:"-22px"},pullDownImage:{width:"18px"}},tt=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={has_error:!1,id:e.id,label:e.label?e.label:"",onSelect:e.onSelect,onFilter:e.onFilter,value:e.value?e.value:"",isOpen:!1,selectedIndex:-1,minTextSize:e.minTextSize>=0?e.minTextSize:2,suggestion_list:[]},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"componentDidMount",value:function(){}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState({id:e.id,label:e.label?e.label:"",value:e.value?e.value:"",minTextSize:e.minTextSize>=0?e.minTextSize:2,onSelect:e.onSelect,onFilter:e.onFilter})}},{key:"getLookupData",value:function(e){var t=this;e.length>=this.state.minTextSize&&this.state.onFilter&&this.state.onFilter(e,(function(a){t.setState({suggestion_list:a,value:e,isOpen:a.length>0})}))}},{key:"showAllData",value:function(e){var t=this;this.state.onFilter&&(this.state.isOpen&&!e?this.closeControl():this.state.onFilter("",(function(e){t.setState({suggestion_list:e,isOpen:e.length>0})})))}},{key:"closeControl",value:function(){var e=this.state.value,t=!1;this.state.onFilter("",(function(a){for(var n in a)a[n].label===e&&(t=!0)})),t?this.setState({suggestion_list:[],isOpen:!1}):(this.setState({suggestion_list:[],isOpen:!1,value:""}),this.state.onSelect&&this.state.onSelect("",""))}},{key:"select",value:function(e){var t=this.state.suggestion_list;if(t&&t.length>0&&this.state.onSelect)for(var a=0;a<t.length;a++)t[a].label===e&&(this.state.onSelect(e,t[a].data),this.setState({isOpen:!1,selection_list:[],value:e}))}},{key:"handleKey",value:function(e){var t=this.state.selectedIndex,a=this.state.suggestion_list;0===a.length?this.setState({selectedIndex:-1}):13===e.keyCode?t>=0&&t<a.length&&this.select(a[t].label):38===e.keyCode?t>0?this.setState({selectedIndex:t-1}):this.setState({selectedIndex:0}):40===e.keyCode&&(t<0?this.setState({selectedIndex:0}):t+1>=a.length?this.setState({selectedIndex:a.length-1}):this.setState({selectedIndex:t+1}))}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"auto-complete.js: Something went wrong."):r.a.createElement("div",{style:et.control},r.a.createElement("div",{style:et.downShift},r.a.createElement(Ze.a,{id:this.state.id,onSelect:function(t){return e.select(t)}},(function(t){var n=t.getItemProps,i=t.selectedItem;return r.a.createElement("div",null,r.a.createElement(N.a,{placeholder:e.state.label,inputProps:{fontSize:"30px"},value:e.state.value,onClick:function(){return e.showAllData(!0)},onBlur:function(){return e.closeControl()},spellCheck:!1,onKeyDown:function(t){e.state.isOpen?e.handleKey(t):e.showAllData(!0)},onChange:function(t){e.setState({value:t.target.value}),e.getLookupData(t.target.value)},fullWidth:!0}),!e.state.isOpen&&r.a.createElement("div",{style:et.pullDownBox},r.a.createElement("img",{src:"../images/pulldown.svg",style:et.pullDownImage,onClick:function(){return e.showAllData(!1)},alt:"auto complete"})),e.state.isOpen&&r.a.createElement("div",{style:et.pullDownBox},r.a.createElement("img",{src:"../images/pulldown-rotated.svg",style:et.pullDownImage,onClick:function(){return e.showAllData(!1)},alt:"auto complete"})),e.state.isOpen&&r.a.createElement(Xe.a,{square:!0,style:{position:"absolute",zIndex:"999",marginTop:8,paddingBottom:"20px",width:"500px",minHeight:"30px",maxHeight:"300px",overflowX:"auto",overflowY:"auto"}},e.state.suggestion_list.map((function(t,r){return a.renderSuggestion({suggestion:t,index:r,itemProps:n({item:t.label,value:t.label,data:t.data}),highlightedIndex:e.state.selectedIndex,selectedItem:i})}))))}))))}}],[{key:"renderSuggestion",value:function(e){var t=e.suggestion,a=e.index,n=e.itemProps,i=e.highlightedIndex===a,s=(e.selectedItem||"").indexOf(t.label)>-1;return r.a.createElement($e.a,Object.assign({},n,{key:t.label,selected:i,component:"div",style:{height:"22px",fontSize:"16px",fontWeight:s?500:400}}),t.label)}}]),a}(n.Component),at=a(555),nt=a(559),rt=a(558),it=a(556),st=a(557),ot=a(567),lt=a(566),ct=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={has_error:!1,open:e.open,onSave:e.onSave,onError:e.onError,id:n.props.id,name:n.props.name,enabled:n.props.enabled},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){this.state.onSave&&this.state.onSave({id:this.state.id,name:this.state.name,enabled:this.state.enabled})}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({open:e.open,onSave:e.onSave,onError:e.onError,id:e.id,name:e.name,max_tpm:e.max_tpm,analytics_window_size_in_months:e.analytics_window_size_in_months,enabled:e.enabled,bot_enabled:e.bot_enabled,analytics_enabled:e.analytics_enabled,operator_enabled:e.operator_enabled,language_enabled:e.language_enabled})}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"organisation-edit.js: Something went wrong."):r.a.createElement(J.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableBackdropClick:!0,disableEscapeKeyDown:!0,open:this.state.open,fullWidth:!0,maxWidth:"lg",onClose:function(){return e.handleCancel()}},r.a.createElement(Q.a,{id:"alert-dialog-title"},"Edit Organisation"),r.a.createElement(V.a,null,r.a.createElement(Y.a,{container:!0,spacing:2},r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:3},r.a.createElement("div",null,"organisation's name")),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement(N.a,{autoFocus:!0,onChange:function(t){return e.setState({name:t.target.value})},placeholder:"name",variant:"standard",fullWidth:!0,value:this.state.name})),r.a.createElement(Y.a,{item:!0,xs:2}),r.a.createElement(Y.a,{item:!0,xs:4}),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement(lt.a,{checked:this.state.enabled,onChange:function(t){e.setState({enabled:t.target.checked})},value:"enable this organisation?",inputProps:{"aria-label":"primary checkbox"}}),"organisation enabled?"),r.a.createElement(Y.a,{item:!0,xs:2}))),r.a.createElement(K.a,null,r.a.createElement(B.a,{color:"primary",onClick:function(){return e.handleCancel()}},"Cancel"),r.a.createElement(B.a,{variant:"outlined",color:"secondary",onClick:function(){return e.handleSave()}},"Save")))}}]),a}(n.Component),dt={uploadContainer:{float:"left",width:"400px",minWidth:"400px",padding:"1px",marginLeft:"10px",background:"white",fontWeight:700,fontSize:"10pt",cursor:"pointer"},formWidth:{marginTop:"-20px"},uploadControl:{marginTop:"10px"},imageButton:{float:"left",marginRight:"20px",paddingTop:"10px",color:"#888",cursor:"pointer"},restoreImage:{width:"25px"},busyImage:{width:"28px",height:"28px",marginTop:"-10px",float:"left"},uploadInput:{float:"left"},uploadWheel:{marginLeft:"5px",marginTop:"14px",height:"28px",float:"left"}},ut=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={filename:"",fileType:"",data:"",organisationId:e.organisationId,onError:e.onError},n}return Object(y.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({organisationId:e.organisationId,onError:e.onError})}},{key:"_handleImageChange",value:function(e){e.preventDefault();var t=this,a=new FileReader,n=e.target.files[0],r=n.name,i=n.type;a.onloadend=function(){t.setState({filename:r,fileType:i,data:a.result})},a.readAsDataURL(n)}},{key:"upload",value:function(){if(this.state.data){var e={organisationId:this.state.organisationId,data:this.state.data};this.props.doUpload&&this.props.doUpload(e)}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){return e._handleSubmit(t)},style:dt.uploadContainer},r.a.createElement("div",{style:dt.formWidth},this.state.data&&this.state.data.length>0&&"text/plain"===this.state.fileType&&r.a.createElement("div",{style:dt.imageButton,onClick:function(){return e.upload()}},r.a.createElement("img",{style:dt.restoreImage,src:"../images/restore.svg",title:'Click here to restore data from "'+this.state.filename+'"',alt:"restore data from file"})),r.a.createElement("input",{style:dt.uploadControl,type:"file",onChange:function(t){return e._handleImageChange(t)}}))))}}]),a}(r.a.Component),pt={pageWidth:{width:"900px"},label:{color:"#555"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff"},linkButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},editBox:{width:"500px",marginBottom:"15px"},roleBlock:{padding:"5px",marginTop:"20px",float:"left",width:"400px",border:"1px solid #888",borderRadius:"4px",marginLeft:"10px"},roleLabel:{fontSize:"0.8em",color:"#aaa"},roleArea:{padding:"20px"},roleChip:{margin:"2px"},addImage:{width:"25px"},textFieldBox:{float:"left"},imageBox:{float:"left"},imageSize:{marginTop:"20px",width:"20px"},dlImageSize:{width:"24px"},searchBox:{boxShadow:"none"},floatLeftLabel:{float:"left",marginRight:"6px",marginTop:"4px",fontSize:"0.9em",fontWeight:"500"},floatLeft:{float:"left"},searchFloatLeft:{float:"left"},findBox:{padding:"10px",marginBottom:"5px",float:"right"},search:{marginTop:"2px",marginLeft:"15px",width:"18px",color:"#000"},copiedStyle:{fontSize:"10px",marginLeft:"25px",marginTop:"-22px",position:"absolute",float:"left",zIndex:"99"},organisationIdLabel:{width:"170px",float:"left",height:"24px"},copyImageSpan:{float:"left",marginTop:"-5px",marginLeft:"10px"},clipboardImage:{width:"24px",height:"24px;"}},mt=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={edit_organisation:!1,edit_organisation_id:"",edit_name:"",max_tpm:0,analytics_window_size_in_months:12,enabled:!0,bot_enabled:!0,analytics_enabled:!0,operator_enabled:!0,language_enabled:!0,copied_visible:"",view_organisation_id:!1,organisation:null,page_size:5,page:0},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"addNewOrganisation",value:function(){this.setState({edit_organisation:!0,organisation:null,edit_organisation_id:"",edit_name:"",max_tpm:0,analytics_window_size_in_months:12,enabled:!0,bot_enabled:!0,analytics_enabled:!0,operator_enabled:!0,language_enabled:!0})}},{key:"refreshSecurityId",value:function(){this.setState({edit_security_id:S.createGuid()})}},{key:"editOrganisation",value:function(e){e&&this.setState({edit_organisation:!0,organisation:e,id:e.id,name:e.name,max_tpm:S.defined(e.maxTransactionsPerMonth)?e.maxTransactionsPerMonth:0,analytics_window_size_in_months:S.defined(e.analyticsWindowInMonths)?e.analyticsWindowInMonths:12,enabled:!S.defined(e.enabled)||e.enabled,bot_enabled:!S.defined(e.botEnabled)||e.botEnabled,analytics_enabled:!S.defined(e.analyticsEnabled)||e.analyticsEnabled,operator_enabled:!S.defined(e.operatorEnabled)||e.operatorEnabled,language_enabled:!S.defined(e.languageEnabled)||e.languageEnabled})}},{key:"deleteOrganisationAsk",value:function(e){var t=this;e&&this.props.openDialog&&(this.props.openDialog('are you sure you want to remove "'+e.name+'" ?',"Remove Organisation",(function(e){t.deleteOrganisation(e)})),this.setState({organisation:e}))}},{key:"deleteOrganisation",value:function(e){e&&this.props.deleteOrganisation(this.state.organisation.id),this.props.closeDialog&&this.props.closeDialog()}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.props.getOrganisationList()}},{key:"getOrganisations",value:function(){var e=[],t=this.state.page*this.state.page_size,a=t+this.state.page_size;for(var n in this.props.organisation_list)n>=t&&n<a&&this.props.organisation_list.hasOwnProperty(n)&&e.push(this.props.organisation_list[n]);return e}},{key:"save",value:function(e){e?e.name.length>0?(this.props.updateOrganisation({id:S.defined(e.id)?e.id:"",name:e.name,maxTransactionsPerMonth:e.max_tpm,analyticsWindowInMonths:e.analytics_window_size_in_months,enabled:e.enabled,botEnabled:e.bot_enabled,analyticsEnabled:e.analytics_enabled,operatorEnabled:e.operator_enabled,languageEnabled:e.language_enabled}),this.setState({edit_organisation:!1,organisation:null})):this.props.setError("Incomplete Data","Please complete all fields.  Must have a name."):this.setState({edit_organisation:!1,organisation:null})}},{key:"backupAll",value:function(){window.open(x.get_backup_url(this.props.selected_organisation_id,"all"),"_blank")}},{key:"backup",value:function(e){window.open(x.get_backup_url(e,"specific"),"_blank")}},{key:"restore",value:function(e){e&&e.data&&e.data.length>0&&this.props.restore(e.data)}},{key:"downloadHtml",value:function(e,t){window.open(x.get_html_url(e,t.id),"_blank")}},{key:"viewIds",value:function(e){this.setState({view_organisation_id:!0,organisation:e})}},{key:"startCopiedVisible",value:function(e){var t=this;this.setState({copied_visible:e}),window.setTimeout((function(){t.setState({copied_visible:""})}),1e3)}},{key:"render",value:function(){var e=this,t=Jn.hasRole(this.props.user,["admin"]);return r.a.createElement("div",null,r.a.createElement(ct,{open:this.state.edit_organisation,id:this.state.id,name:this.state.name,enabled:this.state.enabled,onError:function(t,a){return e.props.showError(t,a)},onSave:function(t){return e.save(t)}}),r.a.createElement("div",{style:pt.searchBox},r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement("div",{style:pt.findBox},r.a.createElement("div",{style:pt.floatLeftLabel},"filter"),r.a.createElement("div",{style:pt.searchFloatLeft},r.a.createElement("input",{type:"text",value:this.props.user_filter,autoFocus:!0,style:pt.text,onKeyPress:function(t){return e.handleSearchTextKeydown(t)},onChange:function(t){e.props.setOrganisationFilter(t.target.value)}})),r.a.createElement("div",{style:pt.floatLeft},r.a.createElement("img",{style:pt.search,onClick:function(){return e.props.getOrganisationList()},src:"../images/dark-magnifying-glass.svg",title:"filter",alt:"filter"}))))),r.a.createElement("br",{clear:"both"}),r.a.createElement(Xe.a,{style:pt.pageWidth},r.a.createElement(at.a,null,r.a.createElement(it.a,null,r.a.createElement(st.a,{style:pt.tableHeaderStyle},r.a.createElement(rt.a,{style:pt.tableHeaderStyle},"organisation"),r.a.createElement(rt.a,{style:pt.tableHeaderStyle},"actions"))),r.a.createElement(nt.a,null,this.getOrganisations().map((function(a){return r.a.createElement(st.a,{key:a.id},r.a.createElement(rt.a,null,r.a.createElement("div",{style:pt.label},a.name)),r.a.createElement(rt.a,null,r.a.createElement("div",{style:pt.linkButton,onClick:function(){e.viewIds(a)}},r.a.createElement("img",{src:"../images/id.svg",style:pt.dlImageSize,title:"view knowledge base ids",alt:"ids"})),r.a.createElement("div",{style:pt.linkButton,onClick:function(){return e.editOrganisation(a)}},r.a.createElement("img",{src:"../images/edit.svg",style:pt.dlImageSize,title:"edit organisation",alt:"edit"})),r.a.createElement("div",{style:pt.linkButton,onClick:function(){return e.deleteOrganisationAsk(a)}},r.a.createElement("img",{src:"../images/delete.svg",style:pt.dlImageSize,title:"remove organisation",alt:"remove"})),r.a.createElement("div",{style:pt.linkButton,onClick:function(){return e.downloadHtml("search",a)}},r.a.createElement("img",{src:"../images/search.svg",style:pt.dlImageSize,title:"download this organisation's search interface (html)",alt:"download search interface"})),t&&r.a.createElement("div",{style:pt.linkButton,onClick:function(){return e.backup(a.id)}},r.a.createElement("img",{src:"../images/backup.svg",style:pt.dlImageSize,title:"backup this organisation",alt:"backup "+a.name}))))})),r.a.createElement(st.a,null,r.a.createElement(rt.a,{colSpan:2},t&&r.a.createElement("div",{style:pt.imageButton,onClick:function(){return e.backupAll()}},r.a.createElement("img",{style:pt.addImage,src:"../images/backup.svg",title:"backup all organisations",alt:"backup all organisations"})),r.a.createElement("div",{style:pt.imageButton,onClick:function(){return e.addNewOrganisation()}},r.a.createElement("img",{style:pt.addImage,src:"../images/add.svg",title:"add new organisation",alt:"add new organisation"})),r.a.createElement("br",null),t&&r.a.createElement(ut,{doUpload:function(t){return e.restore(t)},organisationId:this.props.selected_organisation_id,onError:function(t){return e.props.setError("Error",t)}}))))),r.a.createElement(ot.a,{rowsPerPageOptions:[5,10,25],component:"div",count:this.props.organisation_list.length,rowsPerPage:this.state.page_size,page:this.state.page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,a){return e.changePage(a)},onChangeRowsPerPage:function(t){return e.changePageSize(t.target.value)}})),r.a.createElement(J.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.view_organisation_id,disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"md",onClose:function(){return e.setState({view_details:!1})}},r.a.createElement(Q.a,null,null!=this.state.organisation?this.state.organisation.name:""," organisation-id"),r.a.createElement(V.a,null,r.a.createElement("div",null,r.a.createElement("div",{style:pt.organisationIdLabel},"organisation id"),r.a.createElement("div",{style:pt.floatLeft},this.state.organisation?this.state.organisation.id:""),r.a.createElement("span",{style:pt.copyImageSpan,title:"copy organisation id"},r.a.createElement("img",{src:"../images/clipboard-copy.svg",style:pt.clipboardImage,alt:"copy",onClick:function(){navigator.clipboard.writeText(e.state.organisation?e.state.organisation.id:""),e.startCopiedVisible(e.state.organisation.id)}}),null!=this.state.organisation&&this.state.copied_visible===this.state.organisation.id&&r.a.createElement("div",{style:pt.copiedStyle},"copied")),r.a.createElement("br",{clear:"both"}))),r.a.createElement(K.a,null,r.a.createElement(B.a,{variant:"outlined",color:"secondary",onClick:function(){return e.setState({view_organisation_id:!1})}},"Close"))))}}]),a}(r.a.Component),ht=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,user:e.appReducer.user,organisation_list:e.appReducer.organisation_list}}),(function(e){return Object(u.b)(Ne,e)}))(mt),gt=a(571),ft={pageWidth:{width:"900px"},label:{color:"#555"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff"},linkButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},disabledLinkButton:{float:"left",padding:"10px",color:"#eee"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},editBox:{width:"500px"},roleBlock:{padding:"5px",marginTop:"20px",float:"left",width:"400px",border:"1px solid #888",borderRadius:"4px",marginLeft:"10px"},roleLabel:{fontSize:"0.8em",color:"#aaa"},roleArea:{padding:"20px"},roleChip:{margin:"2px"},addImage:{width:"25px"},dlImageSize:{width:"24px"},dlImageSizeDisabled:{width:"24px",opacity:"0.2"},searchBox:{boxShadow:"none"},floatLeftLabel:{float:"left",marginRight:"6px",marginTop:"4px",fontSize:"0.9em",fontWeight:"500"},floatLeft:{float:"left"},searchFloatLeft:{float:"left"},findBox:{padding:"10px",marginBottom:"5px",float:"right"},search:{marginTop:"2px",marginLeft:"15px",width:"18px",color:"#000"}},yt=["admin","operator","crawler","manager"],_t=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={edit_user:!1,user:null,edit_user_id:"",edit_first_name:"",edit_surname:"",edit_email:"",edit_password:"",edit_roles:[],edit_kb_list:[],page_size:5,page:0},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"numUsers",value:function(e,t){var n=0;for(var r in this.props.user_list){var i=this.props.user_list[r],s=a.formatRoles(this.props.selected_organisation_id,i.roles);(t||s.length>0)&&(n+=1)}return n}},{key:"getUsers",value:function(e){var t=[],n=this.state.page*this.state.page_size,r=n+this.state.page_size,i=0;for(var s in this.props.user_list){var o=this.props.user_list[s],l=a.formatRoles(this.props.selected_organisation_id,o.roles);(e||l.length>0)&&(i>=n&&i<r&&t.push(o),i+=1)}return t}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"getAvailableRoles",value:function(){var e,t=[],a=Jn.hasRole(this.props.user,["admin"]),n=Object(g.a)(yt);try{for(n.s();!(e=n.n()).done;){var r,i=e.value,s=!1,o=Object(g.a)(this.state.edit_roles);try{for(o.s();!(r=o.n()).done;){i===r.value&&(s=!0)}}catch(l){o.e(l)}finally{o.f()}s||("admin"===i&&a||"admin"!==i)&&t.push(i)}}catch(l){n.e(l)}finally{n.f()}return t}},{key:"addNewUser",value:function(){this.setState({edit_user:!0,user:null,edit_user_id:"",edit_first_name:"",edit_surname:"",edit_email:"",edit_password:"",edit_roles:[],edit_kb_list:[]})}},{key:"editUser",value:function(e){var t=this;if(e){var a,n=e.roles.filter((function(e){return e.organisationId===t.props.selected_organisation_id})),r=[],i=Object(g.a)(n);try{for(i.s();!(a=i.n()).done;){var s=a.value;r.push(s.role)}}catch(h){i.e(h)}finally{i.f()}var o=[];if(e.operatorKBList){var l,c=Object(g.a)(e.operatorKBList);try{for(c.s();!(l=c.n()).done;){var d,u=l.value,p=Object(g.a)(this.props.knowledge_base_list);try{for(p.s();!(d=p.n()).done;){var m=d.value;m.kbId===u.kbId&&o.push(m)}}catch(h){p.e(h)}finally{p.f()}}}catch(h){c.e(h)}finally{c.f()}}this.setState({edit_user:!0,user:e,edit_user_id:e.id,edit_first_name:e.firstName,edit_surname:e.surname,edit_email:e.email,edit_password:"",edit_roles:r,edit_kb_list:o})}}},{key:"fillNames",value:function(){function e(e){return e.length>0?e.slice(0,1).toUpperCase()+e.slice(1):e}if(this.state.edit_email.length>0&&this.state.edit_email.indexOf("@")>0){var t=this.state.edit_email.split("@")[0].split("."),a="",n="";0===this.state.edit_first_name.length&&(a=e(t[0])),0===this.state.edit_surname.length&&t.length>1&&(n=e(t[1])),a.length>0&&n.length>0?this.setState({edit_first_name:a,edit_surname:n}):a.length>0?this.setState({edit_first_name:a}):n.length>0&&this.setState({edit_surname:n})}}},{key:"removeRoleFromUser",value:function(e){var t,a=[],n=Object(g.a)(this.state.edit_roles);try{for(n.s();!(t=n.n()).done;){var r=t.value;e!==r&&a.push(r)}}catch(i){n.e(i)}finally{n.f()}this.setState({edit_roles:a})}},{key:"addRoleToUser",value:function(e){var t=JSON.parse(JSON.stringify(this.state.edit_roles));t.push(e),this.setState({edit_roles:t})}},{key:"deleteUserAsk",value:function(e,t){var a=this;e&&this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0?(this.props.openDialog("are you sure you want to remove "+e.firstName+" "+e.surname+"?","Remove User",(function(e){a.deleteUser(e)})),this.setState({user:e})):this.props.setError("No Organisation","Please select an organisation from the drop-down box.")}},{key:"deleteUser",value:function(e){e&&this.props.deleteUser(this.props.selected_organisation_id,this.state.user.id),this.props.closeDialog&&this.props.closeDialog()}},{key:"editCancel",value:function(){this.setState({edit_user:!1,user:null}),this.state.closeDialog&&this.state.closeDialog()}},{key:"editOk",value:function(){this.state.edit_first_name.length>0&&this.state.edit_surname.length>0&&this.state.edit_email.length>0&&(this.state.edit_user_id.length>0||this.state.edit_password.length>0)?a.hasOperatorRole(this.state.edit_roles)&&0===this.state.edit_kb_list.length?this.props.setError("Incomplete Data","An operator must have at least one knowledge base associated with it."):(this.props.updateUser(this.props.selected_organisation_id,this.state.edit_user_id,this.state.edit_first_name,this.state.edit_surname,this.state.edit_email,this.state.edit_password,this.state.edit_roles,this.state.edit_kb_list),this.setState({edit_user:!1,user:null})):this.props.setError("Incomplete Data","Please complete all fields.  Must have email-address, first-name, surname, and at least one role.  New Accounts must have a password.")}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.props.getUsers()}},{key:"removeKBFromUser",value:function(e){var t,a=[],n=Object(g.a)(this.state.edit_kb_list);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.kbId!==r.kbId&&a.push(r)}}catch(i){n.e(i)}finally{n.f()}this.setState({edit_kb_list:a})}},{key:"addKBToUser",value:function(e){var t=JSON.parse(JSON.stringify(this.state.edit_kb_list));t.push(e),this.setState({edit_kb_list:t})}},{key:"getAvailableKnowledgeBases",value:function(){var e,t=[],a=Object(g.a)(this.props.knowledge_base_list);try{for(a.s();!(e=a.n()).done;){var n,r=e.value,i=!1,s=Object(g.a)(this.state.edit_kb_list);try{for(s.s();!(n=s.n()).done;){var o=n.value;r.kbId===o.kbId&&(i=!0)}}catch(l){s.e(l)}finally{s.f()}i||t.push(r)}}catch(l){a.e(l)}finally{a.f()}return t}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0}},{key:"render",value:function(){var e=this,t=Jn.hasRole(this.props.user,["admin"]),n=Jn.hasRole(this.props.user,["manager"]);return r.a.createElement("div",null,this.isVisible()&&r.a.createElement("div",null,r.a.createElement("div",{style:ft.searchBox},r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement("div",{style:ft.findBox},r.a.createElement("div",{style:ft.floatLeftLabel},"filter"),r.a.createElement("div",{style:ft.searchFloatLeft},r.a.createElement("input",{type:"text",value:this.props.user_filter,autoFocus:!0,style:ft.text,onKeyPress:function(t){return e.handleSearchTextKeydown(t)},onChange:function(t){e.props.setUserFilter(t.target.value)}})),r.a.createElement("div",{style:ft.floatLeft},r.a.createElement("img",{style:ft.search,onClick:function(){return e.props.getUsers()},src:"../images/dark-magnifying-glass.svg",title:"filter",alt:"filter"}))))),r.a.createElement("br",{clear:"both"}),r.a.createElement(Xe.a,{style:ft.pageWidth},r.a.createElement(at.a,null,r.a.createElement(it.a,null,r.a.createElement(st.a,{style:ft.tableHeaderStyle},r.a.createElement(rt.a,{style:ft.tableHeaderStyle},"user name"),r.a.createElement(rt.a,{style:ft.tableHeaderStyle},"first name"),r.a.createElement(rt.a,{style:ft.tableHeaderStyle},"surname"),r.a.createElement(rt.a,{style:ft.tableHeaderStyle},"roles"),r.a.createElement(rt.a,{style:ft.tableHeaderStyle},"actions"))),r.a.createElement(nt.a,null,this.getUsers(t).map((function(i){var s=Jn.canEdit(i,t,n),o=Jn.canDelete(i,e.props.user,t,n);return r.a.createElement(st.a,{key:i.id},r.a.createElement(rt.a,null,r.a.createElement("div",{style:ft.label},i.email)),r.a.createElement(rt.a,null,r.a.createElement("div",{style:ft.label},i.firstName)),r.a.createElement(rt.a,null,r.a.createElement("div",{style:ft.label},i.surname)),r.a.createElement(rt.a,null,r.a.createElement("div",{style:ft.label},a.formatRoles(e.props.selected_organisation_id,i.roles))),r.a.createElement(rt.a,null,!s&&r.a.createElement("div",{style:ft.disabledLinkButton,title:"cannot edit this user"},r.a.createElement("img",{src:"../images/edit.svg",style:ft.dlImageSizeDisabled,title:"cannot edit this user",alt:"cannot edit this user"})),s&&r.a.createElement("div",{style:ft.linkButton,title:"Edit this user",onClick:function(){return e.editUser(i)}},r.a.createElement("img",{src:"../images/edit.svg",style:ft.dlImageSize,title:"edit user",alt:"edit"})),!o&&r.a.createElement("div",{style:ft.disabledLinkButton,title:"cannot remove this user"},r.a.createElement("img",{src:"../images/delete.svg",style:ft.dlImageSizeDisabled,title:"cannot remove this user",alt:"cannot remove this user"})),o&&r.a.createElement("div",{style:ft.linkButton,title:"Remove this user",onClick:function(){return e.deleteUserAsk(i,t)}},r.a.createElement("img",{src:"../images/delete.svg",style:ft.dlImageSize,title:t?"remove user":"remove user roles",alt:"remove"}))))})),r.a.createElement(st.a,null,r.a.createElement(rt.a,null),r.a.createElement(rt.a,null),r.a.createElement(rt.a,null),r.a.createElement(rt.a,null),r.a.createElement(rt.a,null,this.props.selected_organisation_id.length>0&&(t||n)&&r.a.createElement("div",{style:ft.imageButton,onClick:function(){return e.addNewUser()}},r.a.createElement("img",{style:ft.addImage,src:"../images/add.svg",title:"add new user",alt:"add new user"})))),r.a.createElement(st.a,null,r.a.createElement(rt.a,{colSpan:5},r.a.createElement(ot.a,{rowsPerPageOptions:[5,10,25],component:"div",count:this.numUsers(this.props.selected_organisation_id,t),rowsPerPage:this.state.page_size,page:this.state.page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,a){return e.changePage(a)},onChangeRowsPerPage:function(t){return e.changePageSize(t.target.value)}})))))),r.a.createElement(J.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.edit_user,disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"md",onClose:function(){return e.setState({edit_user:!1,user:null})}},r.a.createElement(Q.a,null,this.state.edit_user_id?"Edit User":"Add New User"),r.a.createElement(V.a,null,r.a.createElement(N.a,{autoFocus:!0,style:ft.editBox,placeholder:"email",label:"email",value:this.state.edit_email,onBlur:function(){return e.fillNames()},onChange:function(t){return e.setState({edit_email:t.target.value})}}),r.a.createElement(N.a,{style:ft.editBox,placeholder:"first name",label:"first name",value:this.state.edit_first_name,onChange:function(t){return e.setState({edit_first_name:t.target.value})}}),r.a.createElement(N.a,{style:ft.editBox,placeholder:"surname",label:"surname",value:this.state.edit_surname,onChange:function(t){return e.setState({edit_surname:t.target.value})}}),r.a.createElement(N.a,{style:ft.editBox,placeholder:"password",label:"password",type:"password",value:this.state.edit_password,onChange:function(t){return e.setState({edit_password:t.target.value})}}),r.a.createElement("div",null,r.a.createElement("div",{style:ft.roleBlock},r.a.createElement("div",{style:ft.roleLabel},"user roles"),r.a.createElement("div",{style:ft.roleArea},this.state.edit_roles.map((function(t){return r.a.createElement(gt.a,{key:t,color:"secondary",style:ft.roleChip,onClick:function(){return e.removeRoleFromUser(t)},label:t,variant:"outlined"})})))),r.a.createElement("div",{style:ft.roleBlock},r.a.createElement("div",{style:ft.roleLabel},"available roles"),r.a.createElement("div",{style:ft.roleArea},this.getAvailableRoles().map((function(t){return r.a.createElement(gt.a,{key:t,color:"primary",style:ft.roleChip,onClick:function(){return e.addRoleToUser(t)},label:t,variant:"outlined"})}))))),a.hasOperatorRole(this.state.edit_roles)&&r.a.createElement("div",null,r.a.createElement("div",{style:ft.roleBlock},r.a.createElement("div",{style:ft.roleLabel},"operator's knowledge bases"),r.a.createElement("div",{style:ft.roleArea},this.state.edit_kb_list.map((function(t){return r.a.createElement(gt.a,{key:t.kbId,color:"secondary",style:ft.roleChip,onClick:function(){return e.removeKBFromUser(t)},label:t.name,variant:"outlined"})})))),r.a.createElement("div",{style:ft.roleBlock},r.a.createElement("div",{style:ft.roleLabel},"operator available knowledge bases"),r.a.createElement("div",{style:ft.roleArea},this.getAvailableKnowledgeBases().map((function(t){return r.a.createElement(gt.a,{key:t.kbId,color:"primary",style:ft.roleChip,onClick:function(){return e.addKBToUser(t)},label:t.name,variant:"outlined"})})))))),r.a.createElement(K.a,null,r.a.createElement(B.a,{color:"primary",onClick:function(){return e.editCancel()}},"Cancel"),r.a.createElement(B.a,{variant:"outlined",color:"secondary",onClick:function(){return e.editOk()}},"Save")))))}}],[{key:"formatRoles",value:function(e,t){var a,n="",r=Object(g.a)(t);try{for(r.s();!(a=r.n()).done;){var i=a.value;i.organisationId!==e&&"admin"!==i.role||("admin"===i.role&&-1===n.indexOf("admin")||"admin"!==i.role)&&(n.length>0&&(n+=", "),n+=i.role)}}catch(s){r.e(s)}finally{r.f()}return n}},{key:"hasOperatorRole",value:function(e){if(e){var t,a=Object(g.a)(e);try{for(a.s();!(t=a.n()).done;){if("operator"===t.value)return!0}}catch(n){a.e(n)}finally{a.f()}}return!1}}]),a}(r.a.Component),vt=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,user_list:e.appReducer.user_list,user_filter:e.appReducer.user_filter,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,knowledge_base_list:e.appReducer.knowledge_base_list,user:e.appReducer.user}}),(function(e){return Object(u.b)(Ne,e)}))(_t),bt=a(564),wt=a(560),Et={tableStyle:{marginTop:"10px",fontFamily:"Open Sans, sans-serif",fontSize:"12px",width:"90%"},tHeader:{height:"22px",marginBottom:"5px",backgroundColor:"#f0f0f0"},tCol:{height:"22px",marginBottom:"5px",backgroundColor:"#f0f0f0"},tCell:{backgroundColor:"#c0c0c0"},legenda:{float:"left",marginTop:"20px"},activeText:{backgroundColor:"#eed000",float:"left",width:"100px",fontFamily:"Open Sans, sans-serif",fontSize:"12px",fontWeight:"900",borderRadius:"2px",textAlign:"center",padding:"5px"},inactiveText:{backgroundColor:"#c0c0c0",float:"left",width:"100px",fontFamily:"Open Sans, sans-serif",fontSize:"12px",fontWeight:"900",borderRadius:"2px",textAlign:"center",padding:"5px",marginLeft:"10px"},button1:{float:"left",padding:"5px",marginLeft:"100px",marginTop:"-10px"},button2:{float:"left",padding:"5px",marginLeft:"10px",marginTop:"-10px"},labelTop:{marginTop:"10px",fontSize:"0.9em",fontWeight:"600"}},kt=["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],xt=["mon","tue","wed","thu","fri","sat","sun"],St="mon-0,tue-0,wed-0,thu-0,fri-0,sat-0,sun-0,mon-1,tue-1,wed-1,thu-1,fri-1,sat-1,sun-1,mon-2,tue-2,wed-2,thu-2,fri-2,sat-2,sun-2,mon-3,tue-3,wed-3,thu-3,fri-3,sat-3,sun-3,mon-4,tue-4,wed-4,thu-4,fri-4,sat-4,sun-4,mon-5,tue-5,wed-5,thu-5,fri-5,sat-5,sun-5,mon-6,tue-6,wed-6,thu-6,fri-6,sat-6,sun-6,mon-7,tue-7,wed-7,thu-7,fri-7,sat-7,sun-7,mon-8,tue-8,wed-8,thu-8,fri-8,sat-8,sun-8,mon-9,tue-9,wed-9,thu-9,fri-9,sat-9,sun-9,mon-10,tue-10,wed-10,thu-10,fri-10,sat-10,sun-10,mon-11,tue-11,wed-11,thu-11,fri-11,sat-11,sun-11,mon-12,tue-12,wed-12,thu-12,fri-12,sat-12,sun-12,mon-13,tue-13,wed-13,thu-13,fri-13,sat-13,sun-13,mon-14,tue-14,wed-14,thu-14,fri-14,sat-14,sun-14,mon-15,tue-15,wed-15,thu-15,fri-15,sat-15,sun-15,mon-16,tue-16,wed-16,thu-16,fri-16,sat-16,sun-16,mon-17,tue-17,wed-17,thu-17,fri-17,sat-17,sun-17,mon-18,tue-18,wed-18,thu-18,fri-18,sat-18,sun-18,mon-19,tue-19,wed-19,thu-19,fri-19,sat-19,sun-19,mon-20,tue-20,wed-20,thu-20,fri-20,sat-20,sun-20,mon-21,tue-21,wed-21,thu-21,fri-21,sat-21,sun-21,mon-22,tue-22,wed-22,thu-22,fri-22,sat-22,sun-22,mon-23,tue-23,wed-23,thu-23,fri-23,sat-23,sun-23",Ct=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={onSave:e.onSave,time:e.time,time_map:n.setupTimeMap(e.time),has_error:!1},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){var e="";for(var t in this.state.time_map)1===this.state.time_map[t]&&(e.length>0&&(e+=","),e+=t);this.state.onSave&&this.state.onSave(e)}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(null!==e){var t=this.setupTimeMap(e.time);this.setState({time:e.time,onSave:e.onSave,time_map:t})}}},{key:"setupTimeMap",value:function(e){var t={};return e&&e.split(",").map((function(e){return t[e]=1,t[e]})),t}},{key:"gs",value:function(e){return 1===this.state.time_map[e]?{backgroundColor:"#eed000"}:{backgroundColor:"#c0c0c0"}}},{key:"clearAll",value:function(){this.setState({time_map:this.setupTimeMap(""),time:""}),this.state.onSave&&this.state.onSave("")}},{key:"selectAll",value:function(){this.setState({time_map:this.setupTimeMap(St),time:St}),this.state.onSave&&this.state.onSave(St)}},{key:"select",value:function(e){var t=this.state.time_map;if("all"===e)for(var a=function(e){xt.map((function(a){var n=a+"-"+e;return 1===t[n]?t[n]=0:t[n]=1,t[n]}))},n=0;n<24;n++)a(n);else if(e.indexOf("-")>0)1===t[e]?t[e]=0:t[e]=1;else if(xt.indexOf(e)>=0)for(var r=0;r<24;r++){var i=e+"-"+r;1===t[i]?t[i]=0:t[i]=1}else xt.map((function(a){var n=a+"-"+e;return 1===t[n]?t[n]=0:t[n]=1,t[n]}));this.setState({time_map:t}),this.handleSave()}},{key:"timeStr",value:function(){var e=(new Date).toGMTString(),t=e.split(",")[0],a=e.split(" ")[4].split(":");return t+", "+(a[0]+":"+a[1])}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"time-select.js: Something went wrong."):r.a.createElement("div",null,r.a.createElement("div",{style:Et.labelTop},"all times in GMT (now ",this.timeStr(),")"),r.a.createElement("table",{style:Et.tableStyle},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{onClick:function(){return e.select("all")}}),kt.map((function(t,a){return r.a.createElement("td",{key:"time-"+a,onClick:function(){return e.select(""+a)},style:Et.tHeader},t)}))),r.a.createElement("tr",null,r.a.createElement("td",{onClick:function(){return e.select("mon")},style:Et.tCol},"Monday"),kt.map((function(t,a){return r.a.createElement("td",{key:"mon-"+a,onClick:function(){return e.select("mon-"+a)},style:e.gs("mon-"+a)})}))),r.a.createElement("tr",null,r.a.createElement("td",{onClick:function(){return e.select("tue")},style:Et.tCol},"Tuesday"),kt.map((function(t,a){return r.a.createElement("td",{key:"tue-"+a,onClick:function(){return e.select("tue-"+a)},style:e.gs("tue-"+a)})}))),r.a.createElement("tr",null,r.a.createElement("td",{onClick:function(){return e.select("wed")},style:Et.tCol},"Wednesday"),kt.map((function(t,a){return r.a.createElement("td",{key:"wed-"+a,onClick:function(){return e.select("wed-"+a)},style:e.gs("wed-"+a)})}))),r.a.createElement("tr",null,r.a.createElement("td",{onClick:function(){return e.select("thu")},style:Et.tCol},"Thursday"),kt.map((function(t,a){return r.a.createElement("td",{key:"thu-"+a,onClick:function(){return e.select("thu-"+a)},style:e.gs("thu-"+a)})}))),r.a.createElement("tr",null,r.a.createElement("td",{onClick:function(){return e.select("fri")},style:Et.tCol},"Friday"),kt.map((function(t,a){return r.a.createElement("td",{key:"fri-"+a,onClick:function(){return e.select("fri-"+a)},style:e.gs("fri-"+a)})}))),r.a.createElement("tr",null,r.a.createElement("td",{onClick:function(){return e.select("sat")},style:Et.tCol},"Saturday"),kt.map((function(t,a){return r.a.createElement("td",{key:"sat-"+a,onClick:function(){return e.select("sat-"+a)},style:e.gs("sat-"+a)})}))),r.a.createElement("tr",null,r.a.createElement("td",{onClick:function(){return e.select("sun")},style:Et.tCol},"Sunday"),kt.map((function(t,a){return r.a.createElement("td",{key:"sun-"+a,onClick:function(){return e.select("sun-"+a)},style:e.gs("sun-"+a)})}))))),r.a.createElement("br",null),r.a.createElement("div",{style:Et.legenda},r.a.createElement("div",{style:Et.activeText},"active"),r.a.createElement("div",{style:Et.inactiveText},"inactive"),r.a.createElement("div",{style:Et.button1},r.a.createElement(B.a,{variant:"outlined",color:"secondary",onClick:function(){return e.clearAll()}},"clear all")),r.a.createElement("div",{style:Et.button2},r.a.createElement(B.a,{variant:"outlined",color:"secondary",onClick:function(){return e.selectAll()}},"select all"))))}}]),a}(n.Component),Ot="mon-0,tue-0,wed-0,thu-0,fri-0,sat-0,sun-0,mon-1,tue-1,wed-1,thu-1,fri-1,sat-1,sun-1,mon-2,tue-2,wed-2,thu-2,fri-2,sat-2,sun-2,mon-3,tue-3,wed-3,thu-3,fri-3,sat-3,sun-3",It={pageWidth:{width:"900px"},label:{color:"#555"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff"},linkButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},editBox:{width:"500px",marginBottom:"15px"},sidBox:{width:"350px",marginBottom:"15px"},roleBlock:{padding:"5px",marginTop:"20px",float:"left",width:"400px",border:"1px solid #888",borderRadius:"4px",marginLeft:"10px"},roleLabel:{fontSize:"0.8em",color:"#aaa"},roleArea:{padding:"20px"},roleChip:{margin:"2px"},addImage:{width:"25px"},textFieldBox:{float:"left"},imageBox:{float:"left"},imageSize:{marginTop:"20px",width:"20px"},dlImageSize:{width:"24px"},timeTabContent:{marginLeft:"40px"},paddingBottom:{display:"inline-block",marginBottom:"130px"},floatLeft:{float:"left"},copiedStyle:{fontSize:"10px",marginLeft:"25px",marginTop:"-22px",position:"absolute",float:"left",zIndex:"99"},lineHeight:{height:"30px"},organisationIdLabel:{width:"170px",float:"left",height:"24px"},copyImageSpan:{float:"left",marginTop:"-5px",marginLeft:"10px"},clipboardImage:{width:"24px",height:"24px;"}},Rt=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={selectedTab:"general",edit_knowledgebase:!1,edit_knowledgebase_id:"",knowledgeBase:null,edit_kb_id:"",edit_name:"",edit_email:"",edit_security_id:"",edit_enabled:!0,edit_max_queries_per_day:"0",edit_analytics_window_size_in_months:"0",edit_operator_enabled:!0,edit_capacity_warnings:!0,edit_created:0,edit_index_optimization_schedule:Ot,view_ids:!1,copied_visible:"",kb:null,page_size:5,page:0},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"addNewKnowledgeBase",value:function(){this.setState({edit_knowledgebase:!0,knowledgeBase:null,edit_knowledgebase_id:"",edit_name:"",edit_email:"",edit_enabled:!0,edit_max_queries_per_day:"0",edit_analytics_window_size_in_months:"0",edit_operator_enabled:!0,edit_capacity_warnings:!0,edit_created:0,edit_security_id:S.createGuid(),edit_index_optimization_schedule:Ot})}},{key:"refreshSecurityId",value:function(){this.setState({edit_security_id:S.createGuid()})}},{key:"editKnowledgeBase",value:function(e){e&&this.setState({edit_knowledgebase:!0,knowledgeBase:e,edit_knowledgebase_id:e.kbId,edit_name:e.name,edit_email:e.email,edit_security_id:e.securityId,edit_enabled:e.enabled,edit_max_queries_per_day:e.maxQueriesPerDay,edit_analytics_window_size_in_months:e.analyticsWindowInMonths,edit_operator_enabled:e.operatorEnabled,edit_capacity_warnings:e.capacityWarnings,edit_index_optimization_schedule:e.indexOptimizationSchedule,edit_created:e.created})}},{key:"optimizeIndexes",value:function(e){e&&e.kbId&&this.props.optimizeIndexes(this.props.selected_organisation_id,e.kbId)}},{key:"deleteKnowledgeBaseAsk",value:function(e){var t=this;e&&(this.props.openDialog('are you sure you want to remove "'+e.name+'" ?',"Remove Knowledge base",(function(e){t.deleteKnowledgeBase(e)})),this.setState({knowledgeBase:e}))}},{key:"deleteKnowledgeBase",value:function(e){e&&this.props.deleteKnowledgeBase(this.props.selected_organisation_id,this.state.knowledgeBase.kbId),this.props.closeDialog&&this.props.closeDialog()}},{key:"editCancel",value:function(){this.setState({edit_knowledgebase:!1,knowledgeBase:null})}},{key:"editOk",value:function(){this.state.edit_name.length>0?(this.props.updateKnowledgeBase(this.props.selected_organisation_id,this.state.edit_knowledgebase_id,this.state.edit_name,this.state.edit_email,this.state.edit_security_id,this.state.edit_enabled,this.state.edit_max_queries_per_day,this.state.edit_analytics_window_size_in_months,this.state.edit_operator_enabled,this.state.edit_capacity_warnings,this.state.edit_created,this.state.edit_index_optimization_schedule),this.setState({edit_knowledgebase:!1,knowledgeBase:null})):this.props.setError("Incomplete Data","Please complete all fields.")}},{key:"viewIds",value:function(e){this.setState({view_ids:!0,kb:e})}},{key:"downloadHtml",value:function(e,t){window.open(k.get_html_url(e,this.props.selected_organisation_id,t.kbId),"_blank")}},{key:"getKnowledgeBases",value:function(){var e=[],t=this.state.page*this.state.page_size,a=t+this.state.page_size;for(var n in this.props.knowledge_base_list)n>=t&&n<a&&e.push(this.props.knowledge_base_list[n]);return e}},{key:"updateSchedule",value:function(e){null!==e&&this.setState({edit_index_optimization_schedule:e})}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0}},{key:"startCopiedVisible",value:function(e){var t=this;this.setState({copied_visible:e}),window.setTimeout((function(){t.setState({copied_visible:""})}),1e3)}},{key:"render",value:function(){var e=this,t=this.state.selectedTab;return r.a.createElement("div",null,this.isVisible()&&r.a.createElement("div",null,r.a.createElement(Xe.a,{style:It.pageWidth},r.a.createElement(at.a,null,r.a.createElement(it.a,null,r.a.createElement(st.a,{style:It.tableHeaderStyle},r.a.createElement(rt.a,{style:It.tableHeaderStyle},"knowledge base"),r.a.createElement(rt.a,{style:It.tableHeaderStyle},"email queries to"),r.a.createElement(rt.a,{style:It.tableHeaderStyle},"actions"))),r.a.createElement(nt.a,null,this.getKnowledgeBases().map((function(t){return r.a.createElement(st.a,{key:t.kbId},r.a.createElement(rt.a,null,r.a.createElement("div",{style:It.label},t.name)),r.a.createElement(rt.a,null,r.a.createElement("div",{style:It.label},t.email)),r.a.createElement(rt.a,null,r.a.createElement("div",{style:It.linkButton,onClick:function(){return e.viewIds(t)}},r.a.createElement("img",{src:"../images/id.svg",style:It.dlImageSize,title:"view knowledge base ids",alt:"ids"})),r.a.createElement("div",{style:It.linkButton,onClick:function(){return e.editKnowledgeBase(t)}},r.a.createElement("img",{src:"../images/edit.svg",style:It.dlImageSize,title:"edit knowledge base",alt:"edit"})),r.a.createElement("div",{style:It.linkButton,onClick:function(){return e.optimizeIndexes(t)}},r.a.createElement("img",{src:"../images/optimize.svg",style:It.dlImageSize,title:"optimize knowledge base indexes",alt:"optimize"})),r.a.createElement("div",{style:It.linkButton,onClick:function(){return e.deleteKnowledgeBaseAsk(t)}},r.a.createElement("img",{src:"../images/delete.svg",style:It.dlImageSize,title:"remove knowledge base",alt:"remove"}))))})),r.a.createElement(st.a,null,r.a.createElement(rt.a,null),r.a.createElement(rt.a,null),r.a.createElement(rt.a,null,this.props.selected_organisation_id.length>0&&r.a.createElement("div",{style:It.imageButton,onClick:function(){return e.addNewKnowledgeBase()}},r.a.createElement("img",{style:It.addImage,src:"../images/add.svg",title:"add new user",alt:"add new user"})))))),r.a.createElement(ot.a,{rowsPerPageOptions:[5,10,25],component:"div",count:this.props.knowledge_base_list.length,rowsPerPage:this.state.page_size,page:this.state.page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,a){return e.changePage(a)},onChangeRowsPerPage:function(t){return e.changePageSize(t.target.value)}})),r.a.createElement(J.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.edit_knowledgebase,disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"lg",onClose:function(){return e.setState({edit_knowledgebase:!1,knowledgeBase:null})}},r.a.createElement(Q.a,null,this.state.edit_knowledgebase_id?"Edit Knowledge Base":"Add New Knowledge Base"),r.a.createElement(V.a,null,r.a.createElement(bt.a,{value:this.state.selectedTab,onChange:function(t,a){return e.setState({selectedTab:a})}},r.a.createElement(wt.a,{label:"general",value:"general",style:It.tab}),r.a.createElement(wt.a,{label:"index optimization schedule",value:"schedule",style:It.tab})),r.a.createElement("br",null),"general"===t&&r.a.createElement(Y.a,{container:!0,spacing:2},r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:3},r.a.createElement("div",null,"name")),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement(N.a,{autoFocus:!0,style:It.editBox,placeholder:"knowledge base name",value:this.state.edit_name,onChange:function(t){return e.setState({edit_name:t.target.value})}})),r.a.createElement(Y.a,{item:!0,xs:2}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:3},r.a.createElement("div",null,"email questions to")),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement(N.a,{style:It.editBox,placeholder:"email questions to",value:this.state.edit_email,onChange:function(t){return e.setState({edit_email:t.target.value})}})),r.a.createElement(Y.a,{item:!0,xs:2}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:3},r.a.createElement("div",null,"security id")),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement(N.a,{style:It.sidBox,disabled:!0,placeholder:"security id",label:"security id",value:this.state.edit_security_id,onChange:function(t){return e.setState({edit_security_id:t.target.value})}})),r.a.createElement(Y.a,{item:!0,xs:2},r.a.createElement("div",{style:It.imageBox},r.a.createElement("img",{title:"generate new security id",alt:"refresh",src:"../images/refresh.svg",onClick:function(){return e.refreshSecurityId()},style:It.imageSize}))),r.a.createElement(Y.a,{item:!0,xs:2}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(lt.a,{checked:this.state.edit_enabled,onChange:function(t){e.setState({edit_enabled:t.target.checked})},value:"enable this knowledge-base?",inputProps:{"aria-label":"primary checkbox"}}),"knowledge-base enabled?"),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(lt.a,{checked:this.state.edit_operator_enabled,onChange:function(t){e.setState({edit_operator_enabled:t.target.checked})},value:"enable operator access?",inputProps:{"aria-label":"primary checkbox"}}),"operator enabled?"),r.a.createElement(Y.a,{item:!0,xs:2}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(lt.a,{checked:this.state.edit_capacity_warnings,onChange:function(t){e.setState({edit_capacity_warnings:t.target.checked})},value:"enable capacity warnings?",inputProps:{"aria-label":"primary checkbox"}}),"capacity-warnings on?"),r.a.createElement(Y.a,{item:!0,xs:5}),r.a.createElement(Y.a,{item:!0,xs:2}),r.a.createElement(Y.a,{item:!0,xs:7},r.a.createElement("div",null,"maximum number of queries per day (0 is no limits)")),r.a.createElement(Y.a,{item:!0,xs:2},r.a.createElement(N.a,{onChange:function(t){return e.setState({edit_max_queries_per_day:t.target.value})},placeholder:"max transactions per month",variant:"standard",fullWidth:!0,value:this.state.edit_max_queries_per_day})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:2}),r.a.createElement(Y.a,{item:!0,xs:7},r.a.createElement("div",null,"maximum analytics retention period in months (0 is no limits)")),r.a.createElement(Y.a,{item:!0,xs:2},r.a.createElement(N.a,{onChange:function(t){return e.setState({edit_analytics_window_size_in_months:t.target.value})},placeholder:"max analytics retention period in months",variant:"standard",fullWidth:!0,value:this.state.edit_analytics_window_size_in_months})),r.a.createElement(Y.a,{item:!0,xs:1})),"schedule"===t&&r.a.createElement("div",{style:It.timeTabContent},r.a.createElement(Ct,{time:this.state.edit_index_optimization_schedule,onSave:function(t){return e.updateSchedule(t)}}),r.a.createElement("div",{style:It.paddingBottom}))),r.a.createElement(K.a,null,r.a.createElement(B.a,{color:"primary",onClick:function(){return e.editCancel()}},"Cancel"),r.a.createElement(B.a,{variant:"outlined",color:"secondary",onClick:function(){return e.editOk()}},"Save")))),r.a.createElement(J.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.view_ids,disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"md",onClose:function(){return e.setState({view_ids:!1})}},r.a.createElement(Q.a,null,null!=this.state.kb?this.state.kb.name:""," IDS"),r.a.createElement(V.a,null,r.a.createElement("div",null,r.a.createElement("div",{style:It.lineHeight},r.a.createElement("div",{style:It.organisationIdLabel},"organisation id"),r.a.createElement("div",{style:It.floatLeft},this.props.selected_organisation_id?this.props.selected_organisation_id:""),r.a.createElement("span",{style:It.copyImageSpan,title:"copy organisation id"},r.a.createElement("img",{src:"../images/clipboard-copy.svg",style:It.clipboardImage,alt:"copy",onClick:function(){navigator.clipboard.writeText(e.props.selected_organisation_id?e.props.selected_organisation_id:""),e.startCopiedVisible(e.props.selected_organisation_id)}}),this.props.selected_organisation_id&&this.state.copied_visible===this.props.selected_organisation_id&&r.a.createElement("div",{style:It.copiedStyle},"copied")),r.a.createElement("br",{clear:"both"})),r.a.createElement("div",{style:It.lineHeight},r.a.createElement("div",{style:It.organisationIdLabel},"knowledge base id"),r.a.createElement("div",{style:It.floatLeft},this.state.kb?this.state.kb.kbId:""),r.a.createElement("span",{style:It.copyImageSpan,title:"copy knowledge base id"},r.a.createElement("img",{src:"../images/clipboard-copy.svg",style:It.clipboardImage,alt:"copy",onClick:function(){navigator.clipboard.writeText(e.state.kb?e.state.kb.kbId:""),e.startCopiedVisible(e.state.kb.kbId)}}),this.state.kb&&this.state.copied_visible===this.state.kb.kbId&&r.a.createElement("div",{style:It.copiedStyle},"copied")),r.a.createElement("br",{clear:"both"})),r.a.createElement("div",{style:It.lineHeight},r.a.createElement("div",{style:It.organisationIdLabel},"security id"),r.a.createElement("div",{style:It.floatLeft},this.state.kb?this.state.kb.securityId:""),r.a.createElement("span",{style:It.copyImageSpan,title:"copy security id"},r.a.createElement("img",{src:"../images/clipboard-copy.svg",style:It.clipboardImage,alt:"copy",onClick:function(){navigator.clipboard.writeText(e.state.kb?e.state.kb.securityId:""),e.startCopiedVisible(e.state.kb.securityId)}}),this.state.kb&&this.state.copied_visible===this.state.kb.securityId&&r.a.createElement("div",{style:It.copiedStyle},"copied")),r.a.createElement("br",{clear:"both"})))),r.a.createElement(K.a,null,r.a.createElement(B.a,{variant:"outlined",color:"secondary",onClick:function(){return e.setState({view_ids:!1})}},"Close"))))}}]),a}(n.Component),jt=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,knowledge_base_list:e.appReducer.knowledge_base_list}}),(function(e){return Object(u.b)(Ne,e)}))(Rt),Tt={label:{marginTop:"20px",marginBottom:"20px",color:"#555"},gridWidth:{width:"900px"},hr:{border:"0.5px solid #f0f0f0",width:"100%"},snapshotItem:{marginBottom:"5px"},refreshImage:{float:"right",width:"24px",cursor:"pointer"},addImage:{float:"right",marginTop:"-8px",width:"24px",cursor:"pointer"},addImageDisabled:{float:"right",marginTop:"-8px",width:"24px",backgroundColor:"#aaaaaa",borderRadius:"12px",cursor:"pointer"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff"},linkButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},downloadImage:{width:"24px"},tableWidth:{width:"100%"}},Dt=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={date_time:0},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"componentDidMount",value:function(){}},{key:"programUploaded",value:function(){}},{key:"programConverted",value:function(e){e&&(window.open().document.body.innerHTML+=e.replace(/\n/g,"<br />"))}},{key:"inventorizeDump",value:function(e){window.open(x.get_inventorize_dump_url(this.props.selected_organisation_id,this.props.selected_knowledgebase_id,e),"_blank")}},{key:"inventorizeDumpSpreadsheet",value:function(e){window.open(x.get_inventorize_dump_spreadhseet_url(this.props.selected_organisation_id,this.props.selected_knowledgebase_id,e),"_blank")}},{key:"deleteInventorizeAsk",value:function(e){var t=this;this.setState({date_time:e}),this.props.openDialog("are you sure you want to remove the report dated <b>"+C.unixTimeConvert(e)+"</b>?","Remove Inventory Report",(function(e){t.deleteReport(e)}))}},{key:"deleteReport",value:function(e){e&&this.props.deleteInventoryItem(this.state.date_time),this.props.closeDialog&&this.props.closeDialog()}},{key:"mindDump",value:function(){window.open(x.get_mind_dump_url(this.props.selected_organisation_id,this.props.selected_knowledgebase_id),"_blank")}},{key:"queryLogDump",value:function(){window.open(x.get_query_log_url(this.props.selected_organisation_id,this.props.selected_knowledgebase_id),"_blank")}},{key:"restore",value:function(e){var t=this;e&&(this.setState({uploading:!0}),C.restore(e,(function(){t.setState({uploading:!1,message_title:"Success",message:"data restored",message_callback:function(){t.setState({message:"",message_title:""})}})}),(function(e){t.props.setError("Error",e)})))}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Y.a,{container:!0,spacing:1,style:Tt.gridWidth},this.isVisible()&&r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement("div",{style:Tt.hr})),this.isVisible()&&r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement("div",{style:Tt.label},"Manage snapshots of your document inventory.",this.props.inventorize_busy&&r.a.createElement("span",null,"  SimSage is busy creating a new snapshot."))),this.isVisible()&&r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement(Xe.a,null,r.a.createElement(at.a,{style:Tt.tableWidth},r.a.createElement(it.a,null,r.a.createElement(st.a,{style:Tt.tableHeaderStyle},r.a.createElement(rt.a,{style:Tt.tableHeaderStyle},"created"),r.a.createElement(rt.a,{style:Tt.tableHeaderStyle},"action"))),r.a.createElement(nt.a,null,this.props.inventorize_list&&this.props.inventorize_list.timeList&&this.props.inventorize_list.timeList.map((function(t){return r.a.createElement(st.a,{key:t},r.a.createElement(rt.a,null,r.a.createElement("div",{style:Tt.snapshotItem},"content snapshot ",C.unixTimeConvert(t))),r.a.createElement(rt.a,null,r.a.createElement("div",{style:Tt.linkButton,onClick:function(){return e.inventorizeDump(t)}},r.a.createElement("img",{src:"../images/parquet.png",style:Tt.downloadImage,title:"download as parquet-file",alt:"download parquet"})),r.a.createElement("div",{style:Tt.linkButton,onClick:function(){return e.inventorizeDumpSpreadsheet(t)}},r.a.createElement("img",{src:"../images/xlsx.svg",style:Tt.downloadImage,title:"download as spreadsheet-xlsx",alt:"download spreadsheet"})),r.a.createElement("div",{style:Tt.linkButton,onClick:function(){return e.deleteInventorizeAsk(t)}},r.a.createElement("img",{src:"../images/delete.svg",style:Tt.downloadImage,title:"remove report",alt:"remove"}))))})),r.a.createElement(st.a,null,r.a.createElement(rt.a,null),r.a.createElement(rt.a,null,this.props.selected_organisation_id.length>0&&!this.props.inventorize_busy&&r.a.createElement("div",{style:Tt.imageButton,onClick:function(){e.props.createInventory(),e.props.forceInventoryBusy()}},r.a.createElement("img",{style:Tt.addImage,src:"../images/add.svg",title:"create a new snapshot",alt:"create new snapshot"})),this.props.selected_organisation_id.length>0&&this.props.inventorize_busy&&r.a.createElement("div",{style:Tt.imageButton},r.a.createElement("img",{style:Tt.addImageDisabled,src:"../images/add.svg",title:"SimSage is currently busy processing an inventory.  Please try again later.",alt:"create new snapshot"})),this.props.selected_organisation_id.length>0&&r.a.createElement("img",{src:"../images/refresh.svg",alt:"refresh",title:"refresh the inventory list",onClick:function(){e.props.getInventoryList(),e.props.getInventoryBusy()},style:Tt.refreshImage})))))))))}}]),a}(r.a.Component),Lt=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id,inventorize_list:e.appReducer.inventorize_list,knowledge_base_list:e.appReducer.knowledge_base_list,inventorize_busy:e.appReducer.inventorize_busy}}),(function(e){return Object(u.b)(Ne,e)}))(Dt),Pt=a(563),Bt=a(574),Nt=[{key:"none",value:"please select crawler type"},{key:"file",value:"file crawler"},{key:"web",value:"web crawler"},{key:"office365",value:"office 365 crawler"},{key:"dropbox",value:"dropbox crawler"},{key:"wordpress",value:"WordPress external crawler"},{key:"gdrive",value:"Google-drive crawler"},{key:"nfs",value:"nfs external crawler"},{key:"database",value:"database crawler"},{key:"restfull",value:"REST-full crawler"}],Ut=[{value:0,label:"File list"},{value:33,label:"GDPR compliance"},{value:66,label:"Semantic Search"},{value:100,label:"Language NLU"}];function zt(e){return e<10?"file":e<50?"gdpr":e<80?"search":"lang"}var Wt={customWidth:{width:"48%"},textField:{width:"98%"},formContent:{marginTop:"20px",width:"98%"},exportButton:{}},At=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,error_title:e.error_title,error_msg:e.error_msg,message_callback:null,message:"",message_title:"",organisation_id:S.defined(e.organisation_id)?e.organisation_id:"",kb_id:S.defined(e.kb_id)?e.kb_id:"",sourceId:S.defined(e.sourceId)?e.sourceId:"0",nodeId:S.defined(e.nodeId)?e.nodeId:"0",maxItems:S.defined(e.maxItems)?e.maxItems:"0",maxBotItems:S.defined(e.maxBotItems)?e.maxBotItems:"0",name:S.defined(e.name)?e.name:"",filesPerSecond:S.defined(e.filesPerSecond)?e.filesPerSecond:"0",crawlerType:S.defined(e.crawlerType)?e.crawlerType:"none",deleteFiles:e.deleteFiles,allowAnonymous:e.allowAnonymous,enablePreview:e.enablePreview,processingLevel:e.processingLevel},n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({filesPerSecond:e.filesPerSecond,crawlerType:S.defined(e.crawlerType)?e.crawlerType:"none",deleteFiles:e.deleteFiles,allowAnonymous:e.allowAnonymous,enablePreview:e.enablePreview,processingLevel:e.processingLevel,organisation_id:e.organisation_id,kb_id:e.kb_id,sourceId:e.sourceId,nodeId:e.nodeId,maxItems:e.maxItems,maxBotItems:e.maxBotItems,name:e.name,onSave:e.onSave,onError:e.onError,error_title:e.error_title,error_msg:e.error_msg}))}},{key:"construct_data",value:function(e){var t=S.defined(e.crawlerType)?e.crawlerType:this.state.crawlerType,a=(S.defined(e.allowAnonymous)?e.allowAnonymous:this.state.allowAnonymous)||"web"===t;return{filesPerSecond:S.defined(e.filesPerSecond)?e.filesPerSecond:this.state.filesPerSecond,crawlerType:t,deleteFiles:S.defined(e.deleteFiles)?e.deleteFiles:this.state.deleteFiles,allowAnonymous:a,enablePreview:S.defined(e.enablePreview)?e.enablePreview:this.state.enablePreview,processingLevel:S.defined(e.processingLevel)?e.processingLevel:this.state.processingLevel,name:S.defined(e.name)?e.name:this.state.name,sourceId:S.defined(e.sourceId)?e.sourceId:this.state.sourceId,nodeId:S.defined(e.nodeId)?e.nodeId:this.state.nodeId,maxItems:S.defined(e.maxItems)?e.maxItems:this.state.maxItems,maxBotItems:S.defined(e.maxBotItems)?e.maxBotItems:this.state.maxBotItems}}},{key:"setError",value:function(e,t){this.props.onError&&this.props.onError(e,t)}},{key:"change_callback",value:function(e){this.setState(e),this.state.onSave&&this.state.onSave(this.construct_data(e))}},{key:"testCrawler",value:function(){var e=this,t=this.state.name;S.testCrawler(this.state.organisation_id,this.state.kb_id,this.state.sourceId,(function(a){e.setState({message_callback:function(t){e.setState({message_title:"",message:""})},message_title:"Crawler Test",message:'Success!  crawler "'+t+'" can communicate with its intended end-point.'})}),(function(t){console.log("crawler-test error:"),console.log(t),e.setError("Error Testing Crawler",t)}))}},{key:"processingLevelToMark",value:function(){return"FILES"===this.state.processingLevel?0:"GDPR"===this.state.processingLevel?33:"SEARCH"===this.state.processingLevel?66:100}},{key:"setProcessingLevelFromMark",value:function(e){var t="NLU";0===e?t="FILES":33===e?t="GDPR":66===e&&(t="SEARCH"),this.state.onSave&&this.state.onSave(this.construct_data({processingLevel:t}))}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"crawler-general.js: Something went wrong."):r.a.createElement("div",{style:Wt.formContent},r.a.createElement(Ge,{callback:function(t){return e.state.message_callback(t)},open:this.state.message.length>0,message:this.state.message,title:this.state.message_title}),r.a.createElement(Y.a,{container:!0,spacing:2},r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:10},r.a.createElement(Pt.a,{value:this.state.crawlerType,disabled:""+this.state.sourceId!=="0",style:Wt.customWidth,onChange:function(t){e.change_callback({crawlerType:t.target.value})}},Nt.map((function(e){return r.a.createElement($e.a,{key:e.key,value:e.key},e.value)})))),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(N.a,{placeholder:"Crawler Name",autoFocus:!0,label:"Crawler Name",value:this.state.name,style:Wt.textField,onChange:function(t){e.change_callback({name:t.target.value})}})),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(N.a,{placeholder:"files per second throttle",label:"files per second throttle",value:this.state.filesPerSecond,style:Wt.textField,onChange:function(t){e.change_callback({filesPerSecond:t.target.value})}})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(N.a,{placeholder:"Maximum number of files (0 for no limits)",label:"Maximum number of files (0 for no limits)",value:this.state.maxItems,style:Wt.textField,onChange:function(t){e.change_callback({maxItems:t.target.value})}})),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(N.a,{placeholder:"Maximum number of QA (Bot) entries (0 for no limits)",label:"Maximum number of QA (Bot) entries (0 for no limits)",value:this.state.maxBotItems,style:Wt.textField,onChange:function(t){e.change_callback({maxBotItems:t.target.value})}})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(N.a,{placeholder:"node-id (0 for single node systems)",label:"node-id (0 for single node systems)",value:this.state.nodeId,style:Wt.textField,onChange:function(t){e.change_callback({nodeId:t.target.value})}})),r.a.createElement(Y.a,{item:!0,xs:6}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:{float:"left"},title:"At the end of a run through your data we can optionally check if files have been removed by seeing which files weren't seen during a run.  Check this option if you want files that no longer exist removed automtically from SimSage."},r.a.createElement(lt.a,{checked:this.state.deleteFiles,onChange:function(t){e.change_callback({deleteFiles:t.target.checked})},value:"delete files?",inputProps:{"aria-label":"primary checkbox"}}),"remove un-seen files?")),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:{float:"left"},title:"Our default web-search and bot-interfaces require anonymous access to the data gathered by this source.  Check this box if you want anonymous users to view the data in it. (always enabled for web-sources)."},r.a.createElement(lt.a,{checked:this.state.allowAnonymous||"web"===this.state.crawlerType,disabled:"web"===this.state.crawlerType,onChange:function(t){e.change_callback({allowAnonymous:t.target.checked})},value:"allow anonymous access to these files?",inputProps:{"aria-label":"primary checkbox"}}),"allow anonymous access to these files?")),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:{float:"left",width:"80%"},title:"Select what kind of processing you want done to these files"},r.a.createElement(Bt.a,{defaultValue:this.processingLevelToMark(),valueLabelFormat:zt,getAriaValueText:zt,"aria-labelledby":"crawler-level",onChange:function(t,a){return e.setProcessingLevelFromMark(a)},step:null,valueLabelDisplay:"auto",marks:Ut}))),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:{float:"left"},title:"Check this box if you preview images generated for each document.  Document search must be enabled for this to work."},r.a.createElement(lt.a,{checked:this.state.enablePreview&&("SEARCH"===this.state.processingLevel||"NLU"===this.state.processingLevel),disabled:"SEARCH"!==this.state.processingLevel&&"NLU"!==this.state.processingLevel,onChange:function(t){e.change_callback({enablePreview:t.target.checked})},value:"enable document image previews?",inputProps:{"aria-label":"primary checkbox"}}),"enable document image previews?")),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},this.state.sourceId&&this.state.sourceId>0&&r.a.createElement("div",null,r.a.createElement(B.a,{color:"secondary",variant:"outlined",style:Wt.exportButton,onClick:function(){return e.testCrawler()}},"Test Connection"))),r.a.createElement(Y.a,{item:!0,xs:6})))}}]),a}(n.Component),Ft={formContent:{marginTop:"20px",marginLeft:"20px"},textField:{marginRight:"10px",width:"500px"}},qt=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,file_username:C.defined(e.file_username)?e.file_username:"",file_password:C.defined(e.file_password)?e.file_password:"",file_server:C.defined(e.file_server)?e.file_server:"",file_domain:C.defined(e.file_domain)?e.file_domain:"",file_share_name:C.defined(e.file_share_name)?e.file_share_name:"",file_share_path:C.defined(e.file_share_path)?e.file_share_path:""},n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({file_username:e.file_username,file_password:e.file_password,file_domain:e.file_domain,file_server:e.file_server,file_share_name:e.file_share_name,file_share_path:e.file_share_path,onSave:e.onSave,onError:e.onError}))}},{key:"construct_data",value:function(e){return{file_username:C.defined(e.file_username)?e.file_username:this.state.file_username,file_password:C.defined(e.file_password)?e.file_password:this.state.file_password,file_domain:C.defined(e.file_domain)?e.file_domain:this.state.file_domain,file_server:C.defined(e.file_server)?e.file_server:this.state.file_server,file_share_name:C.defined(e.file_share_name)?e.file_share_name:this.state.file_share_name,file_share_path:C.defined(e.file_share_path)?e.file_share_path:this.state.file_share_path}}},{key:"change_callback",value:function(e){this.setState(e),this.state.onSave&&this.state.onSave(this.construct_data(e))}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"crawler-file.js: Something went wrong."):r.a.createElement("div",{style:Ft.formContent},r.a.createElement(N.a,{placeholder:"user name",label:"user name",value:this.state.file_username,onChange:function(t){e.change_callback({file_username:t.target.value})},style:Ft.textField}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.a,{placeholder:"password",label:"password",type:"password",value:this.state.file_password,onChange:function(t){e.change_callback({file_password:t.target.value})},style:Ft.textField}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.a,{placeholder:"domain (leave blank for default or no domain)",label:"domain",value:this.state.file_domain,onChange:function(t){e.change_callback({file_domain:t.target.value})},style:Ft.textField}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.a,{placeholder:"server (hostname or ip-address)",label:"server",value:this.state.file_server,onChange:function(t){e.change_callback({file_server:t.target.value})},style:Ft.textField}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.a,{placeholder:"share name",label:"share name",value:this.state.file_share_name,onChange:function(t){e.change_callback({file_share_name:t.target.value})},style:Ft.textField}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.a,{placeholder:"path inside share (optional)",label:"path inside share",value:this.state.file_share_path,onChange:function(t){e.change_callback({file_share_path:t.target.value})},style:Ft.textField}),r.a.createElement("br",null))}}]),a}(n.Component),Yt={formContent:{marginTop:"20px",width:"98%"},textField:{width:"98%"}},Mt=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={has_error:!1,onError:e.onError,onSave:e.onSave,web_base_url:C.defined(e.web_base_url)?e.web_base_url:"",web_css:C.defined(e.web_css)?e.web_css:"",web_css_ignore:C.defined(e.web_css_ignore)?e.web_css_ignore:"",web_extension_filter:C.defined(e.web_extension_filter)?e.web_extension_filter:"",web_extension_filter_ignore:C.defined(e.web_extension_filter_ignore)?e.web_extension_filter_ignore:"",web_article_filter_incl_csv:C.defined(e.web_article_filter_incl_csv)?e.web_article_filter_incl_csv:"",web_article_filter_excl_csv:C.defined(e.web_article_filter_excl_csv)?e.web_article_filter_excl_csv:""},n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({web_base_url:e.web_base_url,web_css:C.defined(e.web_css)?e.web_css:"",web_extension_filter:C.defined(e.web_extension_filter)?e.web_extension_filter:"",web_css_ignore:C.defined(e.web_css_ignore)?e.web_css_ignore:"",web_extension_filter_ignore:C.defined(e.web_extension_filter_ignore)?e.web_extension_filter_ignore:"",web_article_filter_incl_csv:C.defined(e.web_article_filter_incl_csv)?e.web_article_filter_incl_csv:"",web_article_filter_excl_csv:C.defined(e.web_article_filter_excl_csv)?e.web_article_filter_excl_csv:"",onSave:e.onSave,onError:e.onError}))}},{key:"construct_data",value:function(e){return{web_base_url:C.defined(e.web_base_url)?e.web_base_url:this.state.web_base_url,web_css:C.defined(e.web_css)?e.web_css:this.state.web_css,web_css_ignore:C.defined(e.web_css_ignore)?e.web_css_ignore:this.state.web_css_ignore,web_extension_filter:C.defined(e.web_extension_filter)?e.web_extension_filter:this.state.web_extension_filter,web_extension_filter_ignore:C.defined(e.web_extension_filter_ignore)?e.web_extension_filter_ignore:this.state.web_extension_filter_ignore,web_article_filter_incl_csv:C.defined(e.web_article_filter_incl_csv)?e.web_article_filter_incl_csv:this.state.web_article_filter_incl_csv,web_article_filter_excl_csv:C.defined(e.web_article_filter_excl_csv)?e.web_article_filter_excl_csv:this.state.web_article_filter_excl_csv}}},{key:"change_callback",value:function(e){this.setState(e),this.state.onSave&&this.state.onSave(this.construct_data(e))}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"crawler-web.js: Something went wrong."):r.a.createElement("div",{style:Yt.formContent},r.a.createElement(Y.a,{container:!0,spacing:2},r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:10},r.a.createElement(N.a,{placeholder:"http/s base name list (preferably https), one per line",multiline:!0,autoFocus:!0,variant:"outlined",rows:"3",label:"http/s base name list (preferably https), one per line",value:this.state.web_base_url,onChange:function(t){e.change_callback({web_base_url:t.target.value})},style:Yt.textField})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(N.a,{label:"file extensions to include (csv list)",variant:"outlined",value:this.state.web_extension_filter,onChange:function(t){e.change_callback({web_extension_filter:t.target.value})},style:Yt.textField})),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(N.a,{label:"file extensions to exclude (csv list)",variant:"outlined",value:this.state.web_extension_filter_ignore,onChange:function(t){e.change_callback({web_extension_filter_ignore:t.target.value})},style:Yt.textField})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(N.a,{placeholder:"css/html root fragments to include csv",multiline:!0,variant:"outlined",rows:"3",label:"css/html root fragments to include csv (e.g. div.class or id)",value:this.state.web_css,onChange:function(t){e.change_callback({web_css:t.target.value})},style:Yt.textField})),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(N.a,{placeholder:"css/html root fragments to exclude csv",multiline:!0,variant:"outlined",rows:"3",label:"css/html root fragments to exclude csv (e.g. div.class or id)",value:this.state.web_css_ignore,onChange:function(t){e.change_callback({web_css_ignore:t.target.value})},style:Yt.textField})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(N.a,{placeholder:"csv words, include articles by words [optional]",multiline:!0,variant:"outlined",rows:"3",label:"csv words, include articles by words [optional]",value:this.state.web_article_filter_incl_csv,onChange:function(t){e.change_callback({web_article_filter_incl_csv:t.target.value})},style:Yt.textField})),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(N.a,{placeholder:"csv words, exclude articles by words [optional]",multiline:!0,variant:"outlined",rows:"3",label:"csv words, exclude articles by words [optional]",value:this.state.web_article_filter_excl_csv,onChange:function(t){e.change_callback({web_article_filter_excl_csv:t.target.value})},style:Yt.textField})),r.a.createElement(Y.a,{item:!0,xs:1})))}}]),a}(n.Component),Ht=[{key:"none",value:"please select database type"},{key:"mysql",value:"MySQL"},{key:"postgresql",value:"Postgresql"},{key:"microsoftsql",value:"Microsoft SQL"}],Jt={formContent:{marginTop:"20px",width:"98%"},fieldWidth:{width:"100%"},dbType:{float:"right",marginTop:"6px",marginRight:"10px"}},Kt=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,db_username:e.db_username?e.db_username:"",db_password:e.db_password?e.db_password:"",db_jdbc:e.db_jdbc?e.db_jdbc:"",db_type:S.defined(e.db_type)?e.db_type:"none",db_query:e.db_query?e.db_query:"",db_pk:e.db_pk?e.db_pk:"",db_template:e.db_template?e.db_template:"",db_text:e.db_text?e.db_text:"",metadata_list:e.metadata_list?e.metadata_list:[]},n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({file_username:e.file_username,db_username:e.db_username,db_password:e.db_password,db_jdbc:e.db_jdbc,db_type:S.defined(e.db_type)?e.db_type:"none",db_query:e.db_query,db_pk:e.db_pk,db_template:e.db_template,db_text:e.db_text,metadata_list:e.metadata_list,onSave:e.onSave,onError:e.onError}))}},{key:"construct_data",value:function(e){return{db_username:S.defined(e.db_username)?e.db_username:this.state.db_username,db_password:S.defined(e.db_password)?e.db_password:this.state.db_password,db_jdbc:S.defined(e.db_jdbc)?e.db_jdbc:this.state.db_jdbc,db_type:S.defined(e.db_type)?e.db_type:this.state.db_type,db_query:S.defined(e.db_query)?e.db_query:this.state.db_query,db_pk:S.defined(e.db_pk)?e.db_pk:this.state.db_pk,db_template:S.defined(e.db_template)?e.db_template:this.state.db_template,db_text:S.defined(e.db_text)?e.db_text:this.state.db_text,metadata_list:S.defined(e.metadata_list)?e.metadata_list:this.state.metadata_list}}},{key:"change_callback",value:function(e){this.setState(e),this.state.onSave&&this.state.onSave(this.construct_data(e))}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"crawler-database.js: Something went wrong."):r.a.createElement("div",{style:Jt.formContent},r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(N.a,{placeholder:"the user name for accessing this database",label:"user name",variant:"outlined",value:this.state.db_username,onChange:function(t){e.change_callback({db_username:t.target.value})},style:Jt.fieldWidth})),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(N.a,{placeholder:"password",label:"password (enter a value to change it)",type:"password",variant:"outlined",value:this.state.db_password,onChange:function(t){e.change_callback({db_password:t.target.value})},style:Jt.fieldWidth})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:10},r.a.createElement(N.a,{placeholder:"jdbc connection string, e.g. jdbc:microsoft:sqlserver://HOST:1433;DatabaseName=DATABASE",label:"jdbc connection string",variant:"outlined",value:this.state.db_jdbc,onChange:function(t){e.change_callback({db_jdbc:t.target.value})},style:Jt.fieldWidth})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1},r.a.createElement("div",{style:Jt.dbType},"Database")),r.a.createElement(Y.a,{item:!0,xs:3},r.a.createElement(Pt.a,{value:this.state.db_type,style:Jt.fieldWidth,onChange:function(t){e.change_callback({db_type:t.target.value})}},Ht.map((function(e){return r.a.createElement($e.a,{key:e.key,value:e.key},e.value)})))),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(N.a,{placeholder:"the name of the primary key field for this SELECT",label:"primary key name",variant:"outlined",value:this.state.db_pk,onChange:function(t){e.change_callback({db_pk:t.target.value})},style:Jt.fieldWidth})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:10},r.a.createElement(N.a,{placeholder:"SQL query, a valid SELECT statement, no other allowed",label:"sql query",variant:"outlined",multiline:!0,rows:3,value:this.state.db_query,onChange:function(t){e.change_callback({db_query:t.target.value})},style:Jt.fieldWidth})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:10},r.a.createElement(N.a,{placeholder:"sql text index template, an text template referencing SQL fields in square brackets [FIELD-NAME]",label:"sql text index template",variant:"outlined",multiline:!0,rows:7,value:this.state.db_text,onChange:function(t){e.change_callback({db_text:t.target.value})},style:Jt.fieldWidth})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:10},r.a.createElement(N.a,{placeholder:"sql html render template, an html template referencing SQL fields in square brackets [FIELD-NAME]",label:"sql html render template",variant:"outlined",multiline:!0,rows:7,value:this.state.db_template,onChange:function(t){e.change_callback({db_template:t.target.value})},style:Jt.fieldWidth})),r.a.createElement(Y.a,{item:!0,xs:1})))}}]),a}(n.Component),Vt=[{key:"none",display:null,field1:"",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"author",display:null,field1:"{author}",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"created",display:null,field1:"{created}",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"last modified",display:null,field1:"{lastmod}",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"title",display:null,field1:"{title}",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"image from binary-blob",display:null,field1:"binary-blob-image",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"image from base64",display:null,field1:"base64-image",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"image from url",display:null,field1:"url-image",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"category",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"two level category",display:"",field1:"",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"number range",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"monetary x 100 range",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"monetary range",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"star rating",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"select if true",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"csv string",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""}],Qt={formContent:{marginTop:"20px",width:"98%"},instructionLabel:{fontSize:"10px",marginLeft:"20px"},table:{marginTop:"10px",marginLeft:"20px",borderSpacing:"0",border:"1px solid #aaaaaa",borderRadius:"5px"},tableHead:{backgroundColor:"#aaaaaa",color:"#ffffff"},db_field:{verticalAlign:"top",width:"250px"},display:{width:"250px"},displayFieldWidth:{},tdDisplayFieldWidth:{verticalAlign:"top",width:"200px"},tdSort:{verticalAlign:"top"},sortLabel:{fontSize:"10px"},tdSort2:{float:"left",height:"32px",marginLeft:"15px"},metadata_dropdown_box:{marginLeft:"10px",width:"220px",padding:"5px",verticalAlign:"top",marginTop:"8px"},mdDropbox:{float:"left",marginLeft:"10px",width:"220px",padding:"5px",verticalAlign:"top"},metadata_field:{width:"200px",padding:"5px"},sort_field:{width:"100px",padding:"5px"},action_field:{width:"100px",padding:"5px"},metadata_dropdown:{marginLeft:"5px",width:"200px"},imageButton:{padding:"10px",color:"#888",cursor:"pointer"},addImage:{width:"25px",cursor:"pointer",color:"green"},deleteBox:{marginTop:"-14px",color:"#888",float:"left",cursor:"pointer"},upDownArrow:{float:"left",marginTop:"-16px",padding:"2px",fontSize:"26px",cursor:"pointer"},deleteImage:{width:"24px"},dbFieldWidth:{width:"250px"},tdMetadataFieldName:{verticalAlign:"top"},mdFieldWidth:{width:"200px"},tdAction:{float:"left",marginTop:"8px",verticalAlign:"top"}},Gt=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,metadata_list:e.metadata_list?e.metadata_list:[]},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({metadata_list:e.metadata_list,onSave:e.onSave,onError:e.onError}))}},{key:"construct_data",value:function(e){return Object(d.a)(Object(d.a)({},this.props.owner_data),{},{metadata_list:S.defined(e.metadata_list)?e.metadata_list:this.state.metadata_list})}},{key:"set_db",value:function(e,t,a){var n=this.state.metadata_list;t>=0&&t<n.length&&(n[t].db1=a,this.setState({metadata_list:n}),this.state.onSave&&this.state.onSave(this.construct_data(Object(d.a)(Object(d.a)({},this.state),{},{metadata_list:n}))))}},{key:"set_db_extra",value:function(e,t,a){var n=this.state.metadata_list;t>=0&&t<n.length&&(n[t].db2=a,this.setState({metadata_list:n}),this.state.onSave&&this.state.onSave(this.construct_data(Object(d.a)(Object(d.a)({},this.state),{},{metadata_list:n}))))}},{key:"set_md_type",value:function(e,t,a){var n=this.state.metadata_list;if(t>=0&&t<n.length){var r,i=null,s=Object(g.a)(Vt);try{for(s.s();!(r=s.n()).done;){var o=r.value;if(o.key===a){i=o;break}}}catch(l){s.e(l)}finally{s.f()}null!=i&&(n[t]=JSON.parse(JSON.stringify(i)),this.setState({metadata_list:n}),this.state.onSave&&this.state.onSave(this.construct_data(Object(d.a)(Object(d.a)({},this.state),{},{metadata_list:n}))))}}},{key:"setDisplayName",value:function(e,t,a){var n=this.state.metadata_list;t>=0&&t<n.length&&(n[t].display=a,this.setState({metadata_list:n}),this.state.onSave&&this.state.onSave(this.construct_data(Object(d.a)(Object(d.a)({},this.state),{},{metadata_list:n}))))}},{key:"setUserMetadataName1",value:function(e,t,a){var n=this.state.metadata_list;t>=0&&t<n.length&&(n[t].field1=a,this.setState({metadata_list:n}),this.state.onSave&&this.state.onSave(this.construct_data(Object(d.a)(Object(d.a)({},this.state),{},{metadata_list:n}))))}},{key:"setSort",value:function(e,t,a){var n=this.state.metadata_list;t>=0&&t<n.length&&(n[t].sort=a?"true":"false",this.setState({metadata_list:n}),this.state.onSave&&this.state.onSave(this.construct_data(Object(d.a)(Object(d.a)({},this.state),{},{metadata_list:n}))))}},{key:"setValue",value:function(e,t,a,n){var r=this.state.metadata_list;t>=0&&t<r.length&&(r[t][a]=n,this.setState({metadata_list:r}),this.state.onSave&&this.state.onSave(this.construct_data(Object(d.a)(Object(d.a)({},this.state),{},{metadata_list:r}))))}},{key:"setDefaultSort",value:function(e,t,a,n){var r=this.state.metadata_list;if(t>=0&&t<r.length){for(var i in r[t].sort_default=n?a:"",r)""+i!==""+t&&r.hasOwnProperty(i)&&(r[i].sort_default="");this.setState({metadata_list:r}),this.state.onSave&&this.state.onSave(this.construct_data(Object(d.a)(Object(d.a)({},this.state),{},{metadata_list:r})))}}},{key:"deleteMetadataItem",value:function(e){var t=[],a=""+e;for(var n in this.state.metadata_list)n!==a&&this.state.metadata_list.hasOwnProperty(n)&&t.push(this.state.metadata_list[n]);this.setState({metadata_list:t}),this.state.onSave&&this.state.onSave(this.construct_data(Object(d.a)(Object(d.a)({},this.state),{},{metadata_list:t})))}},{key:"addNewMetadataMapping",value:function(){var e=this.state.metadata_list;e.push(JSON.parse(JSON.stringify(Vt[0]))),this.setState({metadata_list:e}),this.state.onSave&&this.state.onSave(this.construct_data(Object(d.a)(Object(d.a)({},this.state),{},{metadata_list:e})))}},{key:"checkMetadataName",value:function(e){return e.key>="a"&&e.key<="z"||e.key>="A"&&e.key<="Z"||e.key>="0"&&e.key<="9"||"-"===e.key||(e.preventDefault(),e.stopPropagation(),!1)}},{key:"move_row_up",value:function(e,t){if(t>0){var a=this.state.metadata_list,n=a[t-1];a[t-1]=e,a[t]=n,this.setState({metadata_list:a})}}},{key:"move_row_down",value:function(e,t){var a=this.state.metadata_list;if(t+1<a.length){var n=a[t+1];a[t+1]=e,a[t]=n,this.setState({metadata_list:a})}}},{key:"needs_metadata_field",value:function(e){return"category"===e.key||"number range"===e.key||"two level category"===e.key||"monetary x 100 range"===e.key||"monetary range"===e.key||"star rating"===e.key||"select if true"===e.key||"csv string"===e.key}},{key:"render",value:function(){var e=this;if(this.state.has_error)return r.a.createElement("h1",null,"crawler-metadata-mapper.js: Something went wrong.");var t=this,a=this.state.metadata_list.length;return r.a.createElement("div",{style:Qt.formContent},r.a.createElement("div",{style:Qt.instructionLabel},"All rows in order of UI.  Use 'actions' arrows to re-arrange existing rows."),r.a.createElement("table",{style:Qt.table},r.a.createElement("thead",null,r.a.createElement("tr",{style:Qt.tableHead},r.a.createElement("td",{style:Qt.metadata_dropdown_box},"data-type"),r.a.createElement("td",{style:Qt.db_field},"source field"),r.a.createElement("td",{style:Qt.display},"UI display-name"),r.a.createElement("td",{style:Qt.metadata_field},"metadata name"),r.a.createElement("td",{style:Qt.sort_field},"sortable"),r.a.createElement("td",{style:Qt.action_field},"actions"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3},"\xa0")),this.state.metadata_list.map((function(e,n){return r.a.createElement("tr",{key:n},r.a.createElement("td",{style:Qt.mdDropbox},r.a.createElement(Pt.a,{value:e.key,style:Qt.metadata_dropdown,title:"select what kind of metadata field to use",onChange:function(a){t.set_md_type(e,n,a.target.value)}},Vt.map((function(e,t){return r.a.createElement($e.a,{key:t,value:e.key},e.key)})))),"two level category"!==e.key&&r.a.createElement("td",{style:Qt.db_field},r.a.createElement("input",{type:"text",placeholder:"source [field-name]",title:"the source-name field to use for this category",value:e.db1,onChange:function(a){t.set_db(e,n,a.target.value)},style:Qt.dbFieldWidth})),"two level category"===e.key&&r.a.createElement("td",{style:Qt.db_field},r.a.createElement("input",{type:"text",placeholder:"level 1 [field-name]",value:e.db1,title:"the first source field to use for this double category",onChange:function(a){t.set_db(e,n,a.target.value)},style:Qt.dbFieldWidth}),r.a.createElement("input",{type:"text",placeholder:"level 2 [field-name]",value:e.db2,title:"the second source field to use for this double category",onChange:function(a){t.set_db_extra(e,n,a.target.value)},style:Qt.dbFieldWidth})),r.a.createElement("td",{style:Qt.tdDisplayFieldWidth},null!==e.display&&r.a.createElement("span",null,r.a.createElement("input",{type:"text",placeholder:"UI display-name",title:"name displayed in the UI for this item",value:e.display,onChange:function(a){t.setDisplayName(e,n,a.target.value)}}))),r.a.createElement("td",{style:Qt.tdMetadataFieldName},t.needs_metadata_field(e)&&r.a.createElement("div",{style:Qt.mdFieldWidth},r.a.createElement("input",{type:"text",placeholder:"metadata name",value:e.field1,title:"metadata names should only contain 0..9, a..z, and A..Z",onKeyDown:function(e){return t.checkMetadataName(e)},onChange:function(a){t.setUserMetadataName1(e,n,a.target.value)}})),"true"===e.sort&&r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:"sort descending UI text",value:e.sort_desc,title:"The text to display for this field if a descending sort is selected of this type",onChange:function(a){t.setValue(e,n,"sort_desc",a.target.value)}})),"true"===e.sort&&r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:"sort ascending UI text",value:e.sort_asc,title:"The text to display for this field if an ascending sort is selected of this type",onChange:function(a){t.setValue(e,n,"sort_asc",a.target.value)}})),"true"===e.sort&&r.a.createElement("br",null)),r.a.createElement("td",{style:Qt.tdSort},""!==e.sort&&r.a.createElement("div",{style:Qt.tdSort2,title:"enable this category as an item used for sorting in the UI"},r.a.createElement(lt.a,{checked:"true"===e.sort,onChange:function(a){t.setSort(e,n,a.target.checked)},value:"enable result sorting over this field?",inputProps:{"aria-label":"primary checkbox"}}),r.a.createElement("span",{style:Qt.sortLabel},"sort")),"true"===e.sort&&r.a.createElement("div",{style:Qt.tdSort2,title:"set this descending field as the default sort field for the UI"},"\u2190",r.a.createElement(lt.a,{checked:"desc"===e.sort_default,onChange:function(a){t.setDefaultSort(e,n,"desc",a.target.checked)},inputProps:{"aria-label":"primary checkbox"}}),r.a.createElement("span",{style:Qt.sortLabel},"default")),"true"===e.sort&&r.a.createElement("div",{style:Qt.tdSort2,title:"set this ascending field as the default sort field for the UI"},"\u2190",r.a.createElement(lt.a,{checked:"asc"===e.sort_default,onChange:function(a){t.setDefaultSort(e,n,"asc",a.target.checked)},inputProps:{"aria-label":"primary checkbox"}}),r.a.createElement("span",{style:Qt.sortLabel},"default"))),r.a.createElement("td",{style:Qt.tdAction},r.a.createElement("span",{style:Qt.deleteBox,onClick:function(){return t.deleteMetadataItem(n)},title:"remove this metadata item"},r.a.createElement("img",{src:"../images/delete.svg",style:Qt.deleteImage,title:"remove this metadata mapping",alt:"remove this metadata mapping"})),n>0&&r.a.createElement("span",{style:Qt.upDownArrow,title:"move row up (change UI ordering)",onClick:function(){t.move_row_up(e,n)}},"\u21e7"),n+1<a&&r.a.createElement("span",{style:Qt.upDownArrow,title:"move row down (change UI ordering)",onClick:function(){t.move_row_down(e,n)}},"\u21e9")))})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:5},"\xa0")),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:5}),r.a.createElement("td",null,r.a.createElement("div",{style:Qt.imageButton,onClick:function(){return e.addNewMetadataMapping()}},r.a.createElement("img",{style:Qt.addImage,src:"../images/add.svg",title:"add new metadata mapping",alt:"add new metadata mapping"})))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:5},"\xa0")))))}}]),a}(n.Component),Zt={formContent:{marginTop:"20px",width:"98%"},textField:{width:"95%"},dlText:{marginTop:"-2px",width:"150px",float:"left"},manualBox:{float:"right",marginRight:"100px"},manualImage:{float:"left",width:"40px"}},Xt=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,tenantId:e.tenantId?e.tenantId:"",clientId:e.clientId?e.clientId:"",clientSecret:e.clientSecret?e.clientSecret:"",redirectUrl:e.redirectUrl?e.redirectUrl:"",crawlOneDrive:!!C.defined(e.crawlOneDrive)&&e.crawlOneDrive,crawlAllOfOneDrive:!!C.defined(e.crawlAllOfOneDrive)&&e.crawlAllOfOneDrive,oneDriveUsersToCrawl:e.oneDriveUsersToCrawl?e.oneDriveUsersToCrawl:"",crawlSharePoint:!!C.defined(e.crawlSharePoint)&&e.crawlSharePoint,crawlRootSite:!!C.defined(e.crawlRootSite)&&e.crawlRootSite,sharePointSitesToCrawl:e.sharePointSitesToCrawl?e.sharePointSitesToCrawl:"",crawlExchange:!!C.defined(e.crawlExchange)&&e.crawlExchange,crawlAllOfExchange:!!C.defined(e.crawlAllOfExchange)&&e.crawlAllOfExchange,exchangeUsersToCrawl:e.exchangeUsersToCrawl?e.exchangeUsersToCrawl:""},n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({tenantId:e.tenantId,clientId:e.clientId,db_password:e.db_password,clientSecret:e.clientSecret,redirectUrl:e.redirectUrl,crawlOneDrive:e.crawlOneDrive,crawlAllOfOneDrive:e.crawlAllOfOneDrive,oneDriveUsersToCrawl:e.oneDriveUsersToCrawl,crawlSharePoint:e.crawlSharePoint,crawlRootSite:e.crawlRootSite,sharePointSitesToCrawl:e.sharePointSitesToCrawl,crawlExchange:e.crawlExchange,crawlAllOfExchange:e.crawlAllOfExchange,exchangeUsersToCrawl:e.exchangeUsersToCrawl,onSave:e.onSave,onError:e.onError}))}},{key:"construct_data",value:function(e){return{tenantId:e.tenantId?e.tenantId:this.state.tenantId,clientId:e.clientId?e.clientId:this.state.clientId,clientSecret:e.clientSecret?e.clientSecret:this.state.clientSecret,redirectUrl:e.redirectUrl?e.redirectUrl:this.state.redirectUrl,crawlOneDrive:C.defined(e.crawlOneDrive)?e.crawlOneDrive:this.state.crawlOneDrive,crawlAllOfOneDrive:C.defined(e.crawlAllOfOneDrive)?e.crawlAllOfOneDrive:this.state.crawlAllOfOneDrive,oneDriveUsersToCrawl:e.oneDriveUsersToCrawl?e.oneDriveUsersToCrawl:this.state.oneDriveUsersToCrawl,crawlSharePoint:C.defined(e.crawlSharePoint)?e.crawlSharePoint:this.state.crawlSharePoint,crawlRootSite:C.defined(e.crawlRootSite)?e.crawlRootSite:this.state.crawlRootSite,sharePointSitesToCrawl:e.sharePointSitesToCrawl?e.sharePointSitesToCrawl:this.state.sharePointSitesToCrawl,crawlExchange:C.defined(e.crawlExchange)?e.crawlExchange:this.state.crawlExchange,crawlAllOfExchange:C.defined(e.crawlAllOfExchange)?e.crawlAllOfExchange:this.state.crawlAllOfExchange,exchangeUsersToCrawl:e.exchangeUsersToCrawl?e.exchangeUsersToCrawl:this.state.exchangeUsersToCrawl}}},{key:"change_callback",value:function(e){this.setState(e),this.state.onSave&&this.state.onSave(this.construct_data(e))}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"crawler-office365.js: Something went wrong."):r.a.createElement("div",{style:Zt.formContent},r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(N.a,{placeholder:"tenant id",label:"tenant id",autoFocus:!0,value:this.state.tenantId,onChange:function(t){e.change_callback({tenantId:t.target.value})},style:Zt.textField})),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:Zt.manualBox},r.a.createElement("a",{href:"../resources/simsage-office365-setup.pdf",id:"dlOffice365",target:"_blank",title:"download the SimSage Office 365 setup guide"},r.a.createElement("div",{style:Zt.dlText},"download Microsoft Azure configuration instructions"),r.a.createElement("img",{src:"../images/pdf-icon.png",alt:"offce 365 setup guide",style:Zt.manualImage})))),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(N.a,{placeholder:"client id",label:"client id",value:this.state.clientId,onChange:function(t){e.change_callback({clientId:t.target.value})},style:Zt.textField})),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(N.a,{placeholder:"client secret",label:"client secret",value:this.state.clientSecret,onChange:function(t){e.change_callback({clientSecret:t.target.value})},style:Zt.textField})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(N.a,{placeholder:"redirect url: the SimSage interface url to return-to after MS sign-in completes.",label:"redirect url",value:this.state.redirectUrl,onChange:function(t){e.change_callback({redirectUrl:t.target.value})},style:Zt.textField})),r.a.createElement(Y.a,{item:!0,xs:6}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:{float:"left"},title:"Check this box if you want OneDrive of your Office365 to be included"},r.a.createElement(lt.a,{checked:this.state.crawlOneDrive,onChange:function(t){e.change_callback({crawlOneDrive:t.target.checked})},value:"enable OneDrive?",inputProps:{"aria-label":"primary checkbox"}}),"enable OneDrive?")),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:{float:"left"},title:"Check this box if you want ALL of OneDrive to be included"},r.a.createElement(lt.a,{checked:this.state.crawlAllOfOneDrive,disabled:!this.state.crawlOneDrive,onChange:function(t){e.change_callback({crawlAllOfOneDrive:t.target.checked})},value:"crawl all of OneDrive?",inputProps:{"aria-label":"primary checkbox"}}),"crawl all of OneDrive?")),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:10},r.a.createElement(N.a,{placeholder:"specific one-drive accounts (comma separated email addresses)",label:"specific one-drive accounts (comma separated email addresses)",disabled:this.state.crawlAllOfOneDrive||!this.state.crawlOneDrive,variant:"outlined",multiline:!0,rows:2,value:this.state.oneDriveUsersToCrawl,onChange:function(t){e.change_callback({oneDriveUsersToCrawl:t.target.value})},style:Zt.textField})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:{float:"left"},title:"Check this box if you want SharePoint of your Office365 to be included"},r.a.createElement(lt.a,{checked:this.state.crawlSharePoint,onChange:function(t){e.change_callback({crawlSharePoint:t.target.checked})},value:"enable SharePoint indexing?",inputProps:{"aria-label":"primary checkbox"}}),"enable SharePoint indexing?")),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:{float:"left"},title:"Check this box if you want the root SharePoint site to be indexed"},r.a.createElement(lt.a,{checked:this.state.crawlRootSite,disabled:!this.state.crawlSharePoint,onChange:function(t){e.change_callback({crawlRootSite:t.target.checked})},value:"crawl SharePoint root site?",inputProps:{"aria-label":"primary checkbox"}}),"crawl SharePoint root site?")),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:10},r.a.createElement(N.a,{placeholder:"other SharePoint sites (comma separated ids)",label:"other SharePoint sites (comma separated ids)",disabled:!this.state.crawlSharePoint,variant:"outlined",multiline:!0,rows:2,value:this.state.sharePointSitesToCrawl,onChange:function(t){e.change_callback({sharePointSitesToCrawl:t.target.value})},style:Zt.textField})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:{float:"left"},title:"Check this box if you want Exchange of your Office365 to be included"},r.a.createElement(lt.a,{checked:this.state.crawlExchange,onChange:function(t){e.change_callback({crawlExchange:t.target.checked})},value:"enable Exchange?",inputProps:{"aria-label":"primary checkbox"}}),"enable Exchange?")),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:{float:"left"},title:"Check this box if you want ALL of Exchange to be included"},r.a.createElement(lt.a,{checked:this.state.crawlAllOfExchange,disabled:!this.state.crawlExchange,onChange:function(t){e.change_callback({crawlAllOfExchange:t.target.checked})},value:"crawl all of Exchange?",inputProps:{"aria-label":"primary checkbox"}}),"crawl all of Exchange?")),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:10},r.a.createElement(N.a,{placeholder:"specific exchange accounts (comma separated email addresses)",label:"specific exchange accounts (comma separated email addresses)",disabled:this.state.crawlAllOfExchange||!this.state.crawlExchange,variant:"outlined",multiline:!0,rows:2,value:this.state.exchangeUsersToCrawl,onChange:function(t){e.change_callback({exchangeUsersToCrawl:t.target.value})},style:Zt.textField})),r.a.createElement(Y.a,{item:!0,xs:1})))}}]),a}(n.Component),$t={formContent:{marginTop:"20px",marginLeft:"20px"},textField:{marginRight:"10px",width:"700px"},dlText:{marginTop:"-2px",width:"150px",float:"left"},manualBox:{float:"right",marginRight:"100px"},manualImage:{float:"left",width:"40px"},roleBlock:{padding:"5px",marginTop:"20px",float:"left",width:"400px",border:"1px solid #888",borderRadius:"4px",marginLeft:"10px"},roleLabel:{fontSize:"0.8em",color:"#aaa"},roleArea:{padding:"20px"},roleChip:{margin:"2px"}},ea=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,clientToken:e.clientToken?e.clientToken:"",folderList:e.folderList?e.folderList:"",userList:C.defined(e.userList)?e.userList:""},n}return Object(y.a)(a,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({tenantId:e.tenantId,clientToken:C.defined(e.clientToken)?e.clientToken:"",folderList:C.defined(e.folderList)?e.folderList:"",userList:C.defined(e.userList)?e.userList:"",onSave:e.onSave,onError:e.onError}))}},{key:"construct_data",value:function(e){return{clientToken:C.defined(e.clientToken)?e.clientToken:this.state.clientToken,folderList:C.defined(e.folderList)?e.folderList:this.state.folderList,userList:C.defined(e.userList)?e.userList:this.state.userList}}},{key:"change_callback",value:function(e){if(this.setState(e),this.state.onSave){var t=this.construct_data(e);this.state.onSave(t)}}},{key:"getSelectedUsers",value:function(){var e,t={},a=Object(g.a)(this.state.userList.split(","));try{for(a.s();!(e=a.n()).done;){var n=e.value;n&&(t[n]=!0)}}catch(l){a.e(l)}finally{a.f()}var r,i=[],s=Object(g.a)(this.props.availableUserList);try{for(s.s();!(r=s.n()).done;){var o=r.value;o.id&&t[o.id]&&i.push(o)}}catch(l){s.e(l)}finally{s.f()}return i}},{key:"getAvailableUsers",value:function(){var e,t={},a=Object(g.a)(this.state.userList.split(","));try{for(a.s();!(e=a.n()).done;){var n=e.value;n&&(t[n]=!0)}}catch(l){a.e(l)}finally{a.f()}var r,i=[],s=Object(g.a)(this.props.availableUserList);try{for(s.s();!(r=s.n()).done;){var o=r.value;o.id&&!t[o.id]&&i.push(o)}}catch(l){s.e(l)}finally{s.f()}return i}},{key:"removeUser",value:function(e){var t,a=[],n=Object(g.a)(this.state.userList.split(","));try{for(n.s();!(t=n.n()).done;){var r=t.value;r&&r!==e.id&&a.push(r)}}catch(i){n.e(i)}finally{n.f()}this.change_callback({userList:a.join()})}},{key:"addUser",value:function(e){var t=this.state.userList;t=t.length>0?t+","+e.id:e.id,this.change_callback({userList:t})}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"crawler-dropbox.js: Something went wrong."):r.a.createElement("div",{style:$t.formContent},r.a.createElement(N.a,{placeholder:"client token",label:"client token",value:this.state.clientToken,onChange:function(t){e.change_callback({clientToken:t.target.value})},style:$t.textField}),r.a.createElement("div",{style:$t.manualBox},r.a.createElement("a",{href:"../resources/simsage-dropbox-setup.pdf",id:"dlDropbox",target:"_blank",title:"download the SimSage Dropbox setup guide"},r.a.createElement("div",{style:$t.dlText},"download Dropbox configuration instructions"),r.a.createElement("img",{src:"../images/pdf-icon.png",alt:"dropbox setup guide",style:$t.manualImage}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.a,{placeholder:"specific folders to crawl (separated by commas), leave empty to crawl all.",label:"specific folders to crawl (separated by commas), leave empty to crawl all.",multiline:!0,rows:5,value:this.state.folderList,onChange:function(t){e.change_callback({folderList:t.target.value})},style:$t.textField}),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("div",{style:$t.roleBlock},r.a.createElement("div",{style:$t.roleLabel},"users with access"),r.a.createElement("div",{style:$t.roleArea},this.getSelectedUsers().map((function(t){return r.a.createElement(gt.a,{key:t.id,color:"secondary",style:$t.roleChip,onClick:function(){return e.removeUser(t)},label:t.firstName+" "+t.surname,variant:"outlined"})})))),r.a.createElement("div",{style:$t.roleBlock},r.a.createElement("div",{style:$t.roleLabel},"available users"),r.a.createElement("div",{style:$t.roleArea},this.getAvailableUsers().map((function(t){return r.a.createElement(gt.a,{key:t.id,color:"primary",style:$t.roleChip,onClick:function(){return e.addUser(t)},label:t.firstName+" "+t.surname,variant:"outlined"})}))))))}}]),a}(n.Component),ta={uploadContainer:{float:"left",width:"90%",minWidth:"90%",padding:"1px",marginLeft:"10px",background:"white",display:"inline-block",fontWeight:700,fontSize:"10pt",cursor:"pointer"},formWidth:{marginTop:"-20px",float:"left"},uploadControl:{marginTop:"10px",float:"left"},imageButton:{float:"left",marginLeft:"10px",paddingTop:"10px",color:"#888",cursor:"pointer"},restoreImage:{width:"25px"},busyImage:{width:"28px",height:"28px",marginTop:"-10px",float:"left"},uploadInput:{float:"left"},uploadWheel:{marginLeft:"5px",marginTop:"14px",height:"28px",float:"left"}},aa=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={filename:"",fileType:"",data:"",organisationId:e.organisationId,kbId:e.kbId,sourceId:e.sourceId,onError:e.onError},n}return Object(y.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({organisationId:e.organisationId,kbId:e.kbId,sourceId:e.sourceId,onError:e.onError})}},{key:"_handleImageChange",value:function(e){e.preventDefault();var t=this,a=new FileReader,n=e.target.files[0],r=n.name,i=n.type;a.onloadend=function(){t.setState({filename:r,fileType:i,data:a.result})},a.readAsDataURL(n)}},{key:"upload",value:function(){if(this.state.data){var e={organisationId:this.state.organisationId,kbId:this.state.kbId,sid:"",sourceId:this.state.sourceId,data:this.state.data};this.props.doUpload&&this.props.doUpload(e)}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){return e._handleSubmit(t)},style:ta.uploadContainer},r.a.createElement("div",{style:ta.formWidth},r.a.createElement("input",{style:ta.uploadControl,type:"file",onChange:function(t){return e._handleImageChange(t)}}),this.state.data&&this.state.data.length>0&&"application/zip"===this.state.fileType&&r.a.createElement("span",{style:ta.imageButton,onClick:function(){return e.upload()}},r.a.createElement("img",{style:ta.restoreImage,src:"../images/restore.svg",title:'Click here to upload WordPress Archive "'+this.state.filename+'"',alt:"restore data from file"})))))}}]),a}(r.a.Component),na={formContent:{marginTop:"50px",marginLeft:"50px",fontSize:"0.9em"},exportWP:{marginTop:"50px"},exportButton:{marginTop:"10px"},importWP:{marginTop:"50px",float:"left"},importText:{marginBottom:"20px"},restoreWP:{marginTop:"50px"}},ra=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={has_error:!1,organisation_id:e.organisation_id,kb_id:e.kb_id,source_id:e.source_id,onSave:e.onSave,onError:e.onError},n}return Object(y.a)(a,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState({onSave:e.onSave,onError:e.onError})}},{key:"change_callback",value:function(e){this.setState(e),this.state.onSave&&this.state.onSave({crawlerType:"wordpress"})}},{key:"exportArchive",value:function(){window.open(x.get_export_archive_url(this.state.organisation_id,this.state.kb_id,this.state.source_id),"_blank")}},{key:"restore",value:function(e){e&&e.data&&e.data.length>0&&this.props.wpUploadArchive({organisationId:this.state.organisation_id,kbId:this.state.kb_id,sid:"",sourceId:this.state.source_id,data:e.data})}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"crawler-wordpress.js: Something went wrong."):r.a.createElement("div",{style:na.formContent},"The WordPress crawler is an external entity controlled by the SimSage WordPress plugin.",r.a.createElement("br",null),"As such there are no properties to configure here, nor is there a schedule for SimSage to work to.",r.a.createElement("br",null),r.a.createElement("br",null),this.state.source_id>0&&r.a.createElement("div",{style:na.exportWP},r.a.createElement("div",null,"export the contents of this source as a WordPress GZip Archive"),r.a.createElement(B.a,{color:"secondary",variant:"outlined",style:na.exportButton,onClick:function(){return e.exportArchive()}},"Export WordPress Archive")),this.state.source_id>0&&r.a.createElement("div",{style:na.importWP},r.a.createElement("div",{style:na.importText},"import the contents of  WordPress GZip Archive into this source"),r.a.createElement(aa,{doUpload:function(t){return e.restore(t)},organisationId:this.state.organisation_id,kbId:this.state.kb_id,sourceId:this.state.source_id,onError:function(t){return e.props.setError("Error",t)}})))}}]),a}(n.Component),ia={formContent:{marginTop:"20px",marginLeft:"20px"},textField:{width:"100%"},dlText:{marginTop:"-2px",width:"250px",float:"left"},manualBox:{width:"100%"},manualImage:{float:"left",width:"40px"},roleBlock:{padding:"5px",border:"1px solid #888",borderRadius:"4px"},roleLabel:{fontSize:"0.8em",color:"#aaa"},roleArea:{padding:"20px"},roleChip:{margin:"2px"}},sa=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,gdrive_projectId:e.gdrive_projectId?e.gdrive_projectId:"",gdrive_clientId:e.gdrive_clientId?e.gdrive_clientId:"",gdrive_clientSecret:e.gdrive_clientSecret?e.gdrive_clientSecret:"",gdrive_clientName:e.gdrive_clientName?e.gdrive_clientName:"",gdrive_clientPort:e.gdrive_clientPort?e.gdrive_clientPort:"",gdrive_userList:C.defined(e.gdrive_userList)?e.gdrive_userList:""},n}return Object(y.a)(a,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({tenantId:e.tenantId,gdrive_projectId:C.defined(e.gdrive_projectId)?e.gdrive_projectId:"",gdrive_clientId:C.defined(e.gdrive_clientId)?e.gdrive_clientId:"",gdrive_clientSecret:C.defined(e.gdrive_clientSecret)?e.gdrive_clientSecret:"",gdrive_clientName:C.defined(e.gdrive_clientName)?e.gdrive_clientName:"",gdrive_clientPort:C.defined(e.gdrive_clientPort)?e.gdrive_clientPort:"",gdrive_userList:C.defined(e.gdrive_userList)?e.gdrive_userList:"",onSave:e.onSave,onError:e.onError}))}},{key:"construct_data",value:function(e){return{gdrive_projectId:C.defined(e.gdrive_projectId)?e.gdrive_projectId:this.state.gdrive_projectId,gdrive_clientId:C.defined(e.gdrive_clientId)?e.gdrive_clientId:this.state.gdrive_clientId,gdrive_clientSecret:C.defined(e.gdrive_clientSecret)?e.gdrive_clientSecret:this.state.gdrive_clientSecret,gdrive_clientName:C.defined(e.gdrive_clientName)?e.gdrive_clientName:this.state.gdrive_clientName,gdrive_clientPort:C.defined(e.gdrive_clientPort)?e.gdrive_clientPort:this.state.gdrive_clientPort,gdrive_userList:C.defined(e.gdrive_userList)?e.gdrive_userList:this.state.gdrive_userList}}},{key:"change_callback",value:function(e){if(this.setState(e),this.state.onSave){var t=this.construct_data(e);this.state.onSave(t)}}},{key:"getSelectedUsers",value:function(){var e,t={},a=Object(g.a)(this.state.gdrive_userList.split(","));try{for(a.s();!(e=a.n()).done;){var n=e.value;n&&(t[n]=!0)}}catch(l){a.e(l)}finally{a.f()}var r,i=[],s=Object(g.a)(this.props.availableUserList);try{for(s.s();!(r=s.n()).done;){var o=r.value;o.id&&t[o.id]&&i.push(o)}}catch(l){s.e(l)}finally{s.f()}return i}},{key:"getAvailableUsers",value:function(){var e,t={},a=Object(g.a)(this.state.gdrive_userList.split(","));try{for(a.s();!(e=a.n()).done;){var n=e.value;n&&(t[n]=!0)}}catch(l){a.e(l)}finally{a.f()}var r,i=[],s=Object(g.a)(this.props.availableUserList);try{for(s.s();!(r=s.n()).done;){var o=r.value;o.id&&!t[o.id]&&i.push(o)}}catch(l){s.e(l)}finally{s.f()}return i}},{key:"removeUser",value:function(e){var t,a=[],n=Object(g.a)(this.state.gdrive_userList.split(","));try{for(n.s();!(t=n.n()).done;){var r=t.value;r&&r!==e.id&&a.push(r)}}catch(i){n.e(i)}finally{n.f()}this.change_callback({gdrive_userList:a.join()})}},{key:"addUser",value:function(e){var t=this.state.gdrive_userList;t=t.length>0?t+","+e.id:e.id,this.change_callback({gdrive_userList:t})}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"crawler-gdrive.js: Something went wrong."):r.a.createElement("div",{style:ia.formContent},r.a.createElement(Y.a,{container:!0,spacing:2},r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:7},r.a.createElement(N.a,{placeholder:"client Id",label:"client Id",variant:"outlined",value:this.state.gdrive_clientId,onChange:function(t){e.change_callback({gdrive_clientId:t.target.value})},style:ia.textField})),r.a.createElement(Y.a,{item:!0,xs:3},r.a.createElement("div",{style:ia.manualBox},r.a.createElement("a",{href:"../resources/simsage-google-drive-setup.pdf",id:"dlGDrive",target:"_blank",title:"download the SimSage Google-drive setup guide"},r.a.createElement("div",{style:ia.dlText},"download Google-drive configuration instructions"),r.a.createElement("img",{src:"../images/pdf-icon.png",alt:"google-drive setup guide",style:ia.manualImage})))),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(N.a,{placeholder:"client Secret",label:"client Secret",variant:"outlined",value:this.state.gdrive_clientSecret,onChange:function(t){e.change_callback({gdrive_clientSecret:t.target.value})},style:ia.textField})),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(N.a,{placeholder:"project Id",label:"project Id",variant:"outlined",value:this.state.gdrive_projectId,onChange:function(t){e.change_callback({gdrive_projectId:t.target.value})},style:ia.textField})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(N.a,{placeholder:"client Name",label:"client Name",variant:"outlined",value:this.state.gdrive_clientName,onChange:function(t){e.change_callback({gdrive_clientName:t.target.value})},style:ia.textField})),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(N.a,{placeholder:"local web port",label:"local web port",variant:"outlined",value:this.state.gdrive_clientPort,onChange:function(t){e.change_callback({gdrive_clientPort:t.target.value})},style:ia.textField})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:ia.roleBlock},r.a.createElement("div",{style:ia.roleLabel},"users with access"),r.a.createElement("div",{style:ia.roleArea},this.getSelectedUsers().map((function(t){return r.a.createElement(gt.a,{key:t.id,color:"secondary",style:ia.roleChip,onClick:function(){return e.removeUser(t)},label:t.firstName+" "+t.surname,variant:"outlined"})}))))),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:ia.roleBlock},r.a.createElement("div",{style:ia.roleLabel},"available users"),r.a.createElement("div",{style:ia.roleArea},this.getAvailableUsers().map((function(t){return r.a.createElement(gt.a,{key:t.id,color:"primary",style:ia.roleChip,onClick:function(){return e.addUser(t)},label:t.firstName+" "+t.surname,variant:"outlined"})}))))),r.a.createElement(Y.a,{item:!0,xs:1})))}}]),a}(n.Component),oa={formContent:{marginTop:"20px",marginLeft:"20px"},textField:{width:"100%"},dlText:{marginTop:"-2px",width:"250px",float:"left"},manualBox:{width:"100%"},manualImage:{float:"left",width:"40px"},roleBlock:{padding:"5px",border:"1px solid #888",borderRadius:"4px"},roleLabel:{fontSize:"0.8em",color:"#aaa"},roleArea:{padding:"20px"},roleChip:{margin:"2px"}},la=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,nfs_local_folder:e.nfs_local_folder?e.nfs_local_folder:"",nfs_userList:C.defined(e.nfs_userList)?e.nfs_userList:""},n}return Object(y.a)(a,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({tenantId:e.tenantId,nfs_local_folder:C.defined(e.nfs_local_folder)?e.nfs_local_folder:"",nfs_userList:C.defined(e.nfs_userList)?e.nfs_userList:"",onSave:e.onSave,onError:e.onError}))}},{key:"construct_data",value:function(e){return{nfs_local_folder:C.defined(e.nfs_local_folder)?e.nfs_local_folder:this.state.nfs_local_folder,nfs_userList:C.defined(e.nfs_userList)?e.nfs_userList:this.state.nfs_userList}}},{key:"change_callback",value:function(e){if(this.setState(e),this.state.onSave){var t=this.construct_data(e);this.state.onSave(t)}}},{key:"getSelectedUsers",value:function(){var e,t={},a=Object(g.a)(this.state.nfs_userList.split(","));try{for(a.s();!(e=a.n()).done;){var n=e.value;n&&(t[n]=!0)}}catch(l){a.e(l)}finally{a.f()}var r,i=[],s=Object(g.a)(this.props.availableUserList);try{for(s.s();!(r=s.n()).done;){var o=r.value;o.id&&t[o.id]&&i.push(o)}}catch(l){s.e(l)}finally{s.f()}return i}},{key:"getAvailableUsers",value:function(){var e,t={},a=Object(g.a)(this.state.nfs_userList.split(","));try{for(a.s();!(e=a.n()).done;){var n=e.value;n&&(t[n]=!0)}}catch(l){a.e(l)}finally{a.f()}var r,i=[],s=Object(g.a)(this.props.availableUserList);try{for(s.s();!(r=s.n()).done;){var o=r.value;o.id&&!t[o.id]&&i.push(o)}}catch(l){s.e(l)}finally{s.f()}return i}},{key:"removeUser",value:function(e){var t,a=[],n=Object(g.a)(this.state.nfs_userList.split(","));try{for(n.s();!(t=n.n()).done;){var r=t.value;r&&r!==e.id&&a.push(r)}}catch(i){n.e(i)}finally{n.f()}this.change_callback({nfs_userList:a.join()})}},{key:"addUser",value:function(e){var t=this.state.nfs_userList;t=t.length>0?t+","+e.id:e.id,this.change_callback({nfs_userList:t})}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"crawler-nfs.js: Something went wrong."):r.a.createElement("div",{style:oa.formContent},r.a.createElement(Y.a,{container:!0,spacing:2},r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:10},r.a.createElement(N.a,{placeholder:"local folder",label:"Local Folder",variant:"outlined",value:this.state.nfs_local_folder,onChange:function(t){e.change_callback({nfs_local_folder:t.target.value})},style:oa.textField})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:oa.roleBlock},r.a.createElement("div",{style:oa.roleLabel},"users with access"),r.a.createElement("div",{style:oa.roleArea},this.getSelectedUsers().map((function(t){return r.a.createElement(gt.a,{key:t.id,color:"secondary",style:oa.roleChip,onClick:function(){return e.removeUser(t)},label:t.firstName+" "+t.surname,variant:"outlined"})}))))),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement("div",{style:oa.roleBlock},r.a.createElement("div",{style:oa.roleLabel},"available users"),r.a.createElement("div",{style:oa.roleArea},this.getAvailableUsers().map((function(t){return r.a.createElement(gt.a,{key:t.id,color:"primary",style:oa.roleChip,onClick:function(){return e.addUser(t)},label:t.firstName+" "+t.surname,variant:"outlined"})}))))),r.a.createElement(Y.a,{item:!0,xs:1})))}}]),a}(n.Component),ca={formContent:{marginTop:"20px",width:"98%"},fieldWidth:{width:"100%"},dbType:{float:"right",marginTop:"6px",marginRight:"10px"}},da=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,rest_pk:e.rest_pk?e.rest_pk:"",rest_url:e.rest_url?e.rest_url:"",rest_template:e.rest_template?e.rest_template:"",rest_text:e.rest_text?e.rest_text:"",metadata_list:e.metadata_list?e.metadata_list:[]},n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({rest_pk:e.rest_pk,rest_url:e.rest_url,rest_template:e.rest_template,rest_text:e.rest_text,metadata_list:e.metadata_list,onSave:e.onSave,onError:e.onError}))}},{key:"construct_data",value:function(e){return{rest_url:S.defined(e.rest_url)?e.rest_url:this.state.rest_url,rest_template:S.defined(e.rest_template)?e.rest_template:this.state.rest_template,rest_text:S.defined(e.rest_text)?e.rest_text:this.state.rest_text,rest_pk:S.defined(e.rest_pk)?e.rest_pk:this.state.rest_pk,metadata_list:S.defined(e.metadata_list)?e.metadata_list:this.state.metadata_list}}},{key:"change_callback",value:function(e){this.setState(e),this.state.onSave&&this.state.onSave(this.construct_data(e))}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"crawler-restfull.js: Something went wrong."):r.a.createElement("div",{style:ca.formContent},r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:10},r.a.createElement(N.a,{placeholder:"url",label:"url",variant:"outlined",value:this.state.rest_url,onChange:function(t){e.change_callback({rest_url:t.target.value})},style:ca.fieldWidth})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:5},r.a.createElement(N.a,{placeholder:"the name of the primary key in the record",label:"primary key name",variant:"outlined",value:this.state.rest_pk,onChange:function(t){e.change_callback({rest_pk:t.target.value})},style:ca.fieldWidth})),r.a.createElement(Y.a,{item:!0,xs:6}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:10},r.a.createElement(N.a,{placeholder:"REST text index template, an text template referencing REST fields in square brackets [FIELD-NAME]",label:"REST text index template",variant:"outlined",multiline:!0,rows:7,value:this.state.rest_text,onChange:function(t){e.change_callback({rest_text:t.target.value})},style:ca.fieldWidth})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:10},r.a.createElement(N.a,{placeholder:"REST html render template, an html template referencing REST fields in square brackets [FIELD-NAME]",label:"REST html render template",variant:"outlined",multiline:!0,rows:7,value:this.state.rest_template,onChange:function(t){e.change_callback({rest_template:t.target.value})},style:ca.fieldWidth})),r.a.createElement(Y.a,{item:!0,xs:1})))}}]),a}(n.Component),ua={formContent:{overflowY:"scroll",height:"550px"},tab:{backgroundColor:"#f8f8f8",color:"#000"},timeTabContent:{marginLeft:"20px"}},pa=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state=Object(d.a)({open:e.open,onSave:e.onSave,onUpdate:e.onUpdate,onError:e.onError,error_title:e.error_title,error_msg:e.error_msg,selectedTab:"general",schedule:"",organisation_id:e.organisation_id,kb_id:e.kb_id,has_error:!1},n.setupFromCrawler(e.crawler)),n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&(e.crawler&&e.crawler?this.setState(Object(d.a)({open:e.open,title:e.title,onSave:e.onSave,onUpdate:e.onUpdate,onError:e.onError,error_title:e.error_title,error_msg:e.error_msg,organisation_id:e.organisation_id,kb_id:e.kb_id},this.setupFromCrawler(e.crawler))):this.setState({open:e.open,title:e.title,onSave:e.onSave,onError:e.onError}))}},{key:"setupFromCrawler",value:function(e){var t="",a="",n="",r="",i="",s="";if("file"===e.crawlerType&&e.specificJson&&e.specificJson.length>0){var o=JSON.parse(e.specificJson);t=o.username,a=o.password,n=o.domain,r=o.server,i=o.shareName,s=o.sharePath}var l="",c="",d="",u="",p="",m="",h="";if("web"===e.crawlerType&&e.specificJson&&e.specificJson.length>0){var g=JSON.parse(e.specificJson);l=g.baseUrlList,c=C.defined(g.validExtensions)?g.validExtensions:"",d=C.defined(g.validExtensionsIgnore)?g.validExtensionsIgnore:"",u=C.defined(g.webCss)?g.webCss:"",p=C.defined(g.webCssIgnore)?g.webCssIgnore:"",m=C.defined(g.articleIncludeWordsCsv)?g.articleIncludeWordsCsv:"",h=C.defined(g.articleExcludeWordsCsv)?g.articleExcludeWordsCsv:""}var f="",y="",_="",v="none",b="",w="",E="",k="",x=[];if("database"===e.crawlerType&&e.specificJson&&e.specificJson.length>0){var S=JSON.parse(e.specificJson);f=S.username,y=S.password,_=S.jdbc,v=S.type,b=S.query,w=S.pk,E=S.template,k=S.text,x=S.metadata_list}var O="",I="",R="",j="";if("restfull"===e.crawlerType&&e.specificJson&&e.specificJson.length>0){var T=JSON.parse(e.specificJson);O=T.pk,I=T.url,R=T.template,j=T.text,x=T.metadata_list}var D="",L="",P="",B="",N=!1,U=!1,z="",W=!1,A=!1,F="",q=!1,Y=!1,M="";if("office365"===e.crawlerType&&e.specificJson&&e.specificJson.length>0){var H=JSON.parse(e.specificJson);D=H.tenantId,L=H.clientId,P=H.clientSecret,B=H.redirectUrl,N=H.crawlOneDrive,U=H.crawlAllOfOneDrive,z=H.oneDriveUsersToCrawl,W=H.crawlSharePoint,A=H.crawlRootSite,F=H.sharePointSitesToCrawl,q=H.crawlExchange,Y=H.crawlAllOfExchange,M=H.exchangeUsersToCrawl}var J="",K="",V="";if("dropbox"===e.crawlerType&&e.specificJson&&e.specificJson.length>0){var Q=JSON.parse(e.specificJson);J=Q.clientToken,K=Q.folderList,V=C.defined(Q.userList)?Q.userList:""}var G="",Z="",X="",$="",ee="",te="";if("gdrive"===e.crawlerType&&e.specificJson&&e.specificJson.length>0){var ae=JSON.parse(e.specificJson);G=C.defined(ae.gdrive_projectId)?ae.gdrive_projectId:"",Z=C.defined(ae.gdrive_clientId)?ae.gdrive_clientId:"",X=C.defined(ae.gdrive_clientSecret)?ae.gdrive_clientSecret:"",$=C.defined(ae.gdrive_clientName)?ae.gdrive_clientName:"",ee=C.defined(ae.gdrive_clientPort)?ae.gdrive_clientPort:"",te=C.defined(ae.gdrive_userList)?ae.gdrive_userList:""}var ne="",re="";if("nfs"===e.crawlerType&&e.specificJson&&e.specificJson.length>0){var ie=JSON.parse(e.specificJson);ne=C.defined(ie.nfs_local_folder)?ie.nfs_local_folder:"",re=C.defined(ie.nfs_userList)?ie.nfs_userList:""}return{sourceId:e.sourceId,nodeId:e.nodeId,name:e.name,crawlerType:C.defined(e.crawlerType)&&e.crawlerType.length>0?e.crawlerType:"none",filesPerSecond:e.filesPerSecond,schedule:C.defined(e.schedule)?e.schedule:"",deleteFiles:e.deleteFiles,allowAnonymous:e.allowAnonymous,enablePreview:e.enablePreview,processingLevel:C.defined(e.processingLevel)?e.processingLevel:"SEARCH",maxItems:e.maxItems,maxBotItems:e.maxBotItems,file_username:t,file_password:a,file_domain:n,file_server:r,file_share_name:i,file_share_path:s,web_base_url:l,web_extension_filter:c,web_extension_filter_ignore:d,web_css:u,web_css_ignore:p,web_article_filter_incl_csv:m,web_article_filter_excl_csv:h,db_username:f,db_password:y,db_jdbc:_,db_type:v,db_query:b,db_pk:w,db_template:E,db_text:k,metadata_list:x,rest_pk:O,rest_url:I,rest_template:R,rest_text:j,tenantId:D,clientId:L,clientSecret:P,redirectUrl:B,crawlOneDrive:N,crawlAllOfOneDrive:U,oneDriveUsersToCrawl:z,crawlSharePoint:W,crawlRootSite:A,sharePointSitesToCrawl:F,crawlExchange:q,crawlAllOfExchange:Y,exchangeUsersToCrawl:M,gdrive_projectId:G,gdrive_clientId:Z,gdrive_clientSecret:X,gdrive_clientName:$,gdrive_clientPort:ee,gdrive_userList:te,nfs_local_folder:ne,nfs_userList:re,clientToken:J,folderList:K,userList:V}}},{key:"setError",value:function(e,t){this.props.onError&&this.props.onError(e,t)}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null),this.setState({open:!1})}},{key:"isValidDBMetadata",value:function(e){var t,a={},n=0,r=0,i=0,s=Object(g.a)(e);try{for(s.s();!(t=s.n()).done;){var o=t.value,l=o.field1;if(!l||0===l.length)return this.setError("db invalid metadata field","metadata field missing metadata-field-name"),!1;var c=o.db1;if(!c||0===c.length)return this.setError("db invalid database field",'database field missing for database-field-name "'+l+'"'),!1;if("two level category"===o.key){var d=o.db2;if(!d||0===d.length)return this.setError("db invalid database field",'database field missing for database-field-name "'+l+'"'),!1}var u=o.display;if(null!==u&&0===u.length)return this.setError("db invalid display-name",'database field missing display-name "'+l+'"'),!1;a[l]?a[l]+=1:a[l]=1,"true"===o.sort&&(n+=1,0===o.sort_asc.trim().length&&(r+=1),0===o.sort_desc.trim().length&&(r+=1),""!==o.sort_default.trim()&&(i+=1))}}catch(m){s.e(m)}finally{s.f()}for(var p in a){if(a.hasOwnProperty(p))if(a[p]>1)return this.setError("db invalid metadata",'metadata name "'+p+'" is used more than once.'),!1}if(n>0){if(r>0)return this.setError("db invalid metadata","sort-by fields cannot be empty"),!1;if(1!==i)return this.setError("db invalid metadata","you must specify the default UI sort field"),!1}return!0}},{key:"handleSave",value:function(){0===this.state.name.length?this.setError("invalid parameters","you must supply a crawler name."):"none"===this.state.crawlerType?this.setError("invalid parameters","you must select a crawler-type."):"file"!==this.state.crawlerType||0!==this.state.file_username.length&&0!==this.state.file_server.length&&0!==this.state.file_share_name.length?"web"!==this.state.crawlerType||0!==this.state.web_base_url.length&&(this.state.web_base_url.startsWith("http://")||this.state.web_base_url.startsWith("https://"))?"database"!==this.state.crawlerType||0!==this.state.db_jdbc.length&&0!==this.state.db_type.length&&"none"!==this.state.db_type&&0!==this.state.db_query.length&&0!==this.state.db_pk.length&&0!==this.state.db_template.length&&this.state.db_text&&0!==this.state.db_text.length?"restfull"!==this.state.crawlerType||0!==this.state.rest_url.length&&0!==this.state.rest_pk.length&&0!==this.state.rest_template.length&&this.state.rest_text&&0!==this.state.rest_text.length?"database"===this.state.crawlerType&&this.state.metadata_list&&this.state.metadata_list.length>0&&!this.isValidDBMetadata(this.state.metadata_list)||("office365"!==this.state.crawlerType||0!==this.state.tenantId.length&&0!==this.state.clientId.length&&0!==this.state.redirectUrl.length&&0!==this.state.clientSecret.length?"dropbox"!==this.state.crawlerType||0!==this.state.clientToken.length&&0!==this.state.userList.length?("gdrive"!==this.state.crawlerType||0!==this.state.gdrive_clientId.length&&0!==this.state.gdrive_projectId.length&&0!==this.state.gdrive_clientSecret.length&&0!==this.state.gdrive_clientName.length&&0!==this.state.gdrive_clientPort.length&&0!==this.state.gdrive_userList.length)&&("nfs"!==this.state.crawlerType||0!==this.state.nfs_local_folder.length&&0!==this.state.nfs_userList.length)?"web"!==this.state.crawlerType&&"file"!==this.state.crawlerType&&"database"!==this.state.crawlerType&&"office365"!==this.state.crawlerType&&"dropbox"!==this.state.crawlerType&&"nfs"!==this.state.crawlerType&&"wordpress"!==this.state.crawlerType&&"gdrive"!==this.state.crawlerType&&"restfull"!==this.state.crawlerType?this.setError("invalid parameters","you must select a crawler-type first."):isNaN(this.state.filesPerSecond)?this.setError("invalid parameters","files-per-second must be a number"):this.state.onSave&&(this.state.onSave(this.getCrawlerData(this.state)),this.setState({selectedTab:"general"})):this.setError("invalid parameters","you must supply values for all fields, and select one user as a minimum."):this.setError("invalid parameters","you must supply a client-token, and select a user as a minimum."):this.setError("invalid parameters","you must supply tenant-id, client-id, client-secret, and redirect-url as a minimum.")):this.setError("invalid parameters","you must supply a primary-key, a url, a text-template, and an HTML-template as a minimum."):this.setError("invalid parameters","you must supply a jdbc connection string, database-type, a query, a primary-key, a text-template, and a SQL-template as a minimum."):this.setError("invalid parameters","you must supply a base url of type http:// or https://"):this.setError("invalid parameters","you must supply crawler-type, name, username, server and share path as a minimum.")}},{key:"getCrawlerData",value:function(e){var t=this.convertSpecificJson(this.state);return{sourceId:e.sourceId,nodeId:e.nodeId,name:e.name,crawlerType:e.crawlerType,deleteFiles:e.deleteFiles,allowAnonymous:e.allowAnonymous,enablePreview:e.enablePreview,processingLevel:e.processingLevel,maxItems:e.maxItems,maxBotItems:e.maxBotItems,filesPerSecond:e.filesPerSecond,schedule:e.schedule,specificJson:t}}},{key:"convertSpecificJson",value:function(e){var t={};return e&&("file"===this.state.crawlerType?t=JSON.stringify({username:e.file_username?e.file_username:"",password:e.file_password?e.file_password:"",domain:e.file_domain?e.file_domain:"",server:e.file_server?e.file_server:"",shareName:e.file_share_name?e.file_share_name:"",sharePath:e.file_share_path?e.file_share_path:""}):"database"===this.state.crawlerType?t=JSON.stringify({username:e.db_username?e.db_username:"",password:e.db_password?e.db_password:"",jdbc:e.db_jdbc?e.db_jdbc:"",type:e.db_type?e.db_type:"none",query:e.db_query?e.db_query:"",pk:e.db_pk?e.db_pk:"",template:e.db_template?e.db_template:"",text:e.db_text?e.db_text:"",metadata_list:e.metadata_list?e.metadata_list:[]}):"restfull"===this.state.crawlerType?t=JSON.stringify({pk:e.rest_pk?e.rest_pk:"",url:e.rest_url?e.rest_url:"",template:e.rest_template?e.rest_template:"",text:e.rest_text?e.rest_text:"",metadata_list:e.metadata_list?e.metadata_list:[]}):"office365"===this.state.crawlerType?t=JSON.stringify({tenantId:e.tenantId?e.tenantId:"",clientId:e.clientId?e.clientId:"",clientSecret:e.clientSecret?e.clientSecret:"",redirectUrl:e.redirectUrl?e.redirectUrl:"",crawlOneDrive:!!C.defined(e.crawlOneDrive)&&e.crawlOneDrive,crawlAllOfOneDrive:!!C.defined(e.crawlAllOfOneDrive)&&e.crawlAllOfOneDrive,oneDriveUsersToCrawl:e.oneDriveUsersToCrawl?e.oneDriveUsersToCrawl:"",crawlSharePoint:!!C.defined(e.crawlSharePoint)&&e.crawlSharePoint,crawlRootSite:!!C.defined(e.crawlRootSite)&&e.crawlRootSite,sharePointSitesToCrawl:e.sharePointSitesToCrawl?e.sharePointSitesToCrawl:"",crawlExchange:!!C.defined(e.crawlExchange)&&e.crawlExchange,crawlAllOfExchange:!!C.defined(e.crawlAllOfExchange)&&e.crawlAllOfExchange,exchangeUsersToCrawl:e.exchangeUsersToCrawl?e.exchangeUsersToCrawl:""}):"dropbox"===this.state.crawlerType?t=JSON.stringify({clientToken:e.clientToken?e.clientToken:"",folderList:e.folderList?e.folderList:"",userList:e.userList?e.userList:""}):"gdrive"===this.state.crawlerType?t=JSON.stringify({gdrive_projectId:e.gdrive_projectId?e.gdrive_projectId:"",gdrive_clientId:e.gdrive_clientId?e.gdrive_clientId:"",gdrive_clientSecret:e.gdrive_clientSecret?e.gdrive_clientSecret:"",gdrive_clientName:e.gdrive_clientName?e.gdrive_clientName:"",gdrive_clientPort:e.gdrive_clientPort?e.gdrive_clientPort:"",gdrive_userList:e.gdrive_userList?e.gdrive_userList:""}):"nfs"===this.state.crawlerType?t=JSON.stringify({nfs_local_folder:e.nfs_local_folder?e.nfs_local_folder:"",nfs_userList:e.nfs_userList?e.nfs_userList:""}):"wordpress"===this.state.crawlerType?t=JSON.stringify({crawlerType:"wordpress"}):"web"===this.state.crawlerType&&(t=JSON.stringify({baseUrlList:e.web_base_url?e.web_base_url:"",validExtensions:e.web_extension_filter?e.web_extension_filter:"",validExtensionsIgnore:e.web_extension_filter_ignore?e.web_extension_filter_ignore:"",webCss:e.web_css?e.web_css:"",webCssIgnore:e.web_css_ignore?e.web_css_ignore:"",articleIncludeWordsCsv:e.web_article_filter_incl_csv?e.web_article_filter_incl_csv:"",articleExcludeWordsCsv:e.web_article_filter_excl_csv?e.web_article_filter_excl_csv:""}))),t}},{key:"updateSchedule",value:function(e){null!==e&&(this.setState({schedule:e}),this.state.onUpdate&&this.state.onUpdate(Object(d.a)(Object(d.a)({},this.getCrawlerData(this.state)),{},{schedule:e})))}},{key:"update_general_data",value:function(e){this.setState(Object(d.a)(Object(d.a)({},this.state),{},{data:e})),this.state.onUpdate&&this.state.onUpdate(Object(d.a)(Object(d.a)({},this.getCrawlerData(e)),{},{schedule:this.state.schedule}))}},{key:"update_control_data",value:function(e){this.setState(Object(d.a)(Object(d.a)({},this.state),{},{data:e})),this.state.onUpdate&&this.state.onUpdate(Object(d.a)(Object(d.a)({},this.getCrawlerData(this.state)),{},{specificJson:this.convertSpecificJson(e)}))}},{key:"render",value:function(){var e=this;if(this.state.has_error)return r.a.createElement("h1",null,"crawler-dialog.js: Something went wrong.");var t=this.state.selectedTab,a={db_username:this.state.db_username,db_password:this.state.db_password,db_jdbc:this.state.db_jdbc,db_type:this.state.db_type,db_query:this.state.db_query,db_pk:this.state.db_pk,metadata_list:this.state.metadata_list,db_template:this.state.db_template,db_text:this.state.db_text},n={rest_pk:this.state.rest_pk,rest_url:this.state.rest_url,metadata_list:this.state.metadata_list,rest_template:this.state.rest_template,rest_text:this.state.rest_text};return r.a.createElement("div",null,r.a.createElement(J.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.open,disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"lg",onClose:this.handleCancel.bind(this)},r.a.createElement(Q.a,{id:"alert-dialog-title"},this.state.title),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(bt.a,{value:this.state.selectedTab,onChange:function(t,a){return e.setState({selectedTab:a})}},r.a.createElement(wt.a,{label:"general",value:"general",style:ua.tab}),"file"===this.state.crawlerType&&r.a.createElement(wt.a,{label:"file-crawler",value:"file crawler",style:ua.tab}),"web"===this.state.crawlerType&&r.a.createElement(wt.a,{label:"web-crawler",value:"web crawler",style:ua.tab}),"database"===this.state.crawlerType&&r.a.createElement(wt.a,{label:"database-crawler",value:"database crawler",style:ua.tab}),"restfull"===this.state.crawlerType&&r.a.createElement(wt.a,{label:"restful-crawler",value:"RESTful crawler",style:ua.tab}),("database"===this.state.crawlerType||"restfull"===this.state.crawlerType)&&r.a.createElement(wt.a,{label:"metadata",value:"metadata",style:ua.tab}),"office365"===this.state.crawlerType&&r.a.createElement(wt.a,{label:"office 365-crawler",value:"office365 crawler",style:ua.tab}),"dropbox"===this.state.crawlerType&&r.a.createElement(wt.a,{label:"dropbox-crawler",value:"dropbox crawler",style:ua.tab}),"wordpress"===this.state.crawlerType&&r.a.createElement(wt.a,{label:"wordpress-crawler",value:"wordpress crawler",style:ua.tab}),"gdrive"===this.state.crawlerType&&r.a.createElement(wt.a,{label:"gdrive-crawler",value:"google drive crawler",style:ua.tab}),"nfs"===this.state.crawlerType&&r.a.createElement(wt.a,{label:"nfs-crawler",value:"nfs crawler",style:ua.tab}),"wordpress"!==this.state.crawlerType&&r.a.createElement(wt.a,{label:"schedule",value:"schedule",style:ua.tab})),r.a.createElement("div",{style:ua.formContent},"general"===t&&r.a.createElement(At,{sourceId:this.state.sourceId,nodeId:this.state.nodeId,organisation_id:this.state.organisation_id,kb_id:this.state.kb_id,name:this.state.name,filesPerSecond:this.state.filesPerSecond,crawlerType:this.state.crawlerType,deleteFiles:this.state.deleteFiles,allowAnonymous:this.state.allowAnonymous,enablePreview:this.state.enablePreview,processingLevel:this.state.processingLevel,maxItems:this.state.maxItems,maxBotItems:this.state.maxBotItems,error_title:this.state.crawler_error_title,schedule:this.state.schedule,error_msg:this.state.crawler_error_msg,onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_general_data(t)}}),"file crawler"===t&&r.a.createElement(qt,{file_username:this.state.file_username,file_password:this.state.file_password,file_server:this.state.file_server,file_domain:this.state.file_domain,file_share_name:this.state.file_share_name,file_share_path:this.state.file_share_path,onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_control_data(t)}}),"web crawler"===t&&r.a.createElement(Mt,{web_base_url:this.state.web_base_url,web_css:this.state.web_css,web_css_ignore:this.state.web_css_ignore,web_extension_filter:this.state.web_extension_filter,web_extension_filter_ignore:this.state.web_extension_filter_ignore,web_article_filter_incl_csv:this.state.web_article_filter_incl_csv,web_article_filter_excl_csv:this.state.web_article_filter_excl_csv,onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_control_data(t)}}),"database crawler"===t&&r.a.createElement(Kt,{db_username:this.state.db_username,db_password:this.state.db_password,db_jdbc:this.state.db_jdbc,db_type:this.state.db_type,db_query:this.state.db_query,db_pk:this.state.db_pk,metadata_list:this.state.metadata_list,db_template:this.state.db_template,db_text:this.state.db_text,onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_control_data(t)}}),"RESTful crawler"===t&&r.a.createElement(da,{rest_pk:this.state.rest_pk,rest_url:this.state.rest_url,metadata_list:this.state.metadata_list,rest_template:this.state.rest_template,rest_text:this.state.rest_text,onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_control_data(t)}}),"metadata"===t&&"database"===this.state.crawlerType&&r.a.createElement(Gt,{owner_data:a,metadata_list:this.state.metadata_list,onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_control_data(t)}}),"metadata"===t&&"restfull"===this.state.crawlerType&&r.a.createElement(Gt,{owner_data:n,metadata_list:this.state.metadata_list,onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_control_data(t)}}),"office365 crawler"===t&&r.a.createElement(Xt,{tenantId:this.state.tenantId,clientId:this.state.clientId,clientSecret:this.state.clientSecret,redirectUrl:this.state.redirectUrl,crawlOneDrive:this.state.crawlOneDrive,crawlAllOfOneDrive:this.state.crawlAllOfOneDrive,oneDriveUsersToCrawl:this.state.oneDriveUsersToCrawl,crawlSharePoint:this.state.crawlSharePoint,crawlRootSite:this.state.crawlRootSite,sharePointSitesToCrawl:this.state.sharePointSitesToCrawl,crawlExchange:this.state.crawlExchange,crawlAllOfExchange:this.state.crawlAllOfExchange,exchangeUsersToCrawl:this.state.exchangeUsersToCrawl,onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_control_data(t)}}),"dropbox crawler"===t&&r.a.createElement(ea,{clientToken:this.state.clientToken,folderList:this.state.folderList,userList:this.state.userList,availableUserList:this.props.user_list,onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_control_data(t)}}),"google drive crawler"===t&&r.a.createElement(sa,{gdrive_projectId:this.state.gdrive_projectId,gdrive_clientId:this.state.gdrive_clientId,gdrive_clientSecret:this.state.gdrive_clientSecret,gdrive_clientName:this.state.gdrive_clientName,gdrive_clientPort:this.state.gdrive_clientPort,gdrive_userList:this.state.gdrive_userList,availableUserList:this.props.user_list,onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_control_data(t)}}),"nfs crawler"===t&&r.a.createElement(la,{nfs_local_folder:this.state.nfs_local_folder,nfs_userList:this.state.nfs_userList,availableUserList:this.props.user_list,onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_control_data(t)}}),"wordpress crawler"===t&&r.a.createElement(ra,{source_id:this.state.sourceId,organisation_id:this.props.organisation_id,kb_id:this.props.kb_id,wpUploadArchive:function(t){return e.props.wpUploadArchive(t)},onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_control_data(t)}}),"schedule"===t&&"wordpress"!==this.state.crawlerType&&r.a.createElement("div",{style:ua.timeTabContent},r.a.createElement(Ct,{time:this.state.schedule,onSave:function(t){return e.updateSchedule(t)}}))))),r.a.createElement(K.a,null,r.a.createElement(B.a,{onClick:function(){return e.handleCancel()}},"cancel"),r.a.createElement(B.a,{onClick:function(){return e.handleSave()}},"save"))))}}]),a}(n.Component),ma=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;Object(f.a)(this,a),n=t.call(this,e);var r=e.crawler?JSON.stringify(e.crawler):"";return"{}"===r&&(r=""),n.state={has_error:!1,open:e.open,data:r,onSave:e.onSave,onError:e.onError},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){this.state.onSave&&this.state.onSave(this.state.data)}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.crawler?JSON.stringify(e.crawler):"";"{}"===t&&(t=""),this.setState({open:e.open,data:t,onSave:e.onSave,onError:e.onError})}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"mind-edit.js: Something went wrong."):r.a.createElement(J.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableBackdropClick:!0,disableEscapeKeyDown:!0,open:this.state.open,fullWidth:!0,maxWidth:"lg",onClose:function(){return e.handleCancel()}},r.a.createElement(Q.a,{id:"alert-dialog-title"},this.props.export_upload?"Import Crawler":"Export Crawler"),r.a.createElement(V.a,null,r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1},r.a.createElement("div",null,"data")),r.a.createElement(Y.a,{item:!0,xs:9},r.a.createElement(N.a,{autoFocus:!0,onChange:function(t){return e.setState({data:t.target.value})},placeholder:"crawler data",variant:"filled",spellCheck:!1,fullWidth:!0,multiline:!0,rows:10,value:this.state.data})),r.a.createElement(Y.a,{item:!0,xs:1}))),r.a.createElement(K.a,null,this.props.export_upload&&r.a.createElement("div",null,r.a.createElement(B.a,{color:"primary",onClick:function(){return e.handleCancel()}},"Cancel"),r.a.createElement(B.a,{variant:"outlined",color:"secondary",onClick:function(){return e.handleSave()}},"Import")),!this.props.export_upload&&r.a.createElement("div",null,r.a.createElement(B.a,{color:"primary",onClick:function(){return e.handleCancel()}},"Close"))))}}]),a}(n.Component),ha={id:"",crawlerType:"",name:"",deleteFiles:!0,allowAnonymous:!0,enablePreview:!0,enableIndexing:!0,description:"",schedule:"",filesPerSecond:"0",specificJson:""},ga={pageWidth:{width:"900px"},tab:{backgroundColor:"#f8f8f8",color:"#000"},addImage:{width:"25px",cursor:"pointer",color:"green"},knowledgeSelect:{padding:"5px",marginBottom:"40px"},lhs:{float:"left",width:"150px",marginTop:"-10px",color:"#aaa"},rhs:{float:"left"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff"},label:{marginTop:"20px",color:"#555"},linkButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},linkButtonDisabled:{float:"left",padding:"10px",color:"#aaa",cursor:"not-allowed"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},download:{cursor:"pointer",fontSize:"0.9em",fontWeight:"600",height:"24px"},downloadType:{fontSize:"0.9em",height:"24px"},downloadImage:{width:"24px"},labelHeader:{marginTop:"20px",marginBottom:"5px",fontSize:"0.8em"}},fa=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={page_size:5,page:0,open:!1,export_open:!1,export_upload:!1,title:"",selected_crawler:{},crawler_ask:null,message_callback:null,message:"",message_title:""},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"getCrawlers",value:function(){var e=[],t=this.state.page*this.state.page_size,a=t+this.state.page_size;for(var n in this.props.crawler_list)n>=t&&n<a&&e.push(this.props.crawler_list[n]);return e}},{key:"addNewCrawler",value:function(){this.setState({open:!0,selected_crawler:ha,title:"Create New Crawler"})}},{key:"onUpdate",value:function(e){this.setState({selected_crawler:e})}},{key:"editCrawler",value:function(e){e&&this.setState({open:!0,selected_crawler:Object(d.a)(Object(d.a)({},ha),e),title:"Edit Crawler"})}},{key:"deleteCrawlerAsk",value:function(e){var t=this;this.setState({crawler_ask:e}),this.props.openDialog("are you sure you want to remove the crawler named <b>"+e.name+"</b>?","Remove Crawler",(function(e){t.deleteCrawler(e)}))}},{key:"deleteCrawler",value:function(e){e&&this.state.crawler_ask&&this.state.crawler_ask.sourceId&&this.props.deleteCrawler(this.state.crawler_ask.sourceId),this.props.closeDialog&&this.props.closeDialog()}},{key:"saveCrawler",value:function(e){e&&(e.organisationId=this.props.selected_organisation_id,e.kbId=this.props.selected_knowledgebase_id,this.props.updateCrawler(e)),this.setState({open:!1})}},{key:"deleteDocuments",value:function(e){var t=this;this.setState({message_callback:function(a){return t.confirmDocumentsDelete(a,e)},message_title:'remove all documents for "'+e.name+'"?',message:"Are you sure you want to remove ALL DOCUMENTS for <b>"+e.name+"</b>?"})}},{key:"confirmDocumentsDelete",value:function(e,t){var a=this;this.setState({message:"",message_title:""}),e&&t&&S.deleteCrawlerDocuments(t.organisationId,t.kbId,t.sourceId,(function(e){}),(function(e){a.props.setError("Error removing all documents",e)}))}},{key:"canDeleteDocuments",value:function(e){return"wordpress"!==e.crawlerType}},{key:"exportCrawler",value:function(e){this.setState({selected_crawler:e,export_upload:!1,export_open:!0})}},{key:"importCrawler",value:function(){this.setState({selected_crawler:{},export_upload:!0,export_open:!0})}},{key:"saveExport",value:function(e){if(e&&this.state.export_upload){var t=JSON.parse(e);delete t.sourceId,this.saveCrawler(t)}this.setState({export_open:!1,selected_crawler:{}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(pa,{open:this.state.open,title:this.state.title,organisation_id:this.props.selected_organisation_id,kb_id:this.props.selected_knowledgebase_id,user_list:this.props.user_list,onSave:function(t){return e.saveCrawler(t)},onUpdate:function(t){return e.onUpdate(t)},onError:function(t,a){return e.props.setError(t,a)},error_title:this.props.error_title,error_msg:this.props.error,wpUploadArchive:function(t){return e.props.wpUploadArchive(t)},crawler:this.state.selected_crawler}),r.a.createElement(ma,{open:this.state.export_open,upload:this.state.export_upload,crawler:this.state.selected_crawler,export_upload:this.state.export_upload,onSave:function(t){return e.saveExport(t)},onError:function(t,a){return e.props.setError(t,a)}}),r.a.createElement(Ge,{callback:function(t){return e.state.message_callback(t)},open:this.state.message.length>0,message:this.state.message,title:this.state.message_title}),this.props.selected_knowledgebase_id.length>0&&r.a.createElement(Xe.a,{style:ga.pageWidth},r.a.createElement(at.a,null,r.a.createElement(it.a,null,r.a.createElement(st.a,{style:ga.tableHeaderStyle},r.a.createElement(rt.a,{style:ga.tableHeaderStyle},"name"),r.a.createElement(rt.a,{style:ga.tableHeaderStyle},"type"),r.a.createElement(rt.a,{style:ga.tableHeaderStyle},"actions"))),r.a.createElement(nt.a,null,this.getCrawlers().map((function(t){return r.a.createElement(st.a,{key:t.sourceId},r.a.createElement(rt.a,null,r.a.createElement("div",{style:ga.label},t.name)),r.a.createElement(rt.a,null,r.a.createElement("div",{style:ga.label},t.crawlerType)),r.a.createElement(rt.a,null,r.a.createElement("div",{style:ga.linkButton,onClick:function(){return e.editCrawler(t)}},r.a.createElement("img",{src:"../images/edit.svg",style:ga.downloadImage,title:"edit crawler",alt:"edit"})),r.a.createElement("div",{style:ga.linkButton,onClick:function(){return e.deleteDocuments(t)}},r.a.createElement("img",{src:"../images/delete-files.svg",style:ga.downloadImage,title:"remove a crawler's documents",alt:"remove documents"})),r.a.createElement("div",{style:ga.linkButton,onClick:function(){return e.deleteCrawlerAsk(t)}},r.a.createElement("img",{src:"../images/delete.svg",style:ga.downloadImage,title:"remove crawler",alt:"remove"})),r.a.createElement("div",{style:ga.linkButton,onClick:function(){return e.exportCrawler(t)}},r.a.createElement("img",{src:"../images/download.svg",style:ga.downloadImage,title:"get crawler JSON for export",alt:"export"}))))})),r.a.createElement(st.a,null,r.a.createElement(rt.a,null),r.a.createElement(rt.a,null),r.a.createElement(rt.a,null,this.props.selected_organisation_id.length>0&&r.a.createElement("div",{style:ga.imageButton,onClick:function(){return e.addNewCrawler()}},r.a.createElement("img",{style:ga.addImage,src:"../images/add.svg",title:"add new crawler",alt:"add new crawler"})),this.props.selected_organisation_id.length>0&&r.a.createElement("div",{style:ga.imageButton,onClick:function(){return e.importCrawler()}},r.a.createElement("img",{style:ga.addImage,src:"../images/upload.svg",title:"upload crawler JSON",alt:"import"})))))),r.a.createElement(ot.a,{rowsPerPageOptions:[5,10,25],component:"div",count:this.props.crawler_list.length,rowsPerPage:this.state.page_size,page:this.state.page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,a){return e.changePage(a)},onChangeRowsPerPage:function(t){return e.changePageSize(t.target.value)}})))}}]),a}(n.Component),ya=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,selected_organisation_id:e.appReducer.selected_organisation_id,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id,user_list:e.appReducer.user_list,user_filter:e.appReducer.user_filter,crawler_list:e.appReducer.crawler_list}}),(function(e){return Object(u.b)(Ne,e)}))(fa),_a={tableStyle:{width:"900px"},gridWidth:{width:"900px"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",width:"900px",color:"#fff",minWidth:"100px"},tableColumnStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"100px"},knowledgeSelect:{padding:"5px",marginBottom:"40px"},lhs:{float:"left",width:"150px",marginTop:"-10px",color:"#aaa"},rhs:{float:"left"},urlLabel:{padding:"10px",color:"#555",maxWidth:"200px"},label:{padding:"10px",color:"#555"},statusImage:{width:"16px"},hr:{border:"0.1px solid #f0f0f0",width:"100%"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},addImage:{width:"25px"},linkButton:{float:"left",padding:"10px",cursor:"pointer"},linkButtonDisabled:{float:"left",padding:"10px",cursor:"not-allowed"},dlImageSize:{width:"24px",marginRight:"10px"},search:{marginTop:"2px",marginLeft:"15px",width:"18px",color:"#000"},floatLeftLabel:{float:"left",marginRight:"6px",marginTop:"4px",fontSize:"0.9em",fontWeight:"500"},floatLeft:{float:"left"},searchFloatLeft:{float:"left"},manualUploadSection:{marginTop:"50px"},findBox:{padding:"10px",marginBottom:"5px",float:"right"},text:{padding:"4px",width:"280px"}},va=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={document:null,crawler_map:{}},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"componentDidMount",value:function(){var e,t={},a=Object(g.a)(this.props.crawler_list);try{for(a.s();!(e=a.n()).done;){var n=e.value;t[n.sourceId]=n.crawlerType}}catch(r){a.e(r)}finally{a.f()}this.setState({crawler_map:t})}},{key:"deleteDocumentAsk",value:function(e){var t=this;e&&(this.props.openDialog('are you sure you want to remove "'+e.url+'" ?',"Remove Document",(function(e){t.deleteDocument(e)})),this.setState({document:e}))}},{key:"deleteDocument",value:function(e){e&&S.defined(this.state.document)&&this.props.deleteDocument(this.state.document.url,this.state.document.sourceId),this.props.closeDialog&&this.props.closeDialog()}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.props.getDocuments()}},{key:"documentUploaded",value:function(){var e=this;this.setState({message_title:"done",message:"document uploaded",message_callback:function(){e.setState({message:""})}})}},{key:"getDocuments",value:function(){return this.props.document_list}},{key:"getActive",value:function(e,t){if("crawled"===t){if(e.crawled>0)return 1}else if("converted"===t){if(e.converted>0)return 1;if(e.converted<0)return 2}else if("parsed"===t){if(e.converted>0&&e.converted<=e.parsed)return 1;if(e.parsed<0)return 2}else if("indexed"===t){if(e.converted>0&&e.parsed>0&&e.parsed<=e.indexed)return 1;if(e.indexed<0)return 2}else if("previewed"===t){if(e.previewed>0)return 1;if(e.previewed<0)return 2}return 0}},{key:"getStatus",value:function(e,t){var a=this.getActive(e,t);return 1===a?"../images/dot-green.svg":0===a?"../images/dot-orange.svg":"../images/dot-grey.svg"}},{key:"getStatusText",value:function(e,t,a){var n=this.getActive(e,t);return 1===n?"document "+t:0===n?"document not yet "+t:a+" disabled for this document-source"}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"canDeleteDocument",value:function(e){return"wordpress"!==this.state.crawler_map[e.sourceId]}},{key:"render",value:function(){var e=this;return r.a.createElement(Y.a,{container:!0,spacing:1,style:_a.gridWidth},this.isVisible()&&r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement("div",{style:_a.findBox},r.a.createElement("div",{style:_a.floatLeftLabel},"filter"),r.a.createElement("div",{style:_a.searchFloatLeft},r.a.createElement("input",{type:"text",value:this.props.document_filter,autoFocus:!0,style:_a.text,onKeyPress:function(t){return e.handleSearchTextKeydown(t)},onChange:function(t){e.props.setDocumentFilter(t.target.value)}})),r.a.createElement("div",{style:_a.floatLeft},r.a.createElement("img",{style:_a.search,onClick:function(){return e.props.getDocuments()},src:"../images/dark-magnifying-glass.svg",title:"filter",alt:"filter"})))),this.isVisible()&&r.a.createElement(Xe.a,{style:_a.tableStyle},r.a.createElement(at.a,null,r.a.createElement(it.a,null,r.a.createElement(st.a,{style:_a.tableHeaderStyle},r.a.createElement(rt.a,{style:_a.tableColumnStyle},"url"),r.a.createElement(rt.a,{style:_a.tableColumnStyle},"source"),r.a.createElement(rt.a,{style:_a.tableColumnStyle},"last modified"),r.a.createElement(rt.a,{style:_a.tableColumnStyle},"status"),r.a.createElement(rt.a,{style:_a.tableColumnStyle},"actions"))),r.a.createElement(nt.a,null,this.getDocuments().map((function(t){return r.a.createElement(st.a,{key:t.url},r.a.createElement(rt.a,null,a.isWeb(t.url)&&r.a.createElement("div",{style:_a.urlLabel},r.a.createElement("a",{href:t.url,title:t.url,rel:"noopener noreferrer",target:"_blank"},a.adjustUrl(t.url))),!a.isWeb(t.url)&&r.a.createElement("div",{style:_a.label},a.adjustUrl(t.url))),r.a.createElement(rt.a,null,r.a.createElement("div",{style:_a.label},t.origin)),r.a.createElement(rt.a,null,r.a.createElement("div",{style:_a.label},S.unixTimeConvert(t.lastModified))),r.a.createElement(rt.a,null,r.a.createElement("div",{style:_a.label},r.a.createElement("img",{src:e.getStatus(t,"crawled"),style:_a.statusImage,alt:"crawler",title:e.getStatusText(t,"crawled","crawling")}),r.a.createElement("img",{src:e.getStatus(t,"converted"),style:_a.statusImage,alt:"converted",title:e.getStatusText(t,"converted","converting")}),r.a.createElement("img",{src:e.getStatus(t,"parsed"),style:_a.statusImage,alt:"parsed",title:e.getStatusText(t,"parsed","parsing")}),r.a.createElement("img",{src:e.getStatus(t,"indexed"),style:_a.statusImage,alt:"indexed",title:e.getStatusText(t,"indexed","indexing")}),r.a.createElement("img",{src:e.getStatus(t,"previewed"),style:_a.statusImage,alt:"previewed",title:e.getStatusText(t,"previewed","preview generation")}))),r.a.createElement(rt.a,null,r.a.createElement("div",{style:_a.linkButton,onClick:function(){return e.deleteDocumentAsk(t)}},r.a.createElement("img",{src:"../images/delete.svg",style:_a.dlImageSize,title:"remove document",alt:"remove"}))))})))),r.a.createElement(ot.a,{rowsPerPageOptions:[5,10,25],component:"div",count:this.props.num_documents,rowsPerPage:this.props.document_page_size,page:this.props.document_page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,a){return e.props.setDocumentPage(a)},onChangeRowsPerPage:function(t){return e.props.setDocumentPageSize(t.target.value)}})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))}}],[{key:"isWeb",value:function(e){return e.toLowerCase().startsWith("http://")||e.toLowerCase().startsWith("https://")}},{key:"adjustUrl",value:function(e){if(e&&e.length>50){var t=Math.floor(25);return e.substring(0,t)+" ... "+e.substring(e.length-t)}return e}}]),a}(r.a.Component),ba=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,document_list:e.appReducer.document_list,document_filter:e.appReducer.document_filter,document_page:e.appReducer.document_page,document_page_size:e.appReducer.document_page_size,document_nav_list:e.appReducer.document_nav_list,num_documents:e.appReducer.num_documents,crawler_list:e.appReducer.crawler_list,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id}}),(function(e){return Object(u.b)(Ne,e)}))(va),wa=[".jpg",".jpeg",".png",".gif",".svg"],Ea=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;Object(f.a)(this,a),n=t.call(this,e);var r=e.mindItem&&e.mindItem.expression?e.mindItem.expression:"",i="",s="";return r.indexOf("||")>=0?(i=r.split("||")[0],s=r.split("||")[1]):i=r,n.state={has_error:!1,open:e.open,mindItem:e.mindItem,onSave:e.onSave,onError:e.onError,question1:i,question2:s,answer:a.getAnswerText(e.mindItem),links:a.getLinks(e.mindItem)},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){if(this.state.onSave){var e=this.state.mindItem;e.expression=this.state.question1,this.state.question2.trim().length>0&&(e.expression=e.expression+" || "+this.state.question2),e.actionList=a.createActions(this.state.answer,this.state.links),this.state.onSave(e)}}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.mindItem&&e.mindItem.expression?e.mindItem.expression:"",n="",r="";t.indexOf("||")>=0?(n=t.split("||")[0],r=t.split("||")[1]):n=t,this.setState({open:e.open,mindItem:e.mindItem,onSave:e.onSave,onError:e.onError,question1:n,question2:r,answer:a.getAnswerText(e.mindItem),links:a.getLinks(e.mindItem)})}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"mind-edit.js: Something went wrong."):r.a.createElement(J.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableBackdropClick:!0,disableEscapeKeyDown:!0,open:this.state.open,fullWidth:!0,maxWidth:"lg",onClose:function(){return e.handleCancel()}},r.a.createElement(Q.a,{id:"alert-dialog-title"},"Edit Mind Item"),r.a.createElement(V.a,null,r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1},r.a.createElement("div",null,"question")),r.a.createElement(Y.a,{item:!0,xs:9},r.a.createElement(N.a,{autoFocus:!0,onChange:function(t){return e.setState({question1:t.target.value})},placeholder:"question",variant:"outlined",fullWidth:!0,value:this.state.question1})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1},r.a.createElement("div",null,"alternative")),r.a.createElement(Y.a,{item:!0,xs:9},r.a.createElement(N.a,{onChange:function(t){return e.setState({question2:t.target.value})},placeholder:"alternative question (optional)",variant:"outlined",fullWidth:!0,value:this.state.question2})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1},r.a.createElement("div",null,"answer text")),r.a.createElement(Y.a,{item:!0,xs:9},r.a.createElement(N.a,{onChange:function(t){return e.setState({answer:t.target.value})},placeholder:"answer, or function (e.g. 'exec show_help person1 person2 date1')",multiline:!0,rows:5,variant:"outlined",fullWidth:!0,value:this.state.answer})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1},r.a.createElement("div",null,"links (csv)")),r.a.createElement(Y.a,{item:!0,xs:9},r.a.createElement(N.a,{onChange:function(t){return e.setState({links:t.target.value})},placeholder:"links",multiline:!0,rows:5,variant:"outlined",fullWidth:!0,value:this.state.links})),r.a.createElement(Y.a,{item:!0,xs:1}))),r.a.createElement(K.a,null,r.a.createElement(B.a,{color:"primary",onClick:function(){return e.handleCancel()}},"Cancel"),r.a.createElement(B.a,{variant:"outlined",color:"secondary",onClick:function(){return e.handleSave()}},"Save")))}}],[{key:"createActions",value:function(e,t){var a=[];if(e.length>0)if(0===e.trim().indexOf("exec ")){var n,r=e.split("\n"),i=Object(g.a)(r);try{for(i.s();!(n=i.n()).done;){var s=n.value.trim().split(" ");if(s.length>1&&"exec"===s[0]){for(var o=[],l=2;l<s.length;l+=1)s[l].trim().length>0&&o.push(s[l].trim());a.push({action:s[1],parameters:o})}}}catch(b){i.e(b)}finally{i.f()}}else a.push({action:"browser.write",parameters:[e.replace(/\n/g,"<br />")]});var c,d=t.split(","),u=Object(g.a)(d);try{for(u.s();!(c=u.n()).done;){var p=c.value,m=p.trim();if(m.length>0){var h,f=p.toLowerCase(),y=!1,_=Object(g.a)(wa);try{for(_.s();!(h=_.n()).done;){var v=h.value;f.indexOf(v)>0&&(y=!0)}}catch(b){_.e(b)}finally{_.f()}y?a.push({action:"browser.image",parameters:[m]}):a.push({action:"browser.url",parameters:[m]})}}}catch(b){u.e(b)}finally{u.f()}return a}},{key:"getAnswerText",value:function(e){var t="";if(e&&e.actionList){var a,n=Object(g.a)(e.actionList);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r)if("browser.write"===r.action&&r.parameters){var i,s=Object(g.a)(r.parameters);try{for(s.s();!(i=s.n()).done;){t+=i.value.replace(/<br \/>/g,"\n")}}catch(d){s.e(d)}finally{s.f()}}else if("browser.image"!==r.action&&"browser.url"!==r.action&&"browser.say"!==r.action){t=t+"exec "+r.action;var o,l=Object(g.a)(r.parameters);try{for(l.s();!(o=l.n()).done;){var c=o.value;t+=" ",t+=c}}catch(d){l.e(d)}finally{l.f()}t+="\n"}}}catch(d){n.e(d)}finally{n.f()}}return t}},{key:"getLinks",value:function(e){var t="";if(e&&e.actionList){var a,n=Object(g.a)(e.actionList);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r&&"browser.image"===r.action&&r.parameters){t.length>0&&(t+=",\n");var i,s=Object(g.a)(r.parameters);try{for(s.s();!(i=s.n()).done;){t+=i.value.replace(/<br \/>/g,"\n")}}catch(c){s.e(c)}finally{s.f()}}if(r&&"browser.url"===r.action&&r.parameters){t.length>0&&(t+=",\n");var o,l=Object(g.a)(r.parameters);try{for(l.s();!(o=l.n()).done;){t+=o.value.replace(/<br \/>/g,"\n")}}catch(c){l.e(c)}finally{l.f()}}}}catch(c){n.e(c)}finally{n.f()}}return t}}]),a}(n.Component),ka={uploadContainer:{margin:"10px",width:"450px",minWidth:"450px",height:"20px",borderRadius:"15px",padding:"12px",marginLeft:"10px",background:"white",fontWeight:700,fontSize:"10pt",cursor:"pointer"},formWidth:{},uploadControl:{marginTop:"5px",float:"left"},uploadButton:{float:"left",height:"30px"},busyImage:{width:"28px",height:"28px",marginTop:"-10px",float:"left"},uploadInput:{float:"left"},uploadWheel:{marginLeft:"5px",marginTop:"14px",height:"28px",float:"left"}},xa=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={filename:"",file_type:"",filter:"",binary_data:null},n}return Object(y.a)(a,[{key:"_handleImageChange",value:function(e){e.preventDefault();var t=this,a=new FileReader,n=e.target.files[0],r=n.name,i=n.type;a.onloadend=function(){t.setState({filename:r,file_type:i,binary_data:a.result})},a.readAsDataURL(n)}},{key:"upload",value:function(){if(this.state.binary_data){var e={base64Text:this.state.binary_data,fileType:this.state.file_type,kbId:this.props.selected_knowledgebase_id,organisationId:this.props.selected_organisation_id};this.props.uploadProgram(e)}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){return e._handleSubmit(t)},style:ka.uploadContainer},r.a.createElement("div",{style:ka.formWidth},r.a.createElement("input",{style:ka.uploadControl,type:"file",onChange:function(t){return e._handleImageChange(t)}}),r.a.createElement("div",{style:ka.uploadButton},r.a.createElement("div",{style:ka.uploadInput},r.a.createElement(B.a,{variant:"contained",color:"primary",style:ka.uploadButton,disabled:null===this.state.binary_data||this.props.uploading,onClick:this.upload.bind(this)},"upload"),this.props.uploading&&r.a.createElement("div",{style:ka.uploadWheel},r.a.createElement("img",{src:"../images/busy2.gif",alt:"busy",style:ka.busyImage})))))))}}]),a}(n.Component),Sa=Object(o.b)((function(e){return{uploading:e.appReducer.uploading,selected_organisation_id:e.appReducer.selected_organisation_id,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id}}),(function(e){return Object(u.b)(Ne,e)}))(xa),Ca={tableStyle:{minWidth:"900px",width:"900px"},smallTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"20px"},actionTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"100px"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"400px",width:"600px"},searchTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"200px",width:"340px"},knowledgeSelect:{padding:"5px",marginBottom:"40px"},lhs:{float:"left",width:"150px",marginTop:"-10px",color:"#aaa"},rhs:{float:"left"},label:{padding:"10px",color:"#555"},queryMindLabel:{marginTop:"12px",padding:"10px",color:"#555",float:"right"},gridWidth:{width:"900px"},hr:{border:"0.1px solid #f0f0f0",width:"100%"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},addImage:{width:"25px"},linkButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},dlImageSize:{width:"24px"},search:{marginTop:"2px",marginLeft:"15px",width:"18px",color:"#000"},floatLeftLabel:{float:"left",marginRight:"6px",marginTop:"4px",fontSize:"0.9em",fontWeight:"500"},searchFloatLeft:{float:"left"},text:{padding:"4px",width:"280px"},floatLeft:{float:"left"},manualUploadSection:{marginTop:"50px"},findBox:{padding:"10px",marginBottom:"5px",float:"right"},spacer:{marginTop:"20px"},uploader:{marginTop:"-20px",float:"left"},export:{float:"left"}},Oa=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={mind_item:null,mind_edit:!1},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"componentDidMount",value:function(){}},{key:"deleteMindItemAsk",value:function(e){var t=this;e&&(this.props.openDialog("are you sure you want to remove id "+e.id+"?<br/><br/>("+e.expression+")","Remove Mind Entry",(function(e){t.deleteMindItem(e)})),this.setState({mind_item:e}))}},{key:"deleteMindItem",value:function(e){e&&S.defined(this.state.mind_item)&&this.props.deleteMindItem(this.state.mind_item.id),this.props.closeDialog&&this.props.closeDialog()}},{key:"deleteAllMindItemsAsk",value:function(){var e=this;this.props.openDialog("are you sure you want to remove all mind-items of this knowledge-base?","Remove All Mind Items",(function(t){e.deleteAllMindItems(t)}))}},{key:"deleteAllMindItems",value:function(e){e&&this.props.deleteAllMindItems(),this.props.closeDialog&&this.props.closeDialog()}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.props.getMindItems()}},{key:"editMindItem",value:function(e){this.setState({mind_edit:!0,mind_item:e})}},{key:"newMindItem",value:function(){this.setState({mind_edit:!0,mind_item:{id:"",preContext:"",postContext:"",expression:"",actionList:[],metadata:""}})}},{key:"mindDump",value:function(){window.open(x.get_mind_dump_url(this.props.selected_organisation_id,this.props.selected_knowledgebase_id),"_blank")}},{key:"save",value:function(e){e?e.expression.length>0&&e.actionList.length>0?(this.props.saveMindItem(e),this.setState({mind_edit:!1})):this.props.setError("Error Saving Mind Entry","mind-item must have an expression and actions"):this.setState({mind_edit:!1})}},{key:"getMindItemList",value:function(){return this.props.mind_item_list?this.props.mind_item_list:[]}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ea,{open:this.state.mind_edit,mindItem:this.state.mind_item,onSave:function(t){return e.save(t)},onError:function(t){return e.props.setError("Error",t)}}),this.isVisible()&&r.a.createElement("div",{style:Ca.findBox},r.a.createElement("div",{style:Ca.floatLeftLabel},"find items in the mind"),r.a.createElement("div",{style:Ca.searchFloatLeft},r.a.createElement("input",{type:"text",value:this.props.mind_item_filter,autoFocus:!0,style:Ca.text,onKeyPress:function(t){return e.handleSearchTextKeydown(t)},onChange:function(t){e.props.setMindItemFilter(t.target.value)}})),r.a.createElement("div",{style:Ca.floatLeft},r.a.createElement("img",{style:Ca.search,onClick:function(){return e.props.getMindItems()},src:"../images/dark-magnifying-glass.svg",title:"search",alt:"search"}))),r.a.createElement("br",{clear:"both"}),this.isVisible()&&r.a.createElement(Xe.a,null,r.a.createElement(at.a,{style:Ca.tableStyle},r.a.createElement(it.a,null,r.a.createElement(st.a,null,r.a.createElement(rt.a,{style:Ca.smallTableHeaderStyle},"id"),r.a.createElement(rt.a,{style:Ca.tableHeaderStyle},"expression"),r.a.createElement(rt.a,{style:Ca.actionTableHeaderStyle},"actions"))),r.a.createElement(nt.a,null,this.getMindItemList().map((function(t){return r.a.createElement(st.a,{key:t.id},r.a.createElement(rt.a,null,r.a.createElement("div",{style:Ca.label},t.id)),r.a.createElement(rt.a,null,r.a.createElement("div",{style:Ca.label,title:a.toAnswer(t)},t.expression)),r.a.createElement(rt.a,null,r.a.createElement("div",{style:Ca.linkButton,onClick:function(){return e.editMindItem(t)}},r.a.createElement("img",{src:"../images/edit.svg",style:Ca.dlImageSize,title:"edit mind-item",alt:"edit"})),r.a.createElement("div",{style:Ca.linkButton,onClick:function(){return e.deleteMindItemAsk(t)}},r.a.createElement("img",{src:"../images/delete.svg",style:Ca.dlImageSize,title:"remove mind-item",alt:"remove"}))))})),r.a.createElement(st.a,null,r.a.createElement(rt.a,{colSpan:3},this.props.selected_knowledgebase_id.length>0&&r.a.createElement("div",{style:Ca.uploader},r.a.createElement(Sa,{kbId:this.props.selected_knowledgebase_id,organisationId:this.props.selected_organisation_id,onUploadDone:function(){return e.programUploaded()},onError:function(t){return e.props.setError("Error",t)}})),this.props.selected_knowledgebase_id.length>0&&r.a.createElement("div",{style:Ca.export},r.a.createElement(B.a,{color:"primary",variant:"outlined",style:Ca.exportButton,onClick:function(){return e.mindDump()}},"Export")),this.props.selected_knowledgebase_id.length>0&&r.a.createElement("div",{style:Ca.imageButton,onClick:function(){return e.newMindItem()}},r.a.createElement("img",{style:Ca.addImage,src:"../images/add.svg",title:"new mind item",alt:"new mind item"})),this.props.selected_knowledgebase_id.length>0&&r.a.createElement("div",{style:Ca.imageButton,onClick:function(){return e.deleteAllMindItemsAsk()}},r.a.createElement("img",{style:Ca.addImage,src:"../images/delete.svg",title:"remove all mind items of this knowledgebase",alt:"remove all mind items"})))))),r.a.createElement(ot.a,{rowsPerPageOptions:[5,10,25],component:"div",count:this.props.num_mind_items,rowsPerPage:this.props.mind_item_page_size,page:this.props.mind_item_page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,a){return e.props.setMindItemPage(a)},onChangeRowsPerPage:function(t){return e.props.setMindItemPageSize(t.target.value)}})))}}],[{key:"toAnswer",value:function(e){var t="";if(e&&e.actionList){var a,n=Object(g.a)(e.actionList);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r&&"browser.write"===r.action&&r.parameters){var i,s=Object(g.a)(r.parameters);try{for(s.s();!(i=s.n()).done;){t+=i.value.replace(/<br \/>/g,"\n")}}catch(o){s.e(o)}finally{s.f()}}}}catch(o){n.e(o)}finally{n.f()}}return t}}]),a}(r.a.Component),Ia=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,mind_item_list:e.appReducer.mind_item_list,mind_item_filter:e.appReducer.mind_item_filter,mind_item_page:e.appReducer.mind_item_page,mind_item_page_size:e.appReducer.mind_item_page_size,num_mind_items:e.appReducer.num_mind_items,bot_query:e.appReducer.bot_query,bot_query_result_list:e.appReducer.bot_query_result_list,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id}}),(function(e){return Object(u.b)(Ne,e)}))(Oa),Ra={searchResult:{marginLeft:"80px"},searchMessage:{},searchFooter:{float:"left"},searchInsideNav:{marginTop:"5px",marginLeft:"2px",marginRight:"10px",float:"left"},insideNavButtonStyle:{width:"16px",float:"left",backgroundColor:"#d0d0d0",marginRight:"3px",padding:"2px",color:"#808080",borderRadius:"2px",cursor:"pointer",webkitUserSelect:"none",mozUserSelect:"none",msUserSelect:"none",userSelect:"none"},insideNavButtonStyleDisabled:{width:"16px",float:"left",backgroundColor:"#d0d0d030",marginRight:"3px",padding:"2px",color:"#80808030",borderRadius:"2px",cursor:"arrow",webkitUserSelect:"none",mozUserSelect:"none",msUserSelect:"none",userSelect:"none"},tinmanContainer:{float:"left",width:"80%"},tinmanLeft:{float:"left"},tinmanScore:{fontSize:"0.8em"},tinmanText:{fontSize:"0.9em"},tinmanImageSize:{width:"50px",height:"50px"},imageBox:{float:"left",marginTop:"20px"},imageHolder:{float:"left",marginRight:"5px"},imageSize:{maxWidth:"150px",maxHeight:"150px",borderRadius:"5px"},urlBox:{marginTop:"5px",float:"left"},urlStyle:{float:"left",fontSize:"0.8em",color:"#009",marginRight:"10px",marginLeft:"70px",cursor:"pointer"},graph_size:{width:"600px"},spacer:{height:"10px"}},ja=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={has_error:!1,item:e.item,openDocument:e.openDocument},n}return Object(y.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e&&this.setState({item:e.item,openDocument:e.openDocument})}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"render",value:function(){if(this.state.has_error)return r.a.createElement("h1",null,"bot-single-search-result: Something went wrong.");var e=this.state.item;return r.a.createElement(Y.a,{container:!0,spacing:0,style:Ra.gridWidth},r.a.createElement(Y.a,{item:!0,xs:1},r.a.createElement("div",{style:Ra.tinmanScore},e.score.toFixed(2))),r.a.createElement(Y.a,{item:!0,xs:11},r.a.createElement("div",{style:Ra.tinmanText,dangerouslySetInnerHTML:{__html:a.highlight(e.display)}})),r.a.createElement(Y.a,{item:!0,xs:12},e.imageList.map((function(e){return r.a.createElement("div",{key:e,style:Ra.imageHolder},r.a.createElement("img",{alt:"search result",src:e,style:Ra.imageSize}))}))),r.a.createElement(Y.a,{item:!0,xs:12},e.urlList.map((function(e){return r.a.createElement("div",{style:Ra.urlStyle,key:e},r.a.createElement("a",{href:e,rel:"noopener noreferrer",target:"_blank"},e))}))),r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement("div",{style:Ra.spacer},"\xa0")))}}],[{key:"highlight",value:function(e){return e&&e.replace&&(e=(e=(e=(e=(e=(e=(e=e.replace(/{hl1:}/g,"<span class='hl1'>")).replace(/{hl2:}/g,"<span class='hl2'>")).replace(/{hl3:}/g,"<span class='hl3'>")).replace(/{:hl1}/g,"</span>")).replace(/{:hl2}/g,"</span>")).replace(/{:hl3}/g,"</span>")).replace(/\n/g,"<br />")),e}},{key:"setupGraph",value:function(e,t,a){if(e&&e.length){for(var n=[],r=[],i=0;i<e.length;i++){var s=e[i];s[t]&&s[a]&&(n.push(s[t].toFixed(2)),r.push(s[a]))}return{labels:n,datasets:[{label:"data",fill:!1,lineTension:.1,backgroundColor:"rgba(192,75,75,0.4)",borderColor:"rgba(192,75,75,1)",pointBackgroundColor:"#fff",pointBorderColor:"rgba(192,75,75,1)",pointHoverBackgroundColor:"rgba(192,75,75,1)",pointHoverBorderColor:"rgba(220,220,220,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderWidth:1,pointHoverRadius:5,pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:r}]}}return{labels:[]}}},{key:"updateResults",value:function(e){e&&e.map((function(e,t){if(e){e.imageList=[],e.urlList=[],e.sayList=[],e.graphList=[];var a=[];if(e.actionList&&e.actionList.length>0){for(var n=e.actionList,r=0;r<n.length;r++){var i=n[r];if("browser.write"===i.action)for(var s=0;s<i.parameters.length;s++){var o=i.parameters[s];a.push(o)}else if("browser.say"===i.action)for(var l=0;l<i.parameters.length;l++){var c=i.parameters[l];e.sayList.push(c)}else if("browser.image"===i.action)for(var d=0;d<i.parameters.length;d++){var u=i.parameters[d];e.imageList.push(u)}else if("browser.url"===i.action)for(var p=0;p<i.parameters.length;p++){var m=i.parameters[p];e.urlList.push(m)}else{a.push(i.action),a.push("(");for(var h=0;h<i.parameters.length;h++){h>0&&a.push(",");var g=i.parameters[h];e.context&&void 0!==e.context[g]?a.push(e.context[g]):a.push(g)}a.push(")\n")}}if(e.display=a.join(" "),e.context){var f=[];Object.keys(e.context).forEach((function(t){var a=e.context[t];f.push(t+" = "+a)})),f.length>0&&(e.display+="context: {"+f.join(", ")+"}")}}else e.display="";e.key=S.createGuid(),e.index=0}return e}))}}]),a}(r.a.Component),Ta={busyBox:{float:"left",marginLeft:"10px",marginRight:"5px",marginTop:"15px",width:"32px"},searchTextBox:{marginBottom:16,width:"400px",float:"left"},searchButtonBox:{marginTop:"20px",marginLeft:"20px",float:"left"},searchResultsBox:{padding:"10px",borderRadius:"4px",border:"0.5px solid #ccc"}},Da=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={onError:e.onError,botQuery:e.botQuery,setBotQueryString:e.setBotQueryString,botQueryString:e.botQueryString,queryResultList:e.queryResultList,hasSearched:!1},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.onError(e,t),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({botQueryString:e.botQueryString,queryResultList:e.queryResultList,setBotQueryString:e.setBotQueryString,botQuery:e.botQuery,onError:e.onError})}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.doClickSearch()}},{key:"doClickSearch",value:function(){this.props.botQuery&&(this.setState({hasSearched:!0}),this.props.botQuery())}},{key:"getResultList",value:function(){var e=JSON.parse(JSON.stringify(this.props.queryResultList));return ja.updateResults(e),e}},{key:"openDocument",value:function(e){var t=x.getSession(),a=x.toUrl("/document/"+encodeURIComponent(t)+"/"+encodeURIComponent(e));window.open(a,"_blank")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{style:Ta.busyBox},r.a.createElement("img",{alt:"busy",src:"../images/busy2.gif",style:{display:this.state.busy?"":"none",width:"32px"}})),r.a.createElement("div",{style:Ta.searchTextBox},r.a.createElement(N.a,{onChange:function(t){return e.props.setBotQueryString(t.target.value)},onKeyPress:function(t){return e.handleSearchTextKeydown(t)},label:"test the mind by asking it something",fullWidth:!0,value:this.props.botQueryString})),r.a.createElement("div",{style:Ta.searchButtonBox},r.a.createElement(B.a,{variant:"outlined",color:"secondary",onClick:function(){return e.doClickSearch()}},"Ask")),r.a.createElement("div",{style:{clear:"both"}}),r.a.createElement("br",null),this.state.queryResultList&&this.state.queryResultList.length>0&&r.a.createElement("div",null,r.a.createElement("div",{style:Ta.searchResultsBox},this.getResultList().map((function(t){return r.a.createElement(ja,{key:t.key,item:t,openDocument:function(t){return e.openDocument(t)}})})))),this.state.queryResultList&&0===this.state.queryResultList.length&&this.state.hasSearched&&r.a.createElement("div",null,"no results"))}}]),a}(n.Component),La={gridWidth:{width:"900px"},queryMindLabel:{marginTop:"12px",padding:"10px",color:"#555",float:"right"}},Pa=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={mind_item:null,mind_edit:!1},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"componentDidMount",value:function(){}},{key:"deleteMindItemAsk",value:function(e){var t=this;e&&(this.props.openDialog("are you sure you want to remove id "+e.id+"?<br/><br/>("+e.expression+")","Remove Mind Entry",(function(e){t.deleteMindItem(e)})),this.setState({mind_item:e}))}},{key:"deleteMindItem",value:function(e){e&&S.defined(this.state.mind_item)&&this.props.deleteMindItem(this.state.mind_item.id),this.props.closeDialog&&this.props.closeDialog()}},{key:"deleteAllMindItemsAsk",value:function(){var e=this;this.props.openDialog("are you sure you want to remove all mind-items of this knowledge-base?","Remove All Mind Items",(function(t){e.deleteAllMindItems(t)}))}},{key:"deleteAllMindItems",value:function(e){e&&this.props.deleteAllMindItems(),this.props.closeDialog&&this.props.closeDialog()}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.props.getMindItems()}},{key:"editMindItem",value:function(e){this.setState({mind_edit:!0,mind_item:e})}},{key:"newMindItem",value:function(){this.setState({mind_edit:!0,mind_item:{id:S.createGuid(),preContext:"",postContext:"",expression:"",actionList:[],metadata:""}})}},{key:"mindDump",value:function(){window.open(x.get_mind_dump_url(this.props.selected_organisation_id,this.props.selected_knowledgebase_id),"_blank")}},{key:"save",value:function(e){e?e.expression.length>0&&e.actionList.length>0?(this.props.saveMindItem(e),this.setState({mind_edit:!1})):this.props.setError("Error Saving Mind Entry","mind-item must have an expression and actions"):this.setState({mind_edit:!1})}},{key:"getMindItemList",value:function(){return this.props.mind_item_list?this.props.mind_item_list:[]}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Y.a,{container:!0,spacing:1,style:La.gridWidth},this.props.selected_knowledgebase_id&&r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement(Da,{onError:function(t,a){return e.props.setError(t,a)},botQuery:this.props.botQuery,botQueryString:this.props.bot_query,setBotQueryString:this.props.setBotQueryString,queryResultList:this.props.bot_query_result_list}))))}}],[{key:"toAnswer",value:function(e){var t="";if(e&&e.actionList){var a,n=Object(g.a)(e.actionList);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r&&"browser.write"===r.action&&r.parameters){var i,s=Object(g.a)(r.parameters);try{for(s.s();!(i=s.n()).done;){t+=i.value.replace(/<br \/>/g,"\n")}}catch(o){s.e(o)}finally{s.f()}}}}catch(o){n.e(o)}finally{n.f()}}return t}}]),a}(r.a.Component),Ba=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,bot_query:e.appReducer.bot_query,bot_query_result_list:e.appReducer.bot_query_result_list,selected_organisation_id:e.appReducer.selected_organisation_id,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id}}),(function(e){return Object(u.b)(Ne,e)}))(Pa),Na=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={has_error:!1,open:e.open,synonym:e.synonym,onSave:e.onSave,onError:e.onError,words:e.synonym&&e.synonym.words?e.synonym.words:""},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){if(this.state.onSave){var e=this.state.synonym;e.words=this.state.words,this.state.onSave(e)}}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({open:e.open,synonym:e.synonym,onSave:e.onSave,onError:e.onError,words:e.synonym&&e.synonym.words?e.synonym.words:""})}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"synonym-edit.js: Something went wrong."):r.a.createElement(J.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.open,fullWidth:!0,disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"lg",onClose:function(){return e.handleCancel()}},r.a.createElement(Q.a,{id:"alert-dialog-title"},"Edit Synonym"),r.a.createElement(V.a,null,r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1},r.a.createElement("div",null,"synonyms")),r.a.createElement(Y.a,{item:!0,xs:9},r.a.createElement(N.a,{autoFocus:!0,onChange:function(t){return e.setState({words:t.target.value})},placeholder:"words",multiline:!0,rows:5,variant:"outlined",fullWidth:!0,value:this.state.words})),r.a.createElement(Y.a,{item:!0,xs:1}))),r.a.createElement(K.a,null,r.a.createElement(B.a,{color:"primary",onClick:function(){return e.handleCancel()}},"Cancel"),r.a.createElement(B.a,{variant:"outlined",color:"secondary",onClick:function(){return e.handleSave()}},"Save")))}}]),a}(n.Component),Ua={tableStyle:{minWidth:"800px",width:"900px"},smallTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"20px"},actionTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"100px"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"400px",width:"600px"},searchTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"200px",width:"340px"},knowledgeSelect:{padding:"5px",marginBottom:"40px"},lhs:{float:"left",width:"150px",marginTop:"-10px",color:"#aaa"},rhs:{float:"left"},label:{padding:"10px",color:"#555"},gridWidth:{width:"900px"},hr:{border:"0.1px solid #f0f0f0",width:"100%"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},addImage:{width:"25px"},linkButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},dlImageSize:{width:"24px"},search:{marginTop:"2px",marginLeft:"15px",width:"18px",color:"#000"},floatLeftLabel:{float:"left",marginRight:"6px",marginTop:"4px",fontSize:"0.9em",fontWeight:"500"},searchFloatLeft:{float:"left"},text:{padding:"4px",width:"280px"},floatLeft:{float:"left"},manualUploadSection:{marginTop:"50px"},findBox:{padding:"10px",marginBottom:"5px",float:"right"}},za=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={synonym:{},synonym_edit:!1,openDialog:e.openDialog,closeDialog:e.closeDialog,page_size:5,page:0},n}return Object(y.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({openDialog:e.openDialog,closeDialog:e.closeDialog})}},{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"getSynonymList",value:function(){return this.props.synonym_list}},{key:"deleteSynonymAsk",value:function(e){var t=this;e&&(this.props.openDialog("are you sure you want to remove id "+e.id+"?<br/><br/>("+e.words+")","Remove Synonym",(function(e){t.deleteSynonym(e)})),this.setState({synonym:e}))}},{key:"deleteSynonym",value:function(e){e&&this.state.synonym&&this.props.deleteSynonym(this.state.synonym.id),this.props.closeDialog&&this.props.closeDialog(),this.setState({synonym_edit:!1,synonym:{}})}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.props.getSynonyms()}},{key:"editSynonym",value:function(e){this.setState({synonym_edit:!0,synonym:e})}},{key:"newSynonym",value:function(){this.setState({synonym_edit:!0,synonym:{id:S.createGuid(),words:""}})}},{key:"save",value:function(e){e?e.words.length>0&&e.words.indexOf(",")>0?(this.props.saveSynonym(e),this.setState({synonym_edit:!1,synonym:{}})):this.props.setError("Error Saving Synonym","synonym cannot be empty and need more than one item"):this.setState({synonym_edit:!1,synonym:{}})}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Na,{open:this.state.synonym_edit,synonym:this.state.synonym,onSave:function(t){return e.save(t)},onError:function(t){return e.props.setError("Error",t)}}),this.isVisible()&&r.a.createElement("div",{style:Ua.findBox},r.a.createElement("div",{style:Ua.floatLeftLabel},"find synonyms"),r.a.createElement("div",{style:Ua.searchFloatLeft},r.a.createElement("input",{type:"text",value:this.props.synonym_filter,autoFocus:!0,style:Ua.text,onKeyPress:function(t){return e.handleSearchTextKeydown(t)},onChange:function(t){e.props.setSynonymFilter(t.target.value)}})),r.a.createElement("div",{style:Ua.floatLeft},r.a.createElement("img",{style:Ua.search,onClick:function(){return e.props.getSynonyms()},src:"../images/dark-magnifying-glass.svg",title:"search",alt:"search"}))),r.a.createElement("br",{clear:"both"}),this.isVisible()&&r.a.createElement(Xe.a,null,r.a.createElement(at.a,{style:Ua.tableStyle},r.a.createElement(it.a,null,r.a.createElement(st.a,null,r.a.createElement(rt.a,{style:Ua.smallTableHeaderStyle},"id"),r.a.createElement(rt.a,{style:Ua.tableHeaderStyle},"synonyms"),r.a.createElement(rt.a,{style:Ua.actionTableHeaderStyle},"actions"))),r.a.createElement(nt.a,null,this.getSynonymList().map((function(t){return r.a.createElement(st.a,{key:t.id},r.a.createElement(rt.a,null,r.a.createElement("div",{style:Ua.label},t.id)),r.a.createElement(rt.a,null,r.a.createElement("div",{style:Ua.label},t.words)),r.a.createElement(rt.a,null,r.a.createElement("div",{style:Ua.linkButton,onClick:function(){return e.editSynonym(t)}},r.a.createElement("img",{src:"../images/edit.svg",style:Ua.dlImageSize,title:"edit synonym",alt:"edit"})),r.a.createElement("div",{style:Ua.linkButton,onClick:function(){return e.deleteSynonymAsk(t)}},r.a.createElement("img",{src:"../images/delete.svg",style:Ua.dlImageSize,title:"remove synonym",alt:"remove"}))))})),r.a.createElement(st.a,null,r.a.createElement(rt.a,null),r.a.createElement(rt.a,null),r.a.createElement(rt.a,null,this.isVisible()&&r.a.createElement("div",{style:Ua.imageButton,onClick:function(){return e.newSynonym()}},r.a.createElement("img",{style:Ua.addImage,src:"../images/add.svg",title:"new synonym",alt:"new synonym"})))))),r.a.createElement(ot.a,{rowsPerPageOptions:[5,10,25],component:"div",count:this.props.num_synonyms,rowsPerPage:this.props.synonym_page_size,page:this.props.synonym_page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,a){return e.props.setSynonymPage(a)},onChangeRowsPerPage:function(t){return e.props.setSynonymPageSize(t.target.value)}})))}}]),a}(r.a.Component),Wa=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,synonym_list:e.appReducer.synonym_list,synonym_filter:e.appReducer.synonym_filter,synonym_page:e.appReducer.synonym_page,synonym_page_size:e.appReducer.synonym_page_size,num_synonyms:e.appReducer.num_synonyms,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id}}),(function(e){return Object(u.b)(Ne,e)}))(za),Aa={labelAdjustment:{marginTop:"17px"}},Fa=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={has_error:!1,open:e.open,semantic:e.semantic,onSave:e.onSave,onError:e.onError,word:e.semantic&&e.semantic.word?e.semantic.word:"",semantic_str:e.semantic&&e.semantic.semantic?e.semantic.semantic:""},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){this.state.onSave&&this.state.onSave({word:this.state.word,prevWord:"",semantic:this.state.semantic_str})}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({open:e.open,semantic:e.semantic,onSave:e.onSave,onError:e.onError,word:e.semantic&&e.semantic.word?e.semantic.word:"",semantic_str:e.semantic&&e.semantic.semantic?e.semantic.semantic:""})}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"semantic-edit.js: Something went wrong."):r.a.createElement(J.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.open,disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"lg",onClose:function(){return e.handleCancel()}},r.a.createElement(Q.a,{id:"alert-dialog-title"},"Edit Semantic"),r.a.createElement(V.a,null,r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1},r.a.createElement("div",{style:Aa.labelAdjustment},"word")),r.a.createElement(Y.a,{item:!0,xs:9},r.a.createElement(N.a,{autoFocus:!0,onChange:function(t){return e.setState({word:t.target.value})},placeholder:"word",variant:"outlined",fullWidth:!0,value:this.state.word})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1},r.a.createElement("div",{style:Aa.labelAdjustment},"semantic")),r.a.createElement(Y.a,{item:!0,xs:9},r.a.createElement(N.a,{onChange:function(t){return e.setState({semantic_str:t.target.value})},placeholder:"semantic",variant:"outlined",fullWidth:!0,value:this.state.semantic_str})),r.a.createElement(Y.a,{item:!0,xs:1}))),r.a.createElement(K.a,null,r.a.createElement(B.a,{color:"primary",onClick:function(){return e.handleCancel()}},"Cancel"),r.a.createElement(B.a,{variant:"outlined",color:"secondary",onClick:function(){return e.handleSave()}},"Save")))}}]),a}(n.Component),qa={tableStyle:{minWidth:"900px",width:"900px"},smallTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"20px"},actionTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"100px"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"400px",width:"600px"},searchTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"200px",width:"340px"},knowledgeSelect:{padding:"5px",marginBottom:"40px"},lhs:{float:"left",width:"150px",marginTop:"-10px",color:"#aaa"},rhs:{float:"left"},label:{padding:"10px",color:"#555"},gridWidth:{width:"900px"},hr:{border:"0.1px solid #f0f0f0",width:"100%"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},addImage:{width:"25px"},linkButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},dlImageSize:{width:"24px"},search:{marginTop:"2px",marginLeft:"15px",width:"18px",color:"#000"},floatLeftLabel:{float:"left",marginRight:"6px",marginTop:"4px",fontSize:"0.9em",fontWeight:"500"},searchFloatLeft:{float:"left"},text:{padding:"4px",width:"280px"},floatLeft:{float:"left"},manualUploadSection:{marginTop:"50px"},findBox:{padding:"10px",marginBottom:"5px",float:"right"}},Ya=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={semantic:{},prev_semantic:{word:"",semantic:""},semantic_edit:!1,openDialog:e.openDialog,closeDialog:e.closeDialog,page_size:5,page:0},n}return Object(y.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({openDialog:e.openDialog,closeDialog:e.closeDialog})}},{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"getSemanticList",value:function(){return this.props.semantic_list}},{key:"deleteSemanticAsk",value:function(e){var t=this;e&&(this.props.openDialog("are you sure you want to remove "+e.word+" is a "+e.semantic+"?","Remove Semantic",(function(e){t.deleteSemantic(e)})),this.setState({semantic:e}))}},{key:"deleteSemantic",value:function(e){e&&this.state.semantic&&this.props.deleteSemantic(this.state.semantic.word),this.props.closeDialog&&this.props.closeDialog(),this.setState({semantic_edit:!1,semantic:{}})}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.props.getSemantics()}},{key:"editSemantic",value:function(e){this.setState({semantic_edit:!0,prev_semantic:{word:e.word,semantic:e.semantic},semantic:{word:e.word,semantic:e.semantic}})}},{key:"newSemantic",value:function(){this.setState({semantic_edit:!0,prev_semantic:{word:"",semantic:""},semantic:{word:"",semantic:""}})}},{key:"save",value:function(e){e?e.word.length>0&&e.semantic.length>0?(""!==this.state.prev_semantic.word&&this.state.prev_semantic.word!==e.word?e.prevWord=this.state.prev_semantic.word:e.prevWord="",this.props.saveSemantic(e),this.setState({semantic_edit:!1,semantic:{}}),this.state.closeDialog&&this.state.closeDialog()):this.props.setError("Error Saving Semantic","word and semantic must have a value"):this.setState({semantic_edit:!1,semantic:{}})}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Fa,{open:this.state.semantic_edit,semantic:this.state.semantic,onSave:function(t){return e.save(t)},onError:function(t){return e.props.setError("Error",t)}}),this.isVisible()&&r.a.createElement("div",{style:qa.findBox},r.a.createElement("div",{style:qa.floatLeftLabel},"find semantics"),r.a.createElement("div",{style:qa.searchFloatLeft},r.a.createElement("input",{type:"text",value:this.props.semantic_filter,autoFocus:!0,style:qa.text,onKeyPress:function(t){return e.handleSearchTextKeydown(t)},onChange:function(t){e.props.setSemanticFilter(t.target.value)}})),r.a.createElement("div",{style:qa.floatLeft},r.a.createElement("img",{style:qa.search,onClick:function(){return e.props.getSemantics()},src:"../images/dark-magnifying-glass.svg",title:"search",alt:"search"}))),r.a.createElement("br",{clear:"both"}),this.isVisible()&&r.a.createElement(Xe.a,null,r.a.createElement(at.a,{style:qa.tableStyle},r.a.createElement(it.a,null,r.a.createElement(st.a,null,r.a.createElement(rt.a,{style:qa.smallTableHeaderStyle},"word"),r.a.createElement(rt.a,{style:qa.tableHeaderStyle},"semantic"),r.a.createElement(rt.a,{style:qa.actionTableHeaderStyle},"actions"))),r.a.createElement(nt.a,null,this.getSemanticList().map((function(t){return r.a.createElement(st.a,{key:t.word+":"+t.semantic},r.a.createElement(rt.a,null,r.a.createElement("div",{style:qa.label},t.word)),r.a.createElement(rt.a,null,r.a.createElement("div",{style:qa.label},t.semantic)),r.a.createElement(rt.a,null,r.a.createElement("div",{style:qa.linkButton,onClick:function(){return e.editSemantic(t)}},r.a.createElement("img",{src:"../images/edit.svg",style:qa.dlImageSize,title:"edit semantic",alt:"edit"})),r.a.createElement("div",{style:qa.linkButton,onClick:function(){return e.deleteSemanticAsk(t)}},r.a.createElement("img",{src:"../images/delete.svg",style:qa.dlImageSize,title:"remove semantic",alt:"remove"}))))})),r.a.createElement(st.a,null,r.a.createElement(rt.a,null),r.a.createElement(rt.a,null),r.a.createElement(rt.a,null,this.isVisible()&&r.a.createElement("div",{style:qa.imageButton,onClick:function(){return e.newSemantic()}},r.a.createElement("img",{style:qa.addImage,src:"../images/add.svg",title:"new semantic",alt:"new semantic"})))))),r.a.createElement(ot.a,{rowsPerPageOptions:[5,10,25],component:"div",count:this.props.num_semantics,rowsPerPage:this.props.semantic_page_size,page:this.props.semantic_page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,a){return e.props.setSemanticPage(a)},onChangeRowsPerPage:function(t){return e.props.setSemanticPageSize(t.target.value)}})))}}]),a}(r.a.Component),Ma=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,semantic_list:e.appReducer.semantic_list,semantic_filter:e.appReducer.semantic_filter,semantic_page:e.appReducer.semantic_page,semantic_page_size:e.appReducer.semantic_page_size,num_semantics:e.appReducer.num_semantics,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id}}),(function(e){return Object(u.b)(Ne,e)}))(Ya),Ha={container:{float:"left",marginBottom:"10px"},textFieldStyle:{float:"left",width:"700px"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},addImage:{width:"25px"},deleteButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},deleteImageSize:{width:"24px"}},Ja=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={has_error:!1,open:e.open,synSet:e.synSet,onSave:e.onSave,onError:e.onError,word:S.defined(e.synSet)&&S.defined(e.synSet.word)?e.synSet.word:"",cloud_list:a.getWordCloudList(e.synSet)},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){if(this.state.onSave){var e=this.state.synSet;e.word=this.state.word.trim(),e.wordCloudCsvList=this.state.cloud_list,e.word.indexOf(" ")>=0?this.state.onError("syn-sets must be a single words without spaces."):this.state.onSave(e)}}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({open:e.open,synSet:e.synSet,onSave:e.onSave,onError:e.onError,word:S.defined(e.synSet)&&S.defined(e.synSet.word)?e.synSet.word:"",cloud_list:a.getWordCloudList(e.synSet)})}},{key:"updateWC",value:function(e,t){var a=this.state.cloud_list;a[e]=t,this.setState({cloud_list:a})}},{key:"newSyn",value:function(){var e=this.state.cloud_list;e.push(""),this.setState({cloud_list:e})}},{key:"deleteSyn",value:function(e){for(var t=[],a=this.state.cloud_list,n=0;n<a.length;n++)n!==e&&t.push(a[n]);this.setState({cloud_list:t})}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"synset-edit.js: Something went wrong."):(console.log(this.state.cloud_list),r.a.createElement(J.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.open,fullWidth:!0,disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"lg",onClose:function(){return e.handleCancel()}},r.a.createElement(Q.a,{id:"alert-dialog-title"},'Edit syn-set "',this.state.word,'"'),r.a.createElement(V.a,null,r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:2},r.a.createElement("div",null,"syn-set")),r.a.createElement(Y.a,{item:!0,xs:8},r.a.createElement(N.a,{style:Ha.textFieldStyle,onChange:function(t){return e.setState({word:t.target.value})},placeholder:"syn-set",variant:"outlined",fullWidth:!0,value:this.state.word})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:2},r.a.createElement("div",null,"word-clouds")),r.a.createElement(Y.a,{item:!0,xs:8},this.state.cloud_list.map((function(t,a){return r.a.createElement("div",{id:a},r.a.createElement("div",{style:Ha.container},r.a.createElement(N.a,{style:Ha.textFieldStyle,onChange:function(t){return e.updateWC(a,t.target.value)},placeholder:"word-cloud for syn-set "+(a+1),multiline:!0,rows:2,variant:"outlined",fullWidth:!0,value:t}),a>1&&r.a.createElement("div",{style:Ha.deleteButton,onClick:function(){return e.deleteSyn(a)}},r.a.createElement("img",{src:"../images/delete.svg",style:Ha.deleteImageSize,title:"remove syn",alt:"remove syn"}))),r.a.createElement("div",{style:{clear:"both"}}))}))),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:9}),r.a.createElement(Y.a,{item:!0,xs:1},r.a.createElement("div",{style:Ha.imageButton,onClick:function(){return e.newSyn()}},r.a.createElement("img",{style:Ha.addImage,src:"../images/add.svg",title:"add a new syn item",alt:"add a new syn"}))),r.a.createElement(Y.a,{item:!0,xs:1}))),r.a.createElement(K.a,null,r.a.createElement(B.a,{color:"primary",onClick:function(){return e.handleCancel()}},"Cancel"),r.a.createElement(B.a,{variant:"outlined",color:"secondary",onClick:function(){return e.handleSave()}},"Save"))))}}],[{key:"getWordCloudList",value:function(e){var t=[];for(S.defined(e)&&S.defined(e.wordCloudCsvList)&&(t=e.wordCloudCsvList);t.length<2;)t.push("");return t}}]),a}(n.Component),Ka={tableStyle:{minWidth:"800px",width:"900px"},smallTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"20px"},actionTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"100px"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"400px",width:"600px"},searchTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"200px",width:"340px"},knowledgeSelect:{padding:"5px",marginBottom:"40px"},lhs:{float:"left",width:"150px",marginTop:"-10px",color:"#aaa"},rhs:{float:"left"},label:{padding:"10px",color:"#555"},gridWidth:{width:"900px"},hr:{border:"0.1px solid #f0f0f0",width:"100%"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},addImage:{width:"25px"},linkButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},dlImageSize:{width:"24px"},search:{marginTop:"2px",marginLeft:"15px",width:"18px",color:"#000"},floatLeftLabel:{float:"left",marginRight:"6px",marginTop:"4px",fontSize:"0.9em",fontWeight:"500"},searchFloatLeft:{float:"left"},text:{padding:"4px",width:"280px"},floatLeft:{float:"left"},manualUploadSection:{marginTop:"50px"},findBox:{padding:"10px",marginBottom:"5px",float:"right"}},Va=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={synSet:{},synSet_edit:!1,openDialog:e.openDialog,closeDialog:e.closeDialog},n}return Object(y.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({openDialog:e.openDialog,closeDialog:e.closeDialog})}},{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"deleteSynSetAsk",value:function(e){var t=this;e&&(this.props.openDialog("are you sure you want to remove id "+e.word+"?","Remove SynSet",(function(e){t.deleteSynSet(e)})),this.setState({synSet:e}))}},{key:"deleteSynSet",value:function(e){e&&this.state.synSet&&this.props.deleteSynSet(this.state.synSet.lemma),this.props.closeDialog&&this.props.closeDialog(),this.setState({synSet_edit:!1,synSet:{}})}},{key:"handleSynSetFilterKeydown",value:function(e){"Enter"===e.key&&this.props.findSynSets()}},{key:"editSynSet",value:function(e){this.setState({synSet_edit:!0,synSet:e})}},{key:"newSynSet",value:function(){this.setState({synSet_edit:!0,synSet:{word:"",lemma:"",wordCloudCsvList:[]}})}},{key:"save",value:function(e){if(e)if(e.word.trim().length>0&&e.wordCloudCsvList.length>1){var t,a=e.wordCloudCsvList,n=!0,r=Object(g.a)(a);try{for(r.s();!(t=r.n()).done;){0===t.value.trim().length&&(n=!1)}}catch(i){r.e(i)}finally{r.f()}n?(this.props.saveSynSet(e),this.setState({synSet_edit:!1,synSet:{}})):this.props.setError("Error Saving SynSet","syn-set word-cloud items must not be empty.")}else this.props.setError("Error Saving SynSet","syn-set cannot be empty and need more than one item");else this.setState({synSet_edit:!1,synSet:{}})}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ja,{open:this.state.synSet_edit,synSet:this.state.synSet,onSave:function(t){return e.save(t)},onError:function(t){return e.props.setError("Error",t)}}),this.isVisible()&&r.a.createElement("div",{style:Ka.findBox},r.a.createElement("div",{style:Ka.floatLeftLabel},"filter syn-sets"),r.a.createElement("div",{style:Ka.searchFloatLeft},r.a.createElement("input",{type:"text",value:this.props.synset_filter,autoFocus:!0,style:Ka.text,onKeyPress:function(t){return e.handleSynSetFilterKeydown(t)},onChange:function(t){e.props.setSynSetFilter(t.target.value)}})),r.a.createElement("div",{style:Ka.floatLeft},r.a.createElement("img",{style:Ka.search,onClick:function(){return e.props.findSynSets()},src:"../images/dark-magnifying-glass.svg",title:"search",alt:"search"}))),r.a.createElement("br",{clear:"both"}),this.isVisible()&&r.a.createElement(Xe.a,null,r.a.createElement(at.a,{style:Ka.tableStyle},r.a.createElement(it.a,null,r.a.createElement(st.a,null,r.a.createElement(rt.a,{style:Ka.smallTableHeaderStyle},"syn-set"),r.a.createElement(rt.a,{style:Ka.actionTableHeaderStyle},"actions"))),r.a.createElement(nt.a,null,this.props.synset_list.map((function(t){return r.a.createElement(st.a,{key:t.word},r.a.createElement(rt.a,null,r.a.createElement("div",{style:Ka.label},t.word)),r.a.createElement(rt.a,null,r.a.createElement("div",{style:Ka.linkButton,onClick:function(){return e.editSynSet(t)}},r.a.createElement("img",{src:"../images/edit.svg",style:Ka.dlImageSize,title:"edit syn-set",alt:"edit"})),r.a.createElement("div",{style:Ka.linkButton,onClick:function(){return e.deleteSynSetAsk(t)}},r.a.createElement("img",{src:"../images/delete.svg",style:Ka.dlImageSize,title:"remove syn-set",alt:"remove"}))))})),r.a.createElement(st.a,null,r.a.createElement(rt.a,null),r.a.createElement(rt.a,null,this.isVisible()&&r.a.createElement("div",{style:Ka.imageButton,onClick:function(){return e.newSynSet()}},r.a.createElement("img",{style:Ka.addImage,src:"../images/add.svg",title:"new syn-set",alt:"new syn-set"})))),r.a.createElement(st.a,null,r.a.createElement(rt.a,{colSpan:2},r.a.createElement(ot.a,{rowsPerPageOptions:[5,10,25],component:"div",count:this.props.synset_total_size,rowsPerPage:this.props.synset_page_size,page:this.props.synset_page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,a){return e.props.setSynSetPage(a)},onChangeRowsPerPage:function(t){return e.props.setSynSetPageSize(t.target.value)}})))))))}}]),a}(r.a.Component),Qa=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,synset_list:e.appReducer.synset_list,synset_filter:e.appReducer.synset_filter,synset_page:e.appReducer.synset_page,synset_page_size:e.appReducer.synset_page_size,synset_total_size:e.appReducer.synset_total_size,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id}}),(function(e){return Object(u.b)(Ne,e)}))(Va),Ga=(a(194),{page:{float:"left"},pageWidth:{width:"900px"},logFiles:{marginTop:"10px",maxHeight:"60vh",minWidth:"900px",width:"900px",overflowX:"auto",overflowY:"auto",display:"inline-block",whiteSpace:"nowrap",resize:"both"},logLine:{fontFamily:"Courier",fontSize:"0.65em",color:"#666",marginBottom:"4px"},item:{},selectedItem:{color:"#000"}}),Za=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={has_error:!1,onError:e.onError,openDialog:e.openDialog,closeDialog:e.closeDialog},n.messagesEndRef=r.a.createRef(),n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({openDialog:e.openDialog,closeDialog:e.closeDialog})}},{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e,t,a){this.scrollToBottom()}},{key:"showLogs",value:function(e){this.setState({selectedItem:e}),this.props.getLogList(e)}},{key:"restart",value:function(e){this.props.restartService(e)}},{key:"selected",value:function(e){return e===this.props.selected_log?"selected-chip":"chip"}},{key:"get_active",value:function(e){return this.props.active_components&&!0===this.props.active_components[e]?"chip-image-area":"chip-image-area-not-active"}},{key:"scrollToBottom",value:function(){this.messagesEndRef.current.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:Ga.page},r.a.createElement("div",{style:Ga.pageWidth},r.a.createElement("div",null,r.a.createElement("div",{className:this.selected("auth"),onClick:function(){return e.showLogs("auth")},title:"show authentication system logs"},r.a.createElement("div",{className:this.get_active("auth")},r.a.createElement("img",{className:"chip-image-area-img",src:"../images/login-icon.png",alt:"auth",width:"96",height:"96"})),"Authentication",Jn.hasRole(this.props.user,["admin"])&&r.a.createElement("img",{className:"restart-image",src:"../images/refresh.svg",alt:"restart",width:"24",height:"24",title:"restart authentication service",onClick:function(){return e.restart("auth")}})),r.a.createElement("div",{className:this.selected("conversion"),onClick:function(){return e.showLogs("conversion")},title:"show conversion system logs"},r.a.createElement("div",{className:this.get_active("conversion")},r.a.createElement("img",{className:"chip-image-area-img",src:"../images/conversion.svg",alt:"auth",width:"96",height:"96"})),"Conversion",Jn.hasRole(this.props.user,["admin"])&&r.a.createElement("img",{className:"restart-image",src:"../images/refresh.svg",alt:"restart",width:"24",height:"24",title:"restart conversion service",onClick:function(){return e.restart("conversion")}})),r.a.createElement("div",{className:this.selected("crawler"),onClick:function(){return e.showLogs("crawler")},title:"show crawler system logs"},r.a.createElement("div",{className:this.get_active("crawler")},r.a.createElement("img",{className:"chip-image-area-img",src:"../images/web-crawler.svg",alt:"auth",width:"96",height:"96"})),"Crawler",Jn.hasRole(this.props.user,["admin"])&&r.a.createElement("img",{className:"restart-image",src:"../images/refresh.svg",alt:"restart",width:"24",height:"24",title:"restart crawler service",onClick:function(){return e.restart("crawler")}})),r.a.createElement("div",{className:this.selected("document"),onClick:function(){return e.showLogs("document")},title:"show document system logs"},r.a.createElement("div",{className:this.get_active("document")},r.a.createElement("img",{className:"chip-image-area-img",src:"../images/edit.svg",alt:"auth",width:"96",height:"96"})),"Document",Jn.hasRole(this.props.user,["admin"])&&r.a.createElement("img",{className:"restart-image",src:"../images/refresh.svg",alt:"restart",width:"24",height:"24",title:"restart document service",onClick:function(){return e.restart("document")}})),r.a.createElement("div",{className:this.selected("knowledgebase"),onClick:function(){return e.showLogs("knowledgebase")},title:"show knowledge-base system logs"},r.a.createElement("div",{className:this.get_active("knowledgebase")},r.a.createElement("img",{className:"chip-image-area-img",src:"../images/kb.svg",alt:"auth",width:"96",height:"96"})),"Knowledgebase",Jn.hasRole(this.props.user,["admin"])&&r.a.createElement("img",{className:"restart-image",src:"../images/refresh.svg",alt:"restart",width:"24",height:"24",title:"restart knowledge-base service",onClick:function(){return e.restart("knowledgebase")}})),r.a.createElement("div",{className:this.selected("language"),onClick:function(){return e.showLogs("language")},title:"show language system logs"},r.a.createElement("div",{className:this.get_active("language")},r.a.createElement("img",{className:"chip-image-area-img",src:"../images/language.svg",alt:"auth",width:"96",height:"96"})),"Language",Jn.hasRole(this.props.user,["admin"])&&r.a.createElement("img",{className:"restart-image",src:"../images/refresh.svg",alt:"restart",width:"24",height:"24",title:"restart language service",onClick:function(){return e.restart("language")}})),r.a.createElement("div",{className:this.selected("mind"),onClick:function(){return e.showLogs("mind")},title:"show mind system logs"},r.a.createElement("div",{className:this.get_active("mind")},r.a.createElement("img",{className:"chip-image-area-img",src:"../images/mind.svg",alt:"auth",width:"96",height:"96"})),"SimSage Mind",Jn.hasRole(this.props.user,["admin"])&&r.a.createElement("img",{className:"restart-image",src:"../images/refresh.svg",alt:"restart",width:"24",height:"24",title:"restart mind service",onClick:function(){return e.restart("mind")}})),r.a.createElement("div",{className:this.selected("operator"),onClick:function(){return e.showLogs("operator")},title:"show operator system logs"},r.a.createElement("div",{className:this.get_active("operator")},r.a.createElement("img",{className:"chip-image-area-img",src:"../images/operator.svg",alt:"auth",width:"96",height:"96"})),"Operator",Jn.hasRole(this.props.user,["admin"])&&r.a.createElement("img",{className:"restart-image",src:"../images/refresh.svg",alt:"restart",width:"24",height:"24",title:"restart operator service",onClick:function(){return e.restart("operator")}})),r.a.createElement("div",{className:this.selected("search"),onClick:function(){return e.showLogs("search")},title:"show search system logs"},r.a.createElement("div",{className:this.get_active("search")},r.a.createElement("img",{className:"chip-image-area-img",src:"../images/search.svg",alt:"auth",width:"96",height:"96"})),"Search",Jn.hasRole(this.props.user,["admin"])&&r.a.createElement("img",{className:"restart-image",src:"../images/refresh.svg",alt:"restart",width:"24",height:"24",title:"restart search service",onClick:function(){return e.restart("search")}})),r.a.createElement("div",{className:this.selected("stats"),onClick:function(){return e.showLogs("stats")},title:"show statistics system logs"},r.a.createElement("div",{className:this.get_active("stats")},r.a.createElement("img",{className:"chip-image-area-img",src:"../images/stats.svg",alt:"auth",width:"96",height:"96"})),"Statistics",Jn.hasRole(this.props.user,["admin"])&&r.a.createElement("img",{className:"restart-image",src:"../images/refresh.svg",alt:"restart",width:"24",height:"24",title:"restart statistics service",onClick:function(){return e.restart("stats")}})),r.a.createElement("div",{className:this.selected("web"),onClick:function(){return e.showLogs("web")},title:"show web-server system logs"},r.a.createElement("div",{className:this.get_active("web")},r.a.createElement("img",{className:"chip-image-area-img",src:"../images/web.svg",alt:"auth",width:"96",height:"96"})),"Web server",Jn.hasRole(this.props.user,["admin"])&&r.a.createElement("img",{className:"restart-image",src:"../images/refresh.svg",alt:"restart",width:"24",height:"24",title:"restart web service",onClick:function(){return e.restart("web")}})))),r.a.createElement("div",{style:Ga.logFiles},this.props.log_list&&this.props.log_list.map((function(e){return r.a.createElement("div",{style:Ga.logLine,id:e},e)})),r.a.createElement("div",{ref:this.messagesEndRef})))}}]),a}(r.a.Component),Xa=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id,selected_organisation_id:e.appReducer.selected_organisation_id,log_list:e.appReducer.log_list,selected_log:e.appReducer.selected_log,active_components:e.appReducer.active_components,user:e.appReducer.user}}),(function(e){return Object(u.b)(Ne,e)}))(Za),$a=a(113),en=a(243),tn=a.n(en),an={pageWidth:{width:"900px"},knowledgeSelect:{padding:"5px",marginBottom:"50px"},lhs:{float:"left",width:"150px",marginTop:"-10px",color:"#aaa"},rhs:{float:"left"},label:{marginTop:"20px",color:"#555"},barGraphs:{float:"left",margin:"20px",minWidth:"440px",width:"900px"},barGraph:{float:"left",width:"410px",height:"450px",margin:"10px"},downloadButton:{float:"right"},dateSelect:{float:"right",marginTop:"3px",marginRight:"5px"}},nn=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={has_error:!1,onError:e.onError,openDialog:e.openDialog,closeDialog:e.closeDialog},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({openDialog:e.openDialog,closeDialog:e.closeDialog})}},{key:"componentDidMount",value:function(){}},{key:"downloadReport",value:function(){var e=new Date(this.props.report_date),t=e.getFullYear(),a=e.getMonth()+1,n=x.get_query_log_url(this.props.selected_organisation_id,this.props.selected_knowledgebase_id,t,a);window.open(n,"_blank")}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"render",value:function(){var e=this,t=new Date(this.props.report_date);return r.a.createElement("div",{style:an.pageWidth},this.isVisible()&&r.a.createElement("div",null,r.a.createElement("br",{clear:"both"}),r.a.createElement("div",{style:an.downloadButton},r.a.createElement(B.a,{variant:"outlined",onClick:function(){return e.downloadReport()}},"download report")),r.a.createElement("div",{style:an.dateSelect},r.a.createElement(tn.a,{className:"date-picker-input",selected:t,dateFormat:"yyyy/MM",todayButton:"today",showMonthYearPicker:!0,onChange:function(t){e.props.setReportDate(t),e.props.getReports()}})),r.a.createElement("br",{clear:"both"})),r.a.createElement("div",{style:an.barGraphs},this.isVisible()&&this.props.general_statistics.map((function(e){return r.a.createElement("div",{key:e.id,style:an.barGraph},r.a.createElement($a.Bar,{data:e,options:te.getGraphOptions(""),width:400,height:350}))})),this.isVisible()&&this.props.file_type_statistics.map((function(e){return r.a.createElement("div",{key:e.id,style:an.barGraph},r.a.createElement($a.Bar,{data:e,options:te.getGraphOptions(""),width:400,height:350}))})),this.isVisible()&&this.props.query_word_frequency.map((function(e){return r.a.createElement("div",{key:e.id,style:an.barGraph},r.a.createElement($a.Bar,{data:e,options:te.getGraphOptions("queries"),width:400,height:350}))})),this.isVisible()&&this.props.access_frequency.labels.length>0&&r.a.createElement("div",{style:an.barGraph},r.a.createElement($a.Line,{data:this.props.access_frequency,options:te.getGraphOptions("access count"),width:400,height:350}))))}}]),a}(r.a.Component),rn=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,report_date:e.appReducer.report_date,access_frequency:e.appReducer.access_frequency,general_statistics:e.appReducer.general_statistics,query_word_frequency:e.appReducer.query_word_frequency,file_type_statistics:e.appReducer.file_type_statistics}}),(function(e){return Object(u.b)(Ne,e)}))(nn),sn=a(246),on=a.n(sn),ln=a(247),cn=a.n(ln),dn=a(248),un=a.n(dn),pn=a(249),mn=a.n(pn),hn=a(552),gn=a(512),fn=a(561),yn=a(562),_n=a(573),vn=a(250),bn=a.n(vn),wn=a(251),En=a.n(wn),kn=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={has_error:!1,links:""},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){if(this.props.onSave){var e=this.state.links.replace(/\n/g," ");e=(e=e.replace(/\r/g," ")).replace(/\t/g," "),this.props.onSave(!0,e)}}},{key:"handleCancel",value:function(){this.props.onSave&&this.props.onSave(!1,"")}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"operator-teach.js: Something went wrong."):r.a.createElement(J.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableBackdropClick:!0,disableEscapeKeyDown:!0,open:this.props.open,fullWidth:!0,maxWidth:"lg",onClose:function(){return e.handleCancel()}},r.a.createElement(Q.a,{id:"alert-dialog-title"},"Teach SimSage?"),r.a.createElement(V.a,null,r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1},r.a.createElement("div",null,"question")),r.a.createElement(Y.a,{item:!0,xs:9},this.props.question),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1},r.a.createElement("div",null,"answer")),r.a.createElement(Y.a,{item:!0,xs:9},this.props.answer),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1},r.a.createElement("div",null,"links")),r.a.createElement(Y.a,{item:!0,xs:9},r.a.createElement(N.a,{onChange:function(t){return e.setState({links:t.target.value})},placeholder:"links (images and page-links, separated by commas or spaces)",multiline:!0,rows:5,variant:"outlined",fullWidth:!0,value:this.state.links})),r.a.createElement(Y.a,{item:!0,xs:1}))),r.a.createElement(K.a,null,r.a.createElement(B.a,{color:"primary",onClick:function(){return e.handleCancel()}},"Cancel"),r.a.createElement(B.a,{variant:"outlined",color:"secondary",onClick:function(){return e.handleSave()}},"Save")))}}]),a}(n.Component),xn={questionStyle:{display:"inline-block",fontWeight:"600"},answerStyle:{fontSize:"0.95em"}},Sn=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={has_error:!1,open:e.open,onSave:e.onSave,onError:e.onError},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({open:e.open})}},{key:"handleSave",value:function(){this.state.onSave&&this.state.onSave(!0)}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(!1)}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"operator-previous-answer.js: Something went wrong."):r.a.createElement(J.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableBackdropClick:!0,disableEscapeKeyDown:!0,open:this.state.open,fullWidth:!0,maxWidth:"lg",onClose:function(){return e.handleCancel()}},r.a.createElement(Q.a,{id:"alert-dialog-title"},"Use Previous Answer?"),r.a.createElement(V.a,null,r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:10},r.a.createElement("div",null,"SimSage has a previous answer to the question: ",r.a.createElement("div",{style:xn.questionStyle},this.props.question))),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:2},r.a.createElement("div",null,"SimSage's answer was:")),r.a.createElement(Y.a,{item:!0,xs:8},r.a.createElement("div",{style:xn.answerStyle},this.props.answer)),r.a.createElement(Y.a,{item:!0,xs:1}))),r.a.createElement(K.a,null,r.a.createElement(B.a,{color:"primary",onClick:function(){return e.handleCancel()}},"Cancel"),r.a.createElement(B.a,{variant:"outlined",color:"secondary",onClick:function(){return e.handleSave()}},"Use this Answer")))}}]),a}(n.Component),Cn={buttonsTop:{marginTop:"10px"},topButton:{marginLeft:"10px"},closeButton:{marginTop:"-35px",marginRight:"30px",height:"20px",float:"right",cursor:"pointer"},conversations:{marginTop:"10px",backgroundColor:"#fafafa",width:"900px",height:"500px",borderRadius:"10px",overflowY:"auto"},avatarBackground:{backgroundColor:"#ccc"},simSageIcon:{color:"#66aa66"},simSageIconSelected:{color:"#dd6666"},personIcon:{color:"#666cc6"},personIconSelected:{color:"#dd6666"},kbName:{float:"right",marginLeft:"5px",marginTop:"4px",marginRight:"100px",fontSize:"0.9em"},typingDots:{width:"60px"}},On=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={operator_reply:"",last_time:0},n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.setInterval((function(){return e.checkClientTyping()}),1e3)}},{key:"componentDidCatch",value:function(e,t){console.log(e,t),this.props.setError(e,t)}},{key:"componentDidUpdate",value:function(e,t,a){this.listRef&&(this.listRef.scrollTop=this.listRef.scrollHeight)}},{key:"readyForChat",value:function(){var e={sessionId:this.props.session.id,operatorId:this.props.operator.id,organisationId:this.props.selected_organisation_id,userId:this.props.user.id};this.props.sendOperatorMessage("/ops/ready",e),this.props.operatorReady(this.props.operator.id,!0)}},{key:"isTyping",value:function(){var e=this.state.last_time,t=C.getSystemTime();if(e<t&&(this.setState({last_time:t+2e3}),this.props.operator.client_id&&this.props.operator.id)){var a={fromId:this.props.operator.id,toId:this.props.operator.client_id,isTyping:!0};this.props.sendOperatorMessage("/ops/typing",a)}}},{key:"checkClientTyping",value:function(){this.props.operator&&this.props.operator.is_typing&&this.props.operator.typing_time<C.getSystemTime()&&this.props.stopClientTyping(this.props.operator.id)}},{key:"takeBreak",value:function(){var e={sessionId:this.props.session.id,operatorId:this.props.operator.id,organisationId:this.props.selected_organisation_id,clientId:this.props.operator.client_id};this.props.sendOperatorMessage("/ops/take-break",e),this.props.operatorReady(this.props.operator.id,!1)}},{key:"nextUser",value:function(){var e={sessionId:this.props.session.id,operatorId:this.props.operator.id,organisationId:this.props.selected_organisation_id,clientId:this.props.operator.client_id};this.props.sendOperatorMessage("/ops/next-user",e),this.props.clearUser(this.props.operator.id)}},{key:"banUserConfirm",value:function(){var e=this;this.props.operator.client_id&&this.props.operator.client_id.length>0&&this.props.openDialog("are you sure you want to ban this user?","Ban User",(function(t){e.banUser(t)}))}},{key:"banUser",value:function(e){if(e){var t={sessionId:this.props.session.id,operatorId:this.props.operator.id,organisationId:this.props.selected_organisation_id,clientId:this.props.operator.client_id};this.props.sendOperatorMessage("/ops/ban-user",t),this.props.clearUser(this.props.operator.id)}this.props.closeDialog&&this.props.closeDialog()}},{key:"operatorReply",value:function(e){if(this.props.operator.client_id.length>0&&e.length>0){var t={sessionId:this.props.session.id,operatorId:this.props.operator.id,organisationId:this.props.selected_organisation_id,clientId:this.props.operator.client_id,kbId:this.props.operator.client_kb_id,text:e};this.props.sendOperatorMessage("/ops/chat",t),this.props.addConversation(this.props.operator.id,{id:this.props.operator.conversation_list.length+1,primary:e,secondary:"You",used:!1,is_simsage:!0}),this.setState({operator_reply:""})}}},{key:"selectForLearn",value:function(e){e&&e.is_simsage?e.id===this.props.operator.answer_id?this.props.setOperatorAnswer(this.props.operator.id,"",""):this.props.setOperatorAnswer(this.props.operator.id,e.id,e.primary):e&&(e.id===this.props.operator.question_id?this.props.setOperatorQuestion(this.props.operator.id,"",""):this.props.setOperatorQuestion(this.props.operator.id,e.id,e.primary))}},{key:"teachSimSage",value:function(e,t){if(e&&this.props.operator.client_id.length>0&&this.props.operator.question.length>0&&this.props.operator.answer.length>0){var a={sessionId:this.props.session.id,operatorId:this.props.operator.id,organisationId:this.props.selected_organisation_id,clientId:this.props.operator.client_id,kbId:this.props.operator.client_kb_id,text:this.props.operator.question,answer:this.props.operator.answer,links:t};this.props.sendOperatorMessage("/ops/teach",a);var n,r=this.props.operator.conversation_list,i=Object(g.a)(r);try{for(i.s();!(n=i.n()).done;){var s=n.value;s.id!==this.props.operator.question_id&&s.id!==this.props.operator.answer_id||this.props.markConversationItemUsed(this.props.operator.id,s.id)}}catch(o){i.e(o)}finally{i.f()}}this.props.setOperatorAnswer(this.props.operator.id,"",""),this.props.setOperatorQuestion(this.props.operator.id,"","")}},{key:"usePreviousQuestion",value:function(e){e&&this.props.operator.prev_answer.length>0&&this.operatorReply(this.props.operator.prev_answer),this.props.clearPreviousAnswer(this.state.operator.id)}},{key:"getAvatarStyle",value:function(e){return e.is_simsage?e.id===this.props.operator.answer_id||e.used?Cn.simSageIconSelected:Cn.simSageIcon:e.id===this.props.operator.question_id||e.used?Cn.personIconSelected:Cn.personIcon}},{key:"render",value:function(){var e=this,t=Kn.hasRole(this.props.user,["operator"]),a=this.props.operator.operator_ready&&this.props.operator_connected&&t,n=this.props.operator.operator_ready||!this.props.operator_connected,i=this.props.operator.client_id&&this.props.operator.client_id.length>0;return r.a.createElement("div",null,r.a.createElement(kn,{open:""!==this.props.operator.question_id&&""!==this.props.operator.answer_id,question:this.props.operator.question,onSave:function(t,a){return e.teachSimSage(t,a)},answer:this.props.operator.answer}),r.a.createElement(Sn,{open:""!==this.props.operator.current_question&&""!==this.props.operator.prev_answer,question:this.props.operator.current_question,onSave:function(t){return e.usePreviousQuestion(t)},answer:this.props.operator.prev_answer}),r.a.createElement("div",{style:Cn.buttonsTop},r.a.createElement(B.a,{variant:"contained",style:Cn.topButton,disabled:n,color:"secondary",title:"Signal that you are ready to go and converse with customers.",onClick:function(){return e.readyForChat()}},r.a.createElement(on.a,null),"Ready"),r.a.createElement(B.a,{variant:"contained",style:Cn.topButton,disabled:!a,color:"secondary",title:"take a break, stop participating in conversations while you have a break.",onClick:function(){return e.takeBreak()}},r.a.createElement(cn.a,null),"Break"),r.a.createElement(B.a,{variant:"contained",style:Cn.topButton,disabled:!i,color:"secondary",title:"We have finished the current conversation and are ready for a next one.",onClick:function(){return e.nextUser()}},r.a.createElement(un.a,null),"Next User"),r.a.createElement(B.a,{variant:"contained",style:Cn.topButton,disabled:!i,color:"secondary",title:"The current conversation is abusive or bad spirited, ban this user from the system.",onClick:function(){return e.banUserConfirm()}},r.a.createElement(mn.a,null),"Ban User"),r.a.createElement("div",{style:Cn.kbName},"clients connected: ",r.a.createElement("b",null,this.props.num_active_connections)),this.props.operator.client_kb_name&&this.props.operator.client_kb_name.length>0&&r.a.createElement("div",{style:Cn.kbName},this.props.operator.client_kb_name)),!this.props.isFirst&&r.a.createElement("div",{style:Cn.closeButton,title:"Remove this operator",onClick:function(){e.takeBreak(),e.props.onCloseTab(),e.props.removeOperator(e.props.operator.id)}},"x"),r.a.createElement(Y.a,{container:!0,spacing:2},r.a.createElement(Y.a,{item:!0,xs:12,md:6},r.a.createElement("div",null,r.a.createElement(hn.a,{style:Cn.conversations,dense:!0,ref:function(t){e.listRef=t}},this.props.operator.conversation_list.map((function(t){return r.a.createElement(gn.a,{key:t.id,onClick:function(){a&&e.selectForLearn(t)}},r.a.createElement(fn.a,null,r.a.createElement(_n.a,{style:Cn.avatarBackground},t.is_simsage&&r.a.createElement(bn.a,{style:e.getAvatarStyle(t)}),!t.is_simsage&&r.a.createElement(En.a,{style:e.getAvatarStyle(t)}))),r.a.createElement(yn.a,{primary:t.primary,secondary:t.secondary}))})),this.props.operator.is_typing&&r.a.createElement(gn.a,null,r.a.createElement("img",{src:"../images/dots.gif",style:Cn.typingDots,alt:"typing"})))))),r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:9},r.a.createElement(N.a,{onChange:function(t){return e.setState({operator_reply:t.target.value})},disabled:!i,onKeyPress:function(t){"Enter"===t.key&&e.operatorReply(e.state.operator_reply),e.isTyping()},label:"your reply",fullWidth:!0,value:this.state.operator_reply})),r.a.createElement(Y.a,{item:!0,xs:2,style:{marginTop:"12px"}},r.a.createElement(B.a,{variant:"outlined",disabled:!i,color:"secondary",onClick:function(){return e.operatorReply(e.state.operator_reply)}},"Reply"))))}}]),a}(r.a.Component),In=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,session:e.appReducer.session,user:e.appReducer.user,operator_connected:e.appReducer.operator_connected,num_active_connections:e.appReducer.num_active_connections,selected_organisation_id:e.appReducer.selected_organisation_id}}),(function(e){return Object(u.b)(Ne,e)}))(On),Rn={tab:{backgroundColor:"#f8f8f8",color:"#000"},add_button:{float:"right",width:"20px",marginTop:"-40px"}},jn=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={selectedTab:"1"},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){console.log(e,t),this.props.setError(e,t)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(bt.a,{value:this.state.selectedTab,onChange:function(t,a){return e.setState({selectedTab:a})}},this.props.operators&&this.props.operators.map((function(e,t){return r.a.createElement(wt.a,{label:"operator "+(t+1),key:"tab"+(t+1),value:""+(t+1),style:Rn.tab})}))),this.props.operators&&this.props.operators.length<5&&r.a.createElement(B.a,{variant:"contained",onClick:function(){return e.props.addOperator()},title:"add operator",style:Rn.add_button},"+"),this.props.operators&&this.props.operators.map((function(t,a){return""+(a+1)===e.state.selectedTab?r.a.createElement(In,{key:"display"+(a+1),operator:t,isFirst:0===a,onCloseTab:function(){return e.setState({selectedTab:"1"})},openDialog:function(t,a,n){return e.props.openDialog(t,a,n)},closeDialog:function(){return e.props.closeDialog()}}):r.a.createElement("div",null)})))}}]),a}(r.a.Component),Tn=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,session:e.appReducer.session,user:e.appReducer.user,operators:e.appReducer.operators}}),(function(e){return Object(u.b)(Ne,e)}))(jn),Dn={formContent:{overflowY:"scroll",height:"550px"},tab:{backgroundColor:"#f8f8f8",color:"#000"},domainPage:{padding:"10px"},textField:{marginLeft:"10px",marginRight:"10px",width:"500px"},timeTabContent:{marginLeft:"20px"},testButton:{marginLeft:"20px",marginTop:"20px",marginRight:"20px"}},Ln=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state=Object(d.a)(Object(d.a)({open:e.open,onSave:e.onSave,onTest:e.onTest,onUpdate:e.onUpdate,onError:e.onError,error_title:e.error_title,error_msg:e.error_msg,selectedTab:"general",organisation_id:e.organisation_id,kb_id:e.kb_id},n.construct_data(e.domain)),{},{has_error:!1}),n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&(e.domain?this.setState(Object(d.a)({open:e.open,title:e.title,onSave:e.onSave,onUpdate:e.onUpdate,onTest:e.onTest,onError:e.onError,error_title:e.error_title,error_msg:e.error_msg,organisation_id:e.organisation_id,kb_id:e.kb_id},this.construct_data(e.domain))):this.setState({open:e.open,title:e.title,onSave:e.onSave,onError:e.onError}))}},{key:"change_callback",value:function(e){this.setState(e)}},{key:"construct_data",value:function(e){return e?{organisationId:"",kbId:"",domainId:C.defined(e.domainId)?e.domainId:"",domainName:C.defined(e.domainName)?e.domainName:"",userName:C.defined(e.userName)?e.userName:"",password:C.defined(e.password)?e.password:"",serverIp:C.defined(e.serverIp)?e.serverIp:"",basePath:C.defined(e.basePath)?e.basePath:"",portNumber:C.defined(e.portNumber)?e.portNumber:389,sslOn:!!C.defined(e.sslOn)&&e.sslOn,schedule:C.defined(e.schedule)?e.schedule:""}:{organisationId:"",kbId:"",domainId:"",domainName:"",userName:"",password:"",serverIp:"",basePath:"",portNumber:389,sslOn:!1,schedule:""}}},{key:"gather_data",value:function(){return{organisationId:"",kbId:"",domainId:this.state.domainId,domainName:this.state.domainName,userName:this.state.userName,password:this.state.password,serverIp:this.state.serverIp,basePath:this.state.basePath,portNumber:this.state.portNumber,sslOn:this.state.sslOn,schedule:this.state.schedule}}},{key:"setError",value:function(e,t){this.props.onError&&this.props.onError(e,t)}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null),this.setState({open:!1})}},{key:"handleSave",value:function(){0!==this.state.userName.trim().length||0!==this.state.password.trim().length&&0!==this.state.domainName.trim().length&&0!==this.state.serverIp.trim().length&&0!==this.state.portNumber.trim().length&&0!==this.state.basePath.trim().length?this.state.onSave&&this.state.onSave(this.gather_data()):this.setError("invalid parameters","you must supply credentials, and domain details using all fields.")}},{key:"testConnection",value:function(){0!==this.state.userName.trim().length||0!==this.state.password.trim().length&&0!==this.state.domainName.trim().length&&0!==this.state.serverIp.trim().length&&0!==this.state.portNumber.trim().length&&0!==this.state.basePath.trim().length?this.state.onTest&&this.state.onTest(this.gather_data()):this.setError("invalid parameters","you must supply credentials, and domain details using all fields.")}},{key:"updateSchedule",value:function(e){null!==e&&(this.setState({schedule:e}),this.state.onUpdate&&this.state.onUpdate(Object(d.a)(Object(d.a)({},this.gather_data()),{},{schedule:e})))}},{key:"render",value:function(){var e=this;if(this.state.has_error)return r.a.createElement("h1",null,"domain-dialog.js: Something went wrong.");var t=this.state.selectedTab;return r.a.createElement("div",null,r.a.createElement(J.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.open,disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"lg",onClose:this.handleCancel.bind(this)},r.a.createElement(Q.a,{id:"alert-dialog-title"},this.state.title),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(bt.a,{value:this.state.selectedTab,onChange:function(t,a){return e.setState({selectedTab:a})}},r.a.createElement(wt.a,{label:"domain settings",value:"general",style:Dn.tab}),r.a.createElement(wt.a,{label:"schedule",value:"schedule",style:Dn.tab})),r.a.createElement("div",{style:Dn.formContent},"general"===t&&r.a.createElement("div",{style:Dn.domainPage},r.a.createElement(N.a,{autoFocus:!0,placeholder:"domain name",label:"domain name",value:this.state.domainName,onChange:function(t){e.change_callback({domainName:t.target.value})},style:Dn.textField}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.a,{placeholder:"user-name",label:"user-name",value:this.state.userName,onChange:function(t){e.change_callback({userName:t.target.value})},style:Dn.textField}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.a,{placeholder:"password (leave blank not to change)",label:"password (leave blank not to change)",type:"password",value:this.state.password,onChange:function(t){e.change_callback({password:t.target.value})},style:Dn.textField}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.a,{placeholder:"domain ip-address",label:"domain ip-address",value:this.state.serverIp,onChange:function(t){e.change_callback({serverIp:t.target.value})},style:Dn.textField}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.a,{placeholder:"domain base-path (e.g. dc=my-domain,dc=co,dc=uk)",label:"domain base-path (e.g. dc=my-domain,dc=co,dc=uk)",value:this.state.basePath,onChange:function(t){e.change_callback({basePath:t.target.value})},style:Dn.textField}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.a,{placeholder:"Active Directory port-number",label:"Active Directory port-number",value:this.state.portNumber,onChange:function(t){e.change_callback({portNumber:t.target.value})},style:Dn.textField}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{style:{float:"left"},title:"Check this box if you want the enable SSL communications with the Active Directory server."},r.a.createElement(lt.a,{checked:this.state.sslOn,onChange:function(t){t.target.checked?e.change_callback({sslOn:t.target.checked}):e.change_callback({sslOn:!1})},value:"enable Active Directory SSL?",inputProps:{"aria-label":"primary checkbox"}}),"enable Active Directory SSL?"),r.a.createElement("br",{clear:"both"}),r.a.createElement(B.a,{color:"primary",variant:"outlined",style:Dn.testButton,onClick:function(){return e.testConnection()}},"Test Connection")),"schedule"===t&&r.a.createElement("div",{style:Dn.timeTabContent},r.a.createElement(Ct,{time:this.state.schedule,onSave:function(t){return e.updateSchedule(t)}}))))),r.a.createElement(K.a,null,r.a.createElement(B.a,{onClick:function(){return e.handleCancel()}},"cancel"),r.a.createElement(B.a,{onClick:function(){return e.handleSave()}},"save"))))}}]),a}(n.Component),Pn={domainId:"",domainName:"",userName:"",password:"",serverIp:"",basePath:"",portNumber:389,sslOn:!1,schedule:""},Bn={pageWidth:{width:"900px"},tab:{backgroundColor:"#f8f8f8",color:"#000"},addImage:{width:"25px",cursor:"pointer",color:"green"},knowledgeSelect:{padding:"5px",marginBottom:"40px"},lhs:{float:"left",width:"150px",marginTop:"-10px",color:"#aaa"},rhs:{float:"left"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff"},label:{marginTop:"20px",color:"#555"},linkButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},download:{cursor:"pointer",fontSize:"0.9em",fontWeight:"600",height:"24px"},downloadType:{fontSize:"0.9em",height:"24px"},downloadImage:{width:"24px"},labelHeader:{marginTop:"20px",marginBottom:"5px",fontSize:"0.8em"}},Nn=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={page_size:5,page:0,open:!1,title:"",selected_domain:{},domain_ask:null},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"getDomains",value:function(){var e=[],t=this.state.page*this.state.page_size,a=t+this.state.page_size;for(var n in this.props.domain_list)n>=t&&n<a&&e.push(this.props.domain_list[n]);return e}},{key:"addNewDomain",value:function(){this.setState({open:!0,selected_domain:Pn,title:"Create New Domain"})}},{key:"onUpdate",value:function(e){this.setState({selected_domain:e})}},{key:"editDomain",value:function(e){e&&this.setState({open:!0,selected_domain:Object(d.a)(Object(d.a)({},Pn),e),title:"Edit Domain"})}},{key:"deleteDomainAsk",value:function(e){var t=this;this.setState({domain_ask:e}),this.props.openDialog("are you sure you want to remove the domain named <b>"+e.domainName+"</b>?","Remove Domain",(function(e){t.deleteDomain(e)}))}},{key:"deleteDomain",value:function(e){e&&this.state.domain_ask&&this.state.domain_ask.domainId&&this.props.deleteDomain(this.state.domain_ask.domainId),this.props.closeDialog&&this.props.closeDialog()}},{key:"saveDomain",value:function(e){e&&(e.organisationId=this.props.selected_organisation_id,e.kbId=this.props.selected_knowledgebase_id,this.props.updateDomain(e)),this.setState({open:!1})}},{key:"testDomain",value:function(e){e&&(e.organisationId=this.props.selected_organisation_id,e.kbId=this.props.selected_knowledgebase_id,this.setState({selected_domain:e}),this.props.testDomain(e))}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ln,{open:this.state.open,title:this.state.title,organisation_id:this.props.selected_organisation_id,kb_id:this.props.selected_knowledgebase_id,onSave:function(t){return e.saveDomain(t)},onTest:function(t){return e.testDomain(t)},onUpdate:function(t){return e.onUpdate(t)},onError:function(t,a){return e.props.setError(t,a)},error_title:this.props.error_title,error_msg:this.props.error,domain:this.state.selected_domain}),this.isVisible()&&r.a.createElement(Xe.a,{style:Bn.pageWidth},r.a.createElement(at.a,null,r.a.createElement(it.a,null,r.a.createElement(st.a,{style:Bn.tableHeaderStyle},r.a.createElement(rt.a,{style:Bn.tableHeaderStyle},"name"),r.a.createElement(rt.a,{style:Bn.tableHeaderStyle},"path"),r.a.createElement(rt.a,{style:Bn.tableHeaderStyle},"objects"),r.a.createElement(rt.a,{style:Bn.tableHeaderStyle},"actions"))),r.a.createElement(nt.a,null,this.getDomains().map((function(t){return r.a.createElement(st.a,{key:t.domainId},r.a.createElement(rt.a,null,r.a.createElement("div",{style:Bn.label},t.domainName)),r.a.createElement(rt.a,null,r.a.createElement("div",{style:Bn.label},t.basePath)),r.a.createElement(rt.a,null,r.a.createElement("div",{style:Bn.label},t.numObjects)),r.a.createElement(rt.a,null,r.a.createElement("div",{style:Bn.linkButton,onClick:function(){return e.editDomain(t)}},r.a.createElement("img",{src:"../images/edit.svg",style:Bn.downloadImage,title:"edit domain",alt:"edit"})),r.a.createElement("div",{style:Bn.linkButton,onClick:function(){return e.deleteDomainAsk(t)}},r.a.createElement("img",{src:"../images/delete.svg",style:Bn.downloadImage,title:"remove domain",alt:"remove"}))))})),r.a.createElement(st.a,null,r.a.createElement(rt.a,null),r.a.createElement(rt.a,null),r.a.createElement(rt.a,null),r.a.createElement(rt.a,null,this.props.selected_organisation_id.length>0&&this.props.selected_knowledgebase_id.length>0&&r.a.createElement("div",{style:Bn.imageButton,onClick:function(){return e.addNewDomain()}},r.a.createElement("img",{style:Bn.addImage,src:"../images/add.svg",title:"add new domain",alt:"add new domain"})))))),r.a.createElement(ot.a,{rowsPerPageOptions:[5,10,25],component:"div",count:this.props.domain_list.length,rowsPerPage:this.state.page_size,page:this.state.page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,a){return e.changePage(a)},onChangeRowsPerPage:function(t){return e.changePageSize(t.target.value)}})))}}]),a}(n.Component),Un=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id,domain_list:e.appReducer.domain_list}}),(function(e){return Object(u.b)(Ne,e)}))(Nn),zn={roleBlock:{padding:"5px",marginTop:"20px",float:"left",width:"400px",border:"1px solid #888",borderRadius:"4px",marginLeft:"10px"},roleLabel:{fontSize:"0.8em",color:"#aaa"},roleArea:{padding:"20px"},roleChip:{margin:"2px"}},Wn=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={has_error:!1,open:e.open,displayName:e.synonym&&e.synonym.displayName?e.synonym.displayName:"",semanticList:e.synonym&&e.synonym.semanticList?e.synonym.semanticList:[],definedSemanticList:e.definedSemanticList,onSave:e.onSave,onError:e.onError},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){this.state.onSave&&this.state.onSave(this.state.displayName,this.state.semanticList)}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null,null)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({open:e.open,displayName:e.synonym&&e.synonym.displayName?e.synonym.displayName:"",semanticList:e.synonym&&e.synonym.semanticList?e.synonym.semanticList:[],definedSemanticList:e.definedSemanticList,onSave:e.onSave,onError:e.onError})}},{key:"getSemantics",value:function(){return this.state.semanticList}},{key:"getAvailableSemantics",value:function(){var e,t=[],a=this.getSemantics(),n=Object(g.a)(this.state.definedSemanticList);try{for(n.s();!(e=n.n()).done;){var r,i=e.value,s=!1,o=Object(g.a)(a);try{for(o.s();!(r=o.n()).done;){i===r.value&&(s=!0)}}catch(l){o.e(l)}finally{o.f()}s||t.push(i)}}catch(l){n.e(l)}finally{n.f()}return t}},{key:"addSemantic",value:function(e){var t=this.getSemantics();t.push(e),this.setState({semanticList:t})}},{key:"removeSemantic",value:function(e){var t,a=this.getSemantics(),n=[],r=Object(g.a)(a);try{for(r.s();!(t=r.n()).done;){var i=t.value;i!==e&&n.push(i)}}catch(s){r.e(s)}finally{r.f()}this.setState({semanticList:n})}},{key:"render",value:function(){var e=this;return this.state.has_error?r.a.createElement("h1",null,"semantic-category-edit.js: Something went wrong."):r.a.createElement(J.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.open,fullWidth:!0,disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"lg",onClose:function(){return e.handleCancel()}},r.a.createElement(Q.a,{id:"alert-dialog-title"},"Edit Semantic Display Category"),r.a.createElement(V.a,null,r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1},r.a.createElement("div",null,"display name")),r.a.createElement(Y.a,{item:!0,xs:9},r.a.createElement(N.a,{autoFocus:!0,onChange:function(t){return e.setState({displayName:t.target.value})},placeholder:"display name",fullWidth:!0,value:this.state.displayName})),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:10},r.a.createElement("div",null,r.a.createElement("div",{style:zn.roleBlock},r.a.createElement("div",{style:zn.roleLabel},"category semantics"),r.a.createElement("div",{style:zn.roleArea},this.getSemantics().map((function(t){return r.a.createElement(gt.a,{key:t,color:"secondary",style:zn.roleChip,onClick:function(){return e.removeSemantic(t)},label:t,variant:"outlined"})})))),r.a.createElement("div",{style:zn.roleBlock},r.a.createElement("div",{style:zn.roleLabel},"available semantics"),r.a.createElement("div",{style:zn.roleArea},this.getAvailableSemantics().map((function(t){return r.a.createElement(gt.a,{key:t,color:"primary",style:zn.roleChip,onClick:function(){return e.addSemantic(t)},label:t,variant:"outlined"})})))))),r.a.createElement(Y.a,{item:!0,xs:1}))),r.a.createElement(K.a,null,r.a.createElement(B.a,{color:"primary",onClick:function(){return e.handleCancel()}},"Cancel"),r.a.createElement(B.a,{variant:"outlined",color:"secondary",onClick:function(){return e.handleSave()}},"Save")))}}]),a}(n.Component),An={tableStyle:{minWidth:"800px",width:"900px"},smallTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"100px"},actionTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"100px"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"300px",width:"400px"},searchTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"200px",width:"340px"},knowledgeSelect:{padding:"5px",marginBottom:"40px"},lhs:{float:"left",width:"150px",marginTop:"-10px",color:"#aaa"},rhs:{float:"left"},label:{padding:"10px",color:"#555"},gridWidth:{width:"900px"},hr:{border:"0.1px solid #f0f0f0",width:"100%"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},addImage:{width:"25px"},linkButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},dlImageSize:{width:"24px"},searchBox:{boxShadow:"none"},search:{marginTop:"2px",marginLeft:"15px",width:"18px",color:"#000"},floatLeftLabel:{float:"left",marginRight:"6px",marginTop:"4px",fontSize:"0.9em",fontWeight:"500"},searchFloatLeft:{float:"left"},text:{padding:"4px",width:"280px"},floatLeft:{float:"left"},manualUploadSection:{marginTop:"50px"},findBox:{padding:"10px",marginBottom:"5px",float:"right"}},Fn=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={prevDisplayName:"",synonym:{},synonym_edit:!1,openDialog:e.openDialog,closeDialog:e.closeDialog,filter:"",page_size:5,page:0},n}return Object(y.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({openDialog:e.openDialog,closeDialog:e.closeDialog})}},{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"deleteDisplayCategoryAsk",value:function(e){var t=this;e&&(this.props.openDialog('are you sure you want to remove display category "'+e.displayName+'"?<br/><br/>('+e.semanticList.join(",")+")","Remove Display Category",(function(e){t.deleteDisplayCategory(e)})),this.setState({synonym:e}))}},{key:"deleteDisplayCategory",value:function(e){e&&this.state.synonym&&this.props.deleteSemanticDisplayCategory(this.state.synonym.displayName),this.props.closeDialog&&this.props.closeDialog(),this.setState({synonym_edit:!1,synonym:{}})}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.props.getSemanticDisplayCategories()}},{key:"editDisplayCategory",value:function(e){this.setState({synonym_edit:!0,prevDisplayName:e.displayName,synonym:e})}},{key:"newDisplayCategory",value:function(){this.setState({synonym_edit:!0,prevDisplayName:"",synonym:{displayName:"",synonymList:[]}})}},{key:"save",value:function(e,t){C.defined(e)&&C.defined(t)?e.trim().length>0&&t.length>0?(this.props.saveSemanticDisplayCategory(this.state.prevDisplayName,e,t),this.setState({synonym_edit:!1,synonym:{}})):this.props.setError("Error Saving Semantic Display Category","display-name cannot be empty, and the semantic-list needs at least one item in it."):this.setState({synonym_edit:!1,synonym:{}})}},{key:"getLeftOverSemanticList",value:function(){var e,t={},a=Object(g.a)(this.props.semantic_display_category_list);try{for(a.s();!(e=a.n()).done;){var n,r=e.value,i=Object(g.a)(r.semanticList);try{for(i.s();!(n=i.n()).done;){t[n.value.trim()]=!0}}catch(d){i.e(d)}finally{i.f()}}}catch(d){a.e(d)}finally{a.f()}var s,o=[],l=Object(g.a)(this.props.defined_semantic_list);try{for(l.s();!(s=l.n()).done;){var c=s.value;t[c.trim()]||o.push(c.trim())}}catch(d){l.e(d)}finally{l.f()}return o}},{key:"getSemanticDisplayList",value:function(){var e,t=[],a=this.state.filter.trim().toLowerCase(),n=0,r=this.state.page*this.state.page_size,i=r+this.state.page_size,s=Object(g.a)(this.props.semantic_display_category_list);try{for(s.s();!(e=s.n()).done;){var o=e.value;(a.length<=1||a.length>1&&o.displayName.toLowerCase().indexOf(a)>=0)&&(n>=r&&n<i&&t.push(o),n+=1)}}catch(l){s.e(l)}finally{s.f()}return t}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Wn,{open:this.state.synonym_edit,synonym:this.state.synonym,definedSemanticList:this.getLeftOverSemanticList(),onSave:function(t,a){return e.save(t,a)},onError:function(t){return e.props.setError("Error",t)}}),this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0&&r.a.createElement("div",null,r.a.createElement("div",{style:An.searchBox},r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement("div",{style:An.findBox},r.a.createElement("div",{style:An.floatLeftLabel},"filter"),r.a.createElement("div",{style:An.searchFloatLeft},r.a.createElement("input",{type:"text",value:this.props.user_filter,autoFocus:!0,style:An.text,onKeyPress:function(t){return e.handleSearchTextKeydown(t)},onChange:function(t){e.setState({filter:t.target.value})}})),r.a.createElement("div",{style:An.floatLeft},r.a.createElement("img",{style:An.search,onClick:function(){return e.props.getSemanticDisplayCategories()},src:"../images/dark-magnifying-glass.svg",title:"filter",alt:"filter"}))))),r.a.createElement("br",{clear:"both"}),r.a.createElement(Xe.a,null,r.a.createElement(at.a,{style:An.tableStyle},r.a.createElement(it.a,null,r.a.createElement(st.a,null,r.a.createElement(rt.a,{style:An.smallTableHeaderStyle},"display name"),r.a.createElement(rt.a,{style:An.tableHeaderStyle},"synonyms"),r.a.createElement(rt.a,{style:An.actionTableHeaderStyle},"actions"))),r.a.createElement(nt.a,null,this.getSemanticDisplayList().map((function(t){return r.a.createElement(st.a,{key:t.displayName},r.a.createElement(rt.a,null,r.a.createElement("div",{style:An.label},t.displayName)),r.a.createElement(rt.a,null,r.a.createElement("div",{style:An.label},t.semanticList.join(","))),r.a.createElement(rt.a,null,r.a.createElement("div",{style:An.linkButton,onClick:function(){return e.editDisplayCategory(t)}},r.a.createElement("img",{src:"../images/edit.svg",style:An.dlImageSize,title:"edit display category",alt:"edit"})),r.a.createElement("div",{style:An.linkButton,onClick:function(){return e.deleteDisplayCategoryAsk(t)}},r.a.createElement("img",{src:"../images/delete.svg",style:An.dlImageSize,title:"remove display category",alt:"remove"}))))})),r.a.createElement(st.a,null,r.a.createElement(rt.a,null),r.a.createElement(rt.a,null),r.a.createElement(rt.a,null,this.props.selected_knowledgebase_id.length>0&&r.a.createElement("div",{style:An.imageButton,onClick:function(){return e.newDisplayCategory()}},r.a.createElement("img",{style:An.addImage,src:"../images/add.svg",title:"new display category",alt:"new display category"})))),r.a.createElement(st.a,null,r.a.createElement(rt.a,{colSpan:3},r.a.createElement(ot.a,{rowsPerPageOptions:[5,10,25],component:"div",count:this.props.semantic_display_category_list.length,rowsPerPage:this.state.page_size,page:this.state.page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,a){return e.changePage(a)},onChangeRowsPerPage:function(t){return e.changePageSize(t.target.value)}}))))))))}}]),a}(r.a.Component),qn=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,semantic_display_category_list:e.appReducer.semantic_display_category_list,defined_semantic_list:e.appReducer.defined_semantic_list,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id}}),(function(e){return Object(u.b)(Ne,e)}))(Fn),Yn=a(252),Mn=a.n(Yn),Hn={page:{float:"left",minWidth:"1200px"},pageNav:{float:"left",marginRight:"50px",background:"#fdfdfd",borderRadius:"10px",padding:"5px"},pageContent:{float:"left",marginTop:"10px",minWidth:"700px"},selectedNavItem:{marginLeft:"10px",textAlign:"center",width:"180px",padding:"10px",cursor:"pointer",background:"#a0a0a0",color:"#fff",border:"1px solid #666",borderRadius:"2px",marginBottom:"5px"},navItem:{marginLeft:"10px",textAlign:"center",width:"180px",padding:"10px",border:"1px solid #bbb",cursor:"pointer",background:"#f8f8f8",color:"#666",borderRadius:"2px",marginBottom:"5px"},navItemDisabled:{marginLeft:"10px",textAlign:"center",width:"180px",padding:"10px",border:"1px solid #bbb",background:"#f8f8f8",color:"#e0e0e0",borderRadius:"2px",marginBottom:"5px",cursor:"not-allowed"},organisationSelect:{padding:"5px",marginBottom:"40px"},organisationLabel:{marginTop:"-10px"},knowledgeSelect:{padding:"5px",marginBottom:"50px"},divider:{height:"5px"},lhs:{float:"left",width:"150px",marginTop:"-10px",color:"#aaa"},rhs:{float:"left"},notificationParent:{position:"fixed",left:"4px",right:"1px",bottom:"4px"},notifications:{background:"#fafafa",marginRight:"40px",color:"#333",padding:"16px",zIndex:"101",boxShadow:"0 0 2px 2px",height:"120px",overflowY:"scroll"},notificationsHidden:{position:"fixed",left:"0",right:"0",bottom:"2px",padding:"16px",zIndex:"101"},displayAll:{float:"right",marginRight:"10px"},hideAllImage:{width:"16px"},showAllImage:{width:"16px",marginRight:"-12px"},info:{},infoDate:{display:"inline-block",width:"200px",marginLeft:"20px",fontSize:"0.8em"},infoType:{display:"inline-block",width:"100px",fontSize:"0.9em"},infoText:{display:"inline-block",width:"70%",fontSize:"0.9em"},busy:{display:"block",position:"fixed",left:0,top:0,width:"100%",height:"100%",zIndex:"9999",borderRadius:"10px",opacity:"0.8",backgroundSize:"100px",background:"url('../images/busy.gif') 50% 50% no-repeat rgb(255,255,255)"}},Jn=function(e){Object(D.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={message_callback:null,message:"",message_title:""},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"componentDidMount",value:function(){if(C.defined(x.getSession())){this.props.getOrganisationList(),a.hasRole(this.props.user,["admin"])||"organisations"!==this.props.selected_tab||this.props.selectTab("knowledge bases");var e=a.hasRole(this.props.user,["admin","manager"]),t=a.hasRoleInOrganisation(this.props.user,this.props.selected_organisation_id,["operator"]),n=this,r=this.props.operator_wait_timeout_in_ms&&this.props.operator_wait_timeout_in_ms>=1e3?this.props.operator_wait_timeout_in_ms:1e4;(e||t)&&setInterval((function(){n.refreshOperator(n)}),r),t&&(this.props.html5_notifications&&0!==this.props.html5_notifications.length||this.props.getHtml5Notifications())}else window.location="/"}},{key:"refreshOperator",value:function(e){if(e.props.selected_organisation_id.length>0&&e.props.operators&&e.props.operators.length>0){var t,a=[],n=Object(g.a)(e.props.operators);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.operator_ready&&a.push({operatorId:r.id,isTyping:r.is_typing,clientId:r.client_id})}}catch(s){n.e(s)}finally{n.f()}if(a.length>0){var i={sessionId:e.props.session.id,organisationId:e.props.selected_organisation_id,operatorList:a};this.props.sendOperatorMessage("/ops/refresh",i)}}}},{key:"getStyle",value:function(e,t){return t?Hn.navItemDisabled:this.props.selected_tab===e?Hn.selectedNavItem:Hn.navItem}},{key:"getNotifications",value:function(){if(this.props.notification_list.length>this.props.notification_list_display_size){var e=this.props.notification_list.length;return JSON.parse(JSON.stringify(this.props.notification_list.slice(e-this.props.notification_list_display_size,e))).reverse()}return JSON.parse(JSON.stringify(this.props.notification_list)).reverse()}},{key:"getOrganisationListFiltered",value:function(e,t){if(e&&e.length>0){var a,n=e.toLowerCase(),r=[],i=Object(g.a)(this.props.organisation_list);try{for(i.s();!(a=i.n()).done;){var s=a.value;s.name.toLowerCase().indexOf(n)>=0&&r.push({label:s.name,data:s.id})}}catch(u){i.e(u)}finally{i.f()}t(r)}else{var o,l=[],c=Object(g.a)(this.props.organisation_list);try{for(c.s();!(o=c.n()).done;){var d=o.value;l.push({label:d.name,data:d.id})}}catch(u){c.e(u)}finally{c.f()}t(l)}}},{key:"getKnowledgeBaseListFiltered",value:function(e,t){if(e&&e.length>0){var a,n=e.toLowerCase(),r=[],i=Object(g.a)(this.props.knowledge_base_list);try{for(i.s();!(a=i.n()).done;){var s=a.value;s.name.toLowerCase().indexOf(n)>=0&&r.push({label:s.name,data:s.kbId})}}catch(u){i.e(u)}finally{i.f()}t(r)}else{var o,l=[],c=Object(g.a)(this.props.knowledge_base_list);try{for(c.s();!(o=c.n()).done;){var d=o.value;l.push({label:d.name,data:d.kbId})}}catch(u){c.e(u)}finally{c.f()}t(l)}}},{key:"openDialog",value:function(e,t,a){this.setState({dialog_open:!0,message:e,message_title:t,message_callback:a})}},{key:"closeDialog",value:function(){this.setState({dialog_open:!1,message:"",message_title:"",message_callback:null})}},{key:"connectionError",value:function(e){this.props.setOperatorConnected(!1),this.props.setError("Operator Connection",e)}},{key:"render",value:function(){var e=this,t=a.hasRole(this.props.user,["admin"]),n=a.hasRoleInOrganisation(this.props.user,this.props.selected_organisation_id,["operator"]),i=[];if(this.props.operators){var s,o=Object(g.a)(this.props.operators);try{for(o.s();!(s=o.n()).done;){var l=s.value;l&&l.id&&i.push("/chat/"+l.id)}}catch(c){o.e(c)}finally{o.f()}}return r.a.createElement(P.a,{theme:q},this.props.busy&&r.a.createElement("div",{style:Hn.busy}),r.a.createElement(H,{title:"",signed_in:!0}),r.a.createElement(Z,{title:this.props.error_title,message:this.props.error,callback:function(){return e.props.closeError()}}),r.a.createElement(Qe,{callback:function(t){e.state.message_callback&&e.state.message_callback(t)},open:this.state.message.length>0,message:this.state.message,title:this.state.message_title}),r.a.createElement(Mn.a,{url:window.ENV.ws_base,topics:i,ref:function(t){e.clientRef=t},onMessage:function(t){e.props.processOperatorMessage(t)},onConnect:function(){return e.props.setOperatorConnected(!0)},onDisconnect:function(){return e.props.setOperatorConnected(!1)},onError:function(t){return e.connectionError(t)}}),r.a.createElement("div",{style:Hn.page},r.a.createElement("div",{style:Hn.pageNav},a.hasRole(this.props.user,["admin"])&&r.a.createElement("div",{style:this.getStyle("organisations",!1),onClick:function(){return e.props.selectTab("organisations")}},"organisations"),a.hasRole(this.props.user,["admin","manager"])&&r.a.createElement("div",{style:this.getStyle("knowledge bases",!1),onClick:function(){return e.props.selectTab("knowledge bases")}},"knowledge bases"),a.hasRole(this.props.user,["admin","manager"])&&r.a.createElement("div",{style:this.getStyle("users",!1),onClick:function(){return e.props.selectTab("users")}},"user manager"),r.a.createElement("div",{style:this.getStyle("operator",!this.props.operator_connected||!n),onClick:function(){n&&e.props.selectTab("operator")}},"operator"),a.hasRole(this.props.user,["admin","manager"])&&r.a.createElement("div",{style:this.getStyle("inventory",!1),onClick:function(){return e.props.selectTab("inventory")}},"inventory"),a.hasRole(this.props.user,["admin","manager"])&&r.a.createElement("div",{style:this.getStyle("document sources",!1),onClick:function(){return e.props.selectTab("document sources")}},"document sources"),a.hasRole(this.props.user,["admin","manager"])&&r.a.createElement("div",{style:this.getStyle("documents",!1),onClick:function(){return e.props.selectTab("documents")}},"documents"),a.hasRole(this.props.user,["admin","manager"])&&r.a.createElement("div",{style:this.getStyle("active directory",!1),onClick:function(){return e.props.selectTab("active directory")}},"active directory"),a.hasRole(this.props.user,["admin","manager"])&&r.a.createElement("div",{style:this.getStyle("mind",!1),onClick:function(){return e.props.selectTab("mind")}},"the mind"),a.hasRole(this.props.user,["admin","manager"])&&r.a.createElement("div",{style:this.getStyle("mind-test",!1),onClick:function(){return e.props.selectTab("mind-test")}},"test the mind"),a.hasRole(this.props.user,["admin","manager"])&&r.a.createElement("div",{style:this.getStyle("synonyms",!1),onClick:function(){return e.props.selectTab("synonyms")}},"synonyms"),a.hasRole(this.props.user,["admin","manager"])&&r.a.createElement("div",{style:this.getStyle("semantics"),onClick:function(){return e.props.selectTab("semantics")}},"semantics"),a.hasRole(this.props.user,["admin","manager"])&&r.a.createElement("div",{style:this.getStyle("semantic categories",!1),onClick:function(){return e.props.selectTab("semantic categories")}},"semantic categories"),a.hasRole(this.props.user,["admin","manager"])&&r.a.createElement("div",{style:this.getStyle("syn-sets"),onClick:function(){return e.props.selectTab("syn-sets")}},"syn-sets"),a.hasRole(this.props.user,["admin","manager"])&&r.a.createElement("div",{style:this.getStyle("reports",!1),onClick:function(){return e.props.selectTab("reports")}},"reports")),r.a.createElement("div",{style:Hn.pageContent},"organisations"!==this.props.selected_tab&&"os"!==this.props.selected_tab&&"logs"!==this.props.selected_tab&&"operator"!==this.props.selected_tab&&"license"!==this.props.selected_tab&&t&&r.a.createElement("div",{style:Hn.organisationSelect},r.a.createElement("div",{style:Hn.lhs},"organisation"),r.a.createElement("div",{style:Hn.rhs},r.a.createElement(tt,{label:"organisation",value:this.props.selected_organisation,onFilter:function(t,a){return e.getOrganisationListFiltered(t,a)},minTextSize:1,onSelect:function(t,a){return e.props.selectOrganisation(t,a)}}))),"organisations"!==this.props.selected_tab&&"os"!==this.props.selected_tab&&"logs"!==this.props.selected_tab&&"license"!==this.props.selected_tab&&"operator"!==this.props.selected_tab&&!t&&r.a.createElement("div",{style:Hn.organisationSelect},r.a.createElement("div",{style:Hn.lhs},"organisation"),r.a.createElement("div",{style:Hn.rhs},r.a.createElement("div",{style:Hn.organisationLabel},this.props.selected_organisation))),"organisations"!==this.props.selected_tab&&"os"!==this.props.selected_tab&&"users"!==this.props.selected_tab&&"operator"!==this.props.selected_tab&&"license"!==this.props.selected_tab&&"knowledge bases"!==this.props.selected_tab&&"logs"!==this.props.selected_tab&&r.a.createElement("div",{style:Hn.knowledgeSelect},r.a.createElement("div",{style:Hn.lhs},"knowledge base"),r.a.createElement("div",{style:Hn.rhs},r.a.createElement(tt,{label:"knowledge base",value:this.props.selected_knowledgebase,onFilter:function(t,a){return e.getKnowledgeBaseListFiltered(t,a)},minTextSize:1,onSelect:function(t,a){e.props.selectKnowledgeBase(t,a)}}))),"organisations"===this.props.selected_tab&&r.a.createElement(ht,{openDialog:function(t,a,n){return e.openDialog(t,a,n)},closeDialog:function(){return e.closeDialog()}}),"knowledge bases"===this.props.selected_tab&&r.a.createElement(jt,{openDialog:function(t,a,n){return e.openDialog(t,a,n)},closeDialog:function(){return e.closeDialog()}}),"users"===this.props.selected_tab&&r.a.createElement(vt,{openDialog:function(t,a,n){return e.openDialog(t,a,n)},closeDialog:function(){return e.closeDialog()}}),"operator"===this.props.selected_tab&&r.a.createElement(Tn,{openDialog:function(t,a,n){return e.openDialog(t,a,n)},closeDialog:function(){return e.closeDialog()}}),"inventory"===this.props.selected_tab&&r.a.createElement(Lt,{openDialog:function(t,a,n){return e.openDialog(t,a,n)},closeDialog:function(){return e.closeDialog()}}),"document sources"===this.props.selected_tab&&r.a.createElement(ya,{openDialog:function(t,a,n){return e.openDialog(t,a,n)},closeDialog:function(){return e.closeDialog()}}),"documents"===this.props.selected_tab&&r.a.createElement(ba,{openDialog:function(t,a,n){return e.openDialog(t,a,n)},closeDialog:function(){return e.closeDialog()}}),"active directory"===this.props.selected_tab&&r.a.createElement(Un,{openDialog:function(t,a,n){return e.openDialog(t,a,n)},closeDialog:function(){return e.closeDialog()}}),"mind"===this.props.selected_tab&&r.a.createElement(Ia,{openDialog:function(t,a,n){return e.openDialog(t,a,n)},closeDialog:function(){return e.closeDialog()}}),"mind-test"===this.props.selected_tab&&r.a.createElement(Ba,{openDialog:function(t,a,n){return e.openDialog(t,a,n)},closeDialog:function(){return e.closeDialog()}}),"synonyms"===this.props.selected_tab&&r.a.createElement(Wa,{openDialog:function(t,a,n){return e.openDialog(t,a,n)},closeDialog:function(){return e.closeDialog()}}),"semantic categories"===this.props.selected_tab&&r.a.createElement(qn,{openDialog:function(t,a,n){return e.openDialog(t,a,n)},closeDialog:function(){return e.closeDialog()}}),"semantics"===this.props.selected_tab&&r.a.createElement(Ma,{openDialog:function(t,a,n){return e.openDialog(t,a,n)},closeDialog:function(){return e.closeDialog()}}),"syn-sets"===this.props.selected_tab&&r.a.createElement(Qa,{openDialog:function(t,a,n){return e.openDialog(t,a,n)},closeDialog:function(){return e.closeDialog()}}),"reports"===this.props.selected_tab&&r.a.createElement(rn,{openDialog:function(t,a,n){return e.openDialog(t,a,n)},closeDialog:function(){return e.closeDialog()}}),"logs"===this.props.selected_tab&&r.a.createElement(Xa,{openDialog:function(t,a,n){return e.openDialog(t,a,n)},closeDialog:function(){return e.closeDialog()}}),"invalid"===this.props.selected_tab&&r.a.createElement("div",null,"You do not have access to this application"))),this.props.notification_list.length>0&&this.props.show_notifications&&r.a.createElement("div",{style:Hn.notificationParent},r.a.createElement("div",{style:Hn.displayAll,onClick:function(){e.props.hideNotifications()}},r.a.createElement("img",{src:"images/double-down-arrow.svg",style:Hn.hideAllImage,alt:"hide all",title:"hide log"})),r.a.createElement("div",{style:Hn.notifications},this.getNotifications().map((function(e){return console.log(e),r.a.createElement("div",{key:e.id,style:Hn.info},r.a.createElement("div",{style:Hn.infoDate},e.year,"/",a.pad(e.month),"/",a.pad(e.day),"\xa0",a.pad(e.hour),":",a.pad(e.minute),":",a.pad(parseInt(e.created/1e3)%60),".",a.pad2(e.created%1e3)),r.a.createElement("div",{style:Hn.infoType},e.service),r.a.createElement("div",{style:Hn.infoText},e.message))})))))}}],[{key:"getTab",value:function(e){return a.hasRole(e,["admin"])?"organisations":a.hasRole(e,["manager"])?"users":a.hasRole(e,["reporter"])?"reports":"invalid"}},{key:"hasRole",value:function(e,t){if(e&&e.roles){var a,n=Object(g.a)(e.roles);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(t.indexOf(r.role)>=0)return!0}}catch(i){n.e(i)}finally{n.f()}}return!1}},{key:"hasRoleInOrganisation",value:function(e,t,a){if(e&&e.roles){var n,r=Object(g.a)(e.roles);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.organisationId===t&&a.indexOf(i.role)>=0)return!0}}catch(s){r.e(s)}finally{r.f()}}return!1}},{key:"canEdit",value:function(e,t,n){return!!t||!a.hasRole(e,["admin"])&&n}},{key:"canDelete",value:function(e,t,n,r){return e.email!==t.email&&(!!n||!a.hasRole(e,["admin"])&&r)}},{key:"pad",value:function(e){return(""+e).padStart(2,"0")}},{key:"pad2",value:function(e){return(""+e).padStart(3,"0")}}]),a}(n.Component),Kn=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,notification_list:e.appReducer.notification_list,show_notifications:e.appReducer.show_notifications,operator_wait_timeout_in_ms:e.appReducer.operator_wait_timeout_in_ms,notification_list_display_size:e.appReducer.notification_list_display_size,busy:e.appReducer.busy,user:e.appReducer.user,selected_tab:e.appReducer.selected_tab,session:e.appReducer.session,operator_connected:e.appReducer.operator_connected,operators:e.appReducer.operators,organisation_list:e.appReducer.organisation_list,knowledge_base_list:e.appReducer.knowledge_base_list,html5_notifications:e.appReducer.html5_notifications,selected_organisation:e.appReducer.selected_organisation,selected_organisation_id:e.appReducer.selected_organisation_id,selected_knowledgebase:e.appReducer.selected_knowledgebase}}),(function(e){return Object(u.b)(Ne,e)}))(Jn),Vn=function(){var e={appReducer:j},t=[p.a,T],a=[],n=Object(u.c)(Object(d.a)(Object(d.a)({},e),{},{routing:h.routerReducer}));return Object(u.e)(n,w(),u.d.apply(void 0,[u.a.apply(void 0,t)].concat(a)))}();Vn.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("https://simsage.nz:state",t)}catch(a){}}(Vn.getState())})),s.a.render(r.a.createElement(o.a,{store:Vn},r.a.createElement("div",null,r.a.createElement(l.a,{basename:"/"},r.a.createElement("div",null,r.a.createElement(c.a,{exact:!0,path:"/",component:We}),r.a.createElement(c.a,{exact:!0,path:"/home",component:Kn}),r.a.createElement(c.a,{path:"/reset-password-request",component:Fe}),r.a.createElement(c.a,{path:"/reset-password-response",component:Me}),r.a.createElement(c.a,{exact:!0,path:"/os-license",component:Je}),r.a.createElement(c.a,{exact:!0,path:"/license-agreement",component:Ve}))))),document.getElementById("content"))}},[[268,1,2]]]);
//# sourceMappingURL=main.01b051b9.chunk.js.map